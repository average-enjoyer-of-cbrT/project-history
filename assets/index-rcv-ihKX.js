var Ey=Object.defineProperty;var wy=(t,e,n)=>e in t?Ey(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rf=(t,e,n)=>wy(t,typeof e!="symbol"?e+"":e,n);function Cy(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Sy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ip={exports:{}},ga={},Lp={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=Symbol.for("react.element"),Ry=Symbol.for("react.portal"),Ty=Symbol.for("react.fragment"),Iy=Symbol.for("react.strict_mode"),Ly=Symbol.for("react.profiler"),Py=Symbol.for("react.provider"),ky=Symbol.for("react.context"),My=Symbol.for("react.forward_ref"),Ay=Symbol.for("react.suspense"),Oy=Symbol.for("react.memo"),Dy=Symbol.for("react.lazy"),sf=Symbol.iterator;function Ny(t){return t===null||typeof t!="object"?null:(t=sf&&t[sf]||t["@@iterator"],typeof t=="function"?t:null)}var Pp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kp=Object.assign,Mp={};function Jr(t,e,n){this.props=t,this.context=e,this.refs=Mp,this.updater=n||Pp}Jr.prototype.isReactComponent={};Jr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ap(){}Ap.prototype=Jr.prototype;function gh(t,e,n){this.props=t,this.context=e,this.refs=Mp,this.updater=n||Pp}var ph=gh.prototype=new Ap;ph.constructor=gh;kp(ph,Jr.prototype);ph.isPureReactComponent=!0;var of=Array.isArray,Op=Object.prototype.hasOwnProperty,mh={current:null},Dp={key:!0,ref:!0,__self:!0,__source:!0};function Np(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Op.call(e,i)&&!Dp.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Eo,type:t,key:s,ref:o,props:r,_owner:mh.current}}function Fy(t,e){return{$$typeof:Eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _h(t){return typeof t=="object"&&t!==null&&t.$$typeof===Eo}function zy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lf=/\/+/g;function ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zy(""+t.key):e.toString(36)}function pl(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Eo:case Ry:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+ru(o,0):i,of(r)?(n="",t!=null&&(n=t.replace(lf,"$&/")+"/"),pl(r,e,n,"",function(u){return u})):r!=null&&(_h(r)&&(r=Fy(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(lf,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",of(t))for(var l=0;l<t.length;l++){s=t[l];var a=i+ru(s,l);o+=pl(s,e,n,a,r)}else if(a=Ny(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=i+ru(s,l++),o+=pl(s,e,n,a,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Go(t,e,n){if(t==null)return t;var i=[],r=0;return pl(t,i,"","",function(s){return e.call(n,s,r++)}),i}function by(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qe={current:null},ml={transition:null},jy={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:ml,ReactCurrentOwner:mh};function Fp(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Go,forEach:function(t,e,n){Go(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Go(t,function(){e++}),e},toArray:function(t){return Go(t,function(e){return e})||[]},only:function(t){if(!_h(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Jr;H.Fragment=Ty;H.Profiler=Ly;H.PureComponent=gh;H.StrictMode=Iy;H.Suspense=Ay;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jy;H.act=Fp;H.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=kp({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mh.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Op.call(e,a)&&!Dp.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Eo,type:t.type,key:r,ref:s,props:i,_owner:o}};H.createContext=function(t){return t={$$typeof:ky,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Py,_context:t},t.Consumer=t};H.createElement=Np;H.createFactory=function(t){var e=Np.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:My,render:t}};H.isValidElement=_h;H.lazy=function(t){return{$$typeof:Dy,_payload:{_status:-1,_result:t},_init:by}};H.memo=function(t,e){return{$$typeof:Oy,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=ml.transition;ml.transition={};try{t()}finally{ml.transition=e}};H.unstable_act=Fp;H.useCallback=function(t,e){return Qe.current.useCallback(t,e)};H.useContext=function(t){return Qe.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Qe.current.useDeferredValue(t)};H.useEffect=function(t,e){return Qe.current.useEffect(t,e)};H.useId=function(){return Qe.current.useId()};H.useImperativeHandle=function(t,e,n){return Qe.current.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return Qe.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Qe.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Qe.current.useMemo(t,e)};H.useReducer=function(t,e,n){return Qe.current.useReducer(t,e,n)};H.useRef=function(t){return Qe.current.useRef(t)};H.useState=function(t){return Qe.current.useState(t)};H.useSyncExternalStore=function(t,e,n){return Qe.current.useSyncExternalStore(t,e,n)};H.useTransition=function(){return Qe.current.useTransition()};H.version="18.3.1";Lp.exports=H;var A=Lp.exports;const yh=Sy(A),Gy=Cy({__proto__:null,default:yh},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy=A,Uy=Symbol.for("react.element"),Xy=Symbol.for("react.fragment"),By=Object.prototype.hasOwnProperty,Yy=Wy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vy={key:!0,ref:!0,__self:!0,__source:!0};function zp(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)By.call(e,i)&&!Vy.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Uy,type:t,key:s,ref:o,props:r,_owner:Yy.current}}ga.Fragment=Xy;ga.jsx=zp;ga.jsxs=zp;Ip.exports=ga;var C=Ip.exports,bp={exports:{}},yt={},jp={exports:{}},Gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,O){var D=I.length;I.push(O);e:for(;0<D;){var X=D-1>>>1,P=I[X];if(0<r(P,O))I[X]=O,I[D]=P,D=X;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var O=I[0],D=I.pop();if(D!==O){I[0]=D;e:for(var X=0,P=I.length,Ee=P>>>1;X<Ee;){var fe=2*(X+1)-1,ae=I[fe],we=fe+1,Ce=I[we];if(0>r(ae,D))we<P&&0>r(Ce,ae)?(I[X]=Ce,I[we]=D,X=we):(I[X]=ae,I[fe]=D,X=fe);else if(we<P&&0>r(Ce,D))I[X]=Ce,I[we]=D,X=we;else break e}}return O}function r(I,O){var D=I.sortIndex-O.sortIndex;return D!==0?D:I.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,h=null,d=3,f=!1,m=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var O=n(u);O!==null;){if(O.callback===null)i(u);else if(O.startTime<=I)i(u),O.sortIndex=O.expirationTime,e(a,O);else break;O=n(u)}}function x(I){if(_=!1,y(I),!m)if(n(a)!==null)m=!0,G(E);else{var O=n(u);O!==null&&Y(x,O.startTime-I)}}function E(I,O){m=!1,_&&(_=!1,p(R),R=-1),f=!0;var D=d;try{for(y(O),h=n(a);h!==null&&(!(h.expirationTime>O)||I&&!z());){var X=h.callback;if(typeof X=="function"){h.callback=null,d=h.priorityLevel;var P=X(h.expirationTime<=O);O=t.unstable_now(),typeof P=="function"?h.callback=P:h===n(a)&&i(a),y(O)}else i(a);h=n(a)}if(h!==null)var Ee=!0;else{var fe=n(u);fe!==null&&Y(x,fe.startTime-O),Ee=!1}return Ee}finally{h=null,d=D,f=!1}}var w=!1,S=null,R=-1,L=5,k=-1;function z(){return!(t.unstable_now()-k<L)}function b(){if(S!==null){var I=t.unstable_now();k=I;var O=!0;try{O=S(!0,I)}finally{O?N():(w=!1,S=null)}}else w=!1}var N;if(typeof g=="function")N=function(){g(b)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,K=j.port2;j.port1.onmessage=b,N=function(){K.postMessage(null)}}else N=function(){v(b,0)};function G(I){S=I,w||(w=!0,N())}function Y(I,O){R=v(function(){I(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,G(E))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(I){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var D=d;d=O;try{return I()}finally{d=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,O){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var D=d;d=I;try{return O()}finally{d=D}},t.unstable_scheduleCallback=function(I,O,D){var X=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?X+D:X):D=X,I){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=D+P,I={id:c++,callback:O,priorityLevel:I,startTime:D,expirationTime:P,sortIndex:-1},D>X?(I.sortIndex=D,e(u,I),n(a)===null&&I===n(u)&&(_?(p(R),R=-1):_=!0,Y(x,D-X))):(I.sortIndex=P,e(a,I),m||f||(m=!0,G(E))),I},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(I){var O=d;return function(){var D=d;d=O;try{return I.apply(this,arguments)}finally{d=D}}}})(Gp);jp.exports=Gp;var Ky=jp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y=A,_t=Ky;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wp=new Set,Xs={};function Bi(t,e){jr(t,e),jr(t+"Capture",e)}function jr(t,e){for(Xs[t]=e,t=0;t<e.length;t++)Wp.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=Object.prototype.hasOwnProperty,Zy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,af={},uf={};function Hy(t){return rc.call(uf,t)?!0:rc.call(af,t)?!1:Zy.test(t)?uf[t]=!0:(af[t]=!0,!1)}function qy(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qy(t,e,n,i){if(e===null||typeof e>"u"||qy(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Je(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){je[t]=new Je(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];je[e]=new Je(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){je[t]=new Je(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){je[t]=new Je(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){je[t]=new Je(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){je[t]=new Je(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){je[t]=new Je(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){je[t]=new Je(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){je[t]=new Je(t,5,!1,t.toLowerCase(),null,!1,!1)});var vh=/[\-:]([a-z])/g;function xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vh,xh);je[e]=new Je(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vh,xh);je[e]=new Je(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vh,xh);je[e]=new Je(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){je[t]=new Je(t,1,!1,t.toLowerCase(),null,!1,!1)});je.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){je[t]=new Je(t,1,!1,t.toLowerCase(),null,!0,!0)});function Eh(t,e,n,i){var r=je.hasOwnProperty(e)?je[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qy(e,n,r,i)&&(n=null),i||r===null?Hy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Mn=$y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wo=Symbol.for("react.element"),dr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),wh=Symbol.for("react.strict_mode"),sc=Symbol.for("react.profiler"),Up=Symbol.for("react.provider"),Xp=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),oc=Symbol.for("react.suspense"),lc=Symbol.for("react.suspense_list"),Sh=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),Bp=Symbol.for("react.offscreen"),cf=Symbol.iterator;function cs(t){return t===null||typeof t!="object"?null:(t=cf&&t[cf]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Object.assign,su;function ws(t){if(su===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);su=e&&e[1]||""}return`
`+su+t}var ou=!1;function lu(t,e){if(!t||ou)return"";ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var a=`
`+r[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{ou=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ws(t):""}function Jy(t){switch(t.tag){case 5:return ws(t.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 2:case 15:return t=lu(t.type,!1),t;case 11:return t=lu(t.type.render,!1),t;case 1:return t=lu(t.type,!0),t;default:return""}}function ac(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fr:return"Fragment";case dr:return"Portal";case sc:return"Profiler";case wh:return"StrictMode";case oc:return"Suspense";case lc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xp:return(t.displayName||"Context")+".Consumer";case Up:return(t._context.displayName||"Context")+".Provider";case Ch:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sh:return e=t.displayName||null,e!==null?e:ac(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return ac(t(e))}catch{}}return null}function ev(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ac(e);case 8:return e===wh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tv(t){var e=Yp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uo(t){t._valueTracker||(t._valueTracker=tv(t))}function Vp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Yp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uc(t,e){var n=e.checked;return _e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hf(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ui(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kp(t,e){e=e.checked,e!=null&&Eh(t,"checked",e,!1)}function cc(t,e){Kp(t,e);var n=ui(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hc(t,e.type,n):e.hasOwnProperty("defaultValue")&&hc(t,e.type,ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function df(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hc(t,e,n){(e!=="number"||Ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cs=Array.isArray;function Lr(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ui(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function dc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return _e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ff(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Cs(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ui(n)}}function $p(t,e){var n=ui(e.value),i=ui(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function gf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xo,Hp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xo=Xo||document.createElement("div"),Xo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nv=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(t){nv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),As[e]=As[t]})});function qp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||As.hasOwnProperty(t)&&As[t]?(""+e).trim():e+"px"}function Qp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=qp(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var iv=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gc(t,e){if(e){if(iv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function pc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mc=null;function Rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _c=null,Pr=null,kr=null;function pf(t){if(t=So(t)){if(typeof _c!="function")throw Error(M(280));var e=t.stateNode;e&&(e=va(e),_c(t.stateNode,t.type,e))}}function Jp(t){Pr?kr?kr.push(t):kr=[t]:Pr=t}function em(){if(Pr){var t=Pr,e=kr;if(kr=Pr=null,pf(t),e)for(t=0;t<e.length;t++)pf(e[t])}}function tm(t,e){return t(e)}function nm(){}var au=!1;function im(t,e,n){if(au)return t(e,n);au=!0;try{return tm(t,e,n)}finally{au=!1,(Pr!==null||kr!==null)&&(nm(),em())}}function Ys(t,e){var n=t.stateNode;if(n===null)return null;var i=va(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var yc=!1;if(Tn)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){yc=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{yc=!1}function rv(t,e,n,i,r,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Os=!1,Pl=null,kl=!1,vc=null,sv={onError:function(t){Os=!0,Pl=t}};function ov(t,e,n,i,r,s,o,l,a){Os=!1,Pl=null,rv.apply(sv,arguments)}function lv(t,e,n,i,r,s,o,l,a){if(ov.apply(this,arguments),Os){if(Os){var u=Pl;Os=!1,Pl=null}else throw Error(M(198));kl||(kl=!0,vc=u)}}function Yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mf(t){if(Yi(t)!==t)throw Error(M(188))}function av(t){var e=t.alternate;if(!e){if(e=Yi(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return mf(r),t;if(s===i)return mf(r),e;s=s.sibling}throw Error(M(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==i)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function sm(t){return t=av(t),t!==null?om(t):null}function om(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=om(t);if(e!==null)return e;t=t.sibling}return null}var lm=_t.unstable_scheduleCallback,_f=_t.unstable_cancelCallback,uv=_t.unstable_shouldYield,cv=_t.unstable_requestPaint,Se=_t.unstable_now,hv=_t.unstable_getCurrentPriorityLevel,Th=_t.unstable_ImmediatePriority,am=_t.unstable_UserBlockingPriority,Ml=_t.unstable_NormalPriority,dv=_t.unstable_LowPriority,um=_t.unstable_IdlePriority,pa=null,ln=null;function fv(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(pa,t,void 0,(t.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:mv,gv=Math.log,pv=Math.LN2;function mv(t){return t>>>=0,t===0?32:31-(gv(t)/pv|0)|0}var Bo=64,Yo=4194304;function Ss(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Al(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=Ss(l):(s&=o,s!==0&&(i=Ss(s)))}else o=n&~r,o!==0?i=Ss(o):s!==0&&(i=Ss(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Bt(e),r=1<<n,i|=t[n],e&=~r;return i}function _v(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yv(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Bt(s),l=1<<o,a=r[o];a===-1?(!(l&n)||l&i)&&(r[o]=_v(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function xc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cm(){var t=Bo;return Bo<<=1,!(Bo&4194240)&&(Bo=64),t}function uu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bt(e),t[e]=n}function vv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Bt(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Bt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var oe=0;function hm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dm,Lh,fm,gm,pm,Ec=!1,Vo=[],qn=null,Qn=null,Jn=null,Vs=new Map,Ks=new Map,Bn=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yf(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Vs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(e.pointerId)}}function ds(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=So(e),e!==null&&Lh(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Ev(t,e,n,i,r){switch(e){case"focusin":return qn=ds(qn,t,e,n,i,r),!0;case"dragenter":return Qn=ds(Qn,t,e,n,i,r),!0;case"mouseover":return Jn=ds(Jn,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Vs.set(s,ds(Vs.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ks.set(s,ds(Ks.get(s)||null,t,e,n,i,r)),!0}return!1}function mm(t){var e=Ti(t.target);if(e!==null){var n=Yi(e);if(n!==null){if(e=n.tag,e===13){if(e=rm(n),e!==null){t.blockedOn=e,pm(t.priority,function(){fm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _l(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);mc=i,n.target.dispatchEvent(i),mc=null}else return e=So(n),e!==null&&Lh(e),t.blockedOn=n,!1;e.shift()}return!0}function vf(t,e,n){_l(t)&&n.delete(e)}function wv(){Ec=!1,qn!==null&&_l(qn)&&(qn=null),Qn!==null&&_l(Qn)&&(Qn=null),Jn!==null&&_l(Jn)&&(Jn=null),Vs.forEach(vf),Ks.forEach(vf)}function fs(t,e){t.blockedOn===e&&(t.blockedOn=null,Ec||(Ec=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,wv)))}function $s(t){function e(r){return fs(r,t)}if(0<Vo.length){fs(Vo[0],t);for(var n=1;n<Vo.length;n++){var i=Vo[n];i.blockedOn===t&&(i.blockedOn=null)}}for(qn!==null&&fs(qn,t),Qn!==null&&fs(Qn,t),Jn!==null&&fs(Jn,t),Vs.forEach(e),Ks.forEach(e),n=0;n<Bn.length;n++)i=Bn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)mm(n),n.blockedOn===null&&Bn.shift()}var Mr=Mn.ReactCurrentBatchConfig,Ol=!0;function Cv(t,e,n,i){var r=oe,s=Mr.transition;Mr.transition=null;try{oe=1,Ph(t,e,n,i)}finally{oe=r,Mr.transition=s}}function Sv(t,e,n,i){var r=oe,s=Mr.transition;Mr.transition=null;try{oe=4,Ph(t,e,n,i)}finally{oe=r,Mr.transition=s}}function Ph(t,e,n,i){if(Ol){var r=wc(t,e,n,i);if(r===null)vu(t,e,i,Dl,n),yf(t,i);else if(Ev(r,t,e,n,i))i.stopPropagation();else if(yf(t,i),e&4&&-1<xv.indexOf(t)){for(;r!==null;){var s=So(r);if(s!==null&&dm(s),s=wc(t,e,n,i),s===null&&vu(t,e,i,Dl,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else vu(t,e,i,null,n)}}var Dl=null;function wc(t,e,n,i){if(Dl=null,t=Rh(i),t=Ti(t),t!==null)if(e=Yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dl=t,null}function _m(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hv()){case Th:return 1;case am:return 4;case Ml:case dv:return 16;case um:return 536870912;default:return 16}default:return 16}}var Vn=null,kh=null,yl=null;function ym(){if(yl)return yl;var t,e=kh,n=e.length,i,r="value"in Vn?Vn.value:Vn.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return yl=r.slice(t,1<i?1-i:void 0)}function vl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ko(){return!0}function xf(){return!1}function vt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ko:xf,this.isPropagationStopped=xf,this}return _e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),e}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mh=vt(es),Co=_e({},es,{view:0,detail:0}),Rv=vt(Co),cu,hu,gs,ma=_e({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ah,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gs&&(gs&&t.type==="mousemove"?(cu=t.screenX-gs.screenX,hu=t.screenY-gs.screenY):hu=cu=0,gs=t),cu)},movementY:function(t){return"movementY"in t?t.movementY:hu}}),Ef=vt(ma),Tv=_e({},ma,{dataTransfer:0}),Iv=vt(Tv),Lv=_e({},Co,{relatedTarget:0}),du=vt(Lv),Pv=_e({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),kv=vt(Pv),Mv=_e({},es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Av=vt(Mv),Ov=_e({},es,{data:0}),wf=vt(Ov),Dv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Fv[t])?!!e[t]:!1}function Ah(){return zv}var bv=_e({},Co,{key:function(t){if(t.key){var e=Dv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ah,charCode:function(t){return t.type==="keypress"?vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jv=vt(bv),Gv=_e({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cf=vt(Gv),Wv=_e({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ah}),Uv=vt(Wv),Xv=_e({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bv=vt(Xv),Yv=_e({},ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vv=vt(Yv),Kv=[9,13,27,32],Oh=Tn&&"CompositionEvent"in window,Ds=null;Tn&&"documentMode"in document&&(Ds=document.documentMode);var $v=Tn&&"TextEvent"in window&&!Ds,vm=Tn&&(!Oh||Ds&&8<Ds&&11>=Ds),Sf=" ",Rf=!1;function xm(t,e){switch(t){case"keyup":return Kv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gr=!1;function Zv(t,e){switch(t){case"compositionend":return Em(e);case"keypress":return e.which!==32?null:(Rf=!0,Sf);case"textInput":return t=e.data,t===Sf&&Rf?null:t;default:return null}}function Hv(t,e){if(gr)return t==="compositionend"||!Oh&&xm(t,e)?(t=ym(),yl=kh=Vn=null,gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vm&&e.locale!=="ko"?null:e.data;default:return null}}var qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qv[t.type]:e==="textarea"}function wm(t,e,n,i){Jp(i),e=Nl(e,"onChange"),0<e.length&&(n=new Mh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ns=null,Zs=null;function Qv(t){Om(t,0)}function _a(t){var e=_r(t);if(Vp(e))return t}function Jv(t,e){if(t==="change")return e}var Cm=!1;if(Tn){var fu;if(Tn){var gu="oninput"in document;if(!gu){var If=document.createElement("div");If.setAttribute("oninput","return;"),gu=typeof If.oninput=="function"}fu=gu}else fu=!1;Cm=fu&&(!document.documentMode||9<document.documentMode)}function Lf(){Ns&&(Ns.detachEvent("onpropertychange",Sm),Zs=Ns=null)}function Sm(t){if(t.propertyName==="value"&&_a(Zs)){var e=[];wm(e,Zs,t,Rh(t)),im(Qv,e)}}function e1(t,e,n){t==="focusin"?(Lf(),Ns=e,Zs=n,Ns.attachEvent("onpropertychange",Sm)):t==="focusout"&&Lf()}function t1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _a(Zs)}function n1(t,e){if(t==="click")return _a(e)}function i1(t,e){if(t==="input"||t==="change")return _a(e)}function r1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kt=typeof Object.is=="function"?Object.is:r1;function Hs(t,e){if(Kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!rc.call(e,r)||!Kt(t[r],e[r]))return!1}return!0}function Pf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kf(t,e){var n=Pf(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pf(n)}}function Rm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Tm(){for(var t=window,e=Ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ll(t.document)}return e}function Dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function s1(t){var e=Tm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Rm(n.ownerDocument.documentElement,n)){if(i!==null&&Dh(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=kf(n,s);var o=kf(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var o1=Tn&&"documentMode"in document&&11>=document.documentMode,pr=null,Cc=null,Fs=null,Sc=!1;function Mf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sc||pr==null||pr!==Ll(i)||(i=pr,"selectionStart"in i&&Dh(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fs&&Hs(Fs,i)||(Fs=i,i=Nl(Cc,"onSelect"),0<i.length&&(e=new Mh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=pr)))}function $o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mr={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},pu={},Im={};Tn&&(Im=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function ya(t){if(pu[t])return pu[t];if(!mr[t])return t;var e=mr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Im)return pu[t]=e[n];return t}var Lm=ya("animationend"),Pm=ya("animationiteration"),km=ya("animationstart"),Mm=ya("transitionend"),Am=new Map,Af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(t,e){Am.set(t,e),Bi(e,[t])}for(var mu=0;mu<Af.length;mu++){var _u=Af[mu],l1=_u.toLowerCase(),a1=_u[0].toUpperCase()+_u.slice(1);di(l1,"on"+a1)}di(Lm,"onAnimationEnd");di(Pm,"onAnimationIteration");di(km,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(Mm,"onTransitionEnd");jr("onMouseEnter",["mouseout","mouseover"]);jr("onMouseLeave",["mouseout","mouseover"]);jr("onPointerEnter",["pointerout","pointerover"]);jr("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Of(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,lv(i,e,void 0,t),t.currentTarget=null}function Om(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&r.isPropagationStopped())break e;Of(r,l,u),s=a}else for(o=0;o<i.length;o++){if(l=i[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&r.isPropagationStopped())break e;Of(r,l,u),s=a}}}if(kl)throw t=vc,kl=!1,vc=null,t}function ue(t,e){var n=e[Pc];n===void 0&&(n=e[Pc]=new Set);var i=t+"__bubble";n.has(i)||(Dm(e,t,2,!1),n.add(i))}function yu(t,e,n){var i=0;e&&(i|=4),Dm(n,t,i,e)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function qs(t){if(!t[Zo]){t[Zo]=!0,Wp.forEach(function(n){n!=="selectionchange"&&(u1.has(n)||yu(n,!1,t),yu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zo]||(e[Zo]=!0,yu("selectionchange",!1,e))}}function Dm(t,e,n,i){switch(_m(e)){case 1:var r=Cv;break;case 4:r=Sv;break;default:r=Ph}n=r.bind(null,e,n,t),r=void 0,!yc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function vu(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Ti(l),o===null)return;if(a=o.tag,a===5||a===6){i=s=o;continue e}l=l.parentNode}}i=i.return}im(function(){var u=s,c=Rh(n),h=[];e:{var d=Am.get(t);if(d!==void 0){var f=Mh,m=t;switch(t){case"keypress":if(vl(n)===0)break e;case"keydown":case"keyup":f=jv;break;case"focusin":m="focus",f=du;break;case"focusout":m="blur",f=du;break;case"beforeblur":case"afterblur":f=du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Iv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Uv;break;case Lm:case Pm:case km:f=kv;break;case Mm:f=Bv;break;case"scroll":f=Rv;break;case"wheel":f=Vv;break;case"copy":case"cut":case"paste":f=Av;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Cf}var _=(e&4)!==0,v=!_&&t==="scroll",p=_?d!==null?d+"Capture":null:d;_=[];for(var g=u,y;g!==null;){y=g;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,p!==null&&(x=Ys(g,p),x!=null&&_.push(Qs(g,x,y)))),v)break;g=g.return}0<_.length&&(d=new f(d,m,null,n,c),h.push({event:d,listeners:_}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==mc&&(m=n.relatedTarget||n.fromElement)&&(Ti(m)||m[In]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=u,m=m?Ti(m):null,m!==null&&(v=Yi(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(_=Ef,x="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(_=Cf,x="onPointerLeave",p="onPointerEnter",g="pointer"),v=f==null?d:_r(f),y=m==null?d:_r(m),d=new _(x,g+"leave",f,n,c),d.target=v,d.relatedTarget=y,x=null,Ti(c)===u&&(_=new _(p,g+"enter",m,n,c),_.target=y,_.relatedTarget=v,x=_),v=x,f&&m)t:{for(_=f,p=m,g=0,y=_;y;y=er(y))g++;for(y=0,x=p;x;x=er(x))y++;for(;0<g-y;)_=er(_),g--;for(;0<y-g;)p=er(p),y--;for(;g--;){if(_===p||p!==null&&_===p.alternate)break t;_=er(_),p=er(p)}_=null}else _=null;f!==null&&Df(h,d,f,_,!1),m!==null&&v!==null&&Df(h,v,m,_,!0)}}e:{if(d=u?_r(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=Jv;else if(Tf(d))if(Cm)E=i1;else{E=t1;var w=e1}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=n1);if(E&&(E=E(t,u))){wm(h,E,n,c);break e}w&&w(t,d,u),t==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&hc(d,"number",d.value)}switch(w=u?_r(u):window,t){case"focusin":(Tf(w)||w.contentEditable==="true")&&(pr=w,Cc=u,Fs=null);break;case"focusout":Fs=Cc=pr=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,Mf(h,n,c);break;case"selectionchange":if(o1)break;case"keydown":case"keyup":Mf(h,n,c)}var S;if(Oh)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else gr?xm(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(vm&&n.locale!=="ko"&&(gr||R!=="onCompositionStart"?R==="onCompositionEnd"&&gr&&(S=ym()):(Vn=c,kh="value"in Vn?Vn.value:Vn.textContent,gr=!0)),w=Nl(u,R),0<w.length&&(R=new wf(R,t,null,n,c),h.push({event:R,listeners:w}),S?R.data=S:(S=Em(n),S!==null&&(R.data=S)))),(S=$v?Zv(t,n):Hv(t,n))&&(u=Nl(u,"onBeforeInput"),0<u.length&&(c=new wf("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=S))}Om(h,e)})}function Qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nl(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ys(t,n),s!=null&&i.unshift(Qs(t,s,r)),s=Ys(t,e),s!=null&&i.push(Qs(t,s,r))),t=t.return}return i}function er(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Df(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===i)break;l.tag===5&&u!==null&&(l=u,r?(a=Ys(n,s),a!=null&&o.unshift(Qs(n,a,l))):r||(a=Ys(n,s),a!=null&&o.push(Qs(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var c1=/\r\n?/g,h1=/\u0000|\uFFFD/g;function Nf(t){return(typeof t=="string"?t:""+t).replace(c1,`
`).replace(h1,"")}function Ho(t,e,n){if(e=Nf(e),Nf(t)!==e&&n)throw Error(M(425))}function Fl(){}var Rc=null,Tc=null;function Ic(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lc=typeof setTimeout=="function"?setTimeout:void 0,d1=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,f1=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(t){return Ff.resolve(null).then(t).catch(g1)}:Lc;function g1(t){setTimeout(function(){throw t})}function xu(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),$s(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);$s(e)}function ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ts=Math.random().toString(36).slice(2),tn="__reactFiber$"+ts,Js="__reactProps$"+ts,In="__reactContainer$"+ts,Pc="__reactEvents$"+ts,p1="__reactListeners$"+ts,m1="__reactHandles$"+ts;function Ti(t){var e=t[tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zf(t);t!==null;){if(n=t[tn])return n;t=zf(t)}return e}t=n,n=t.parentNode}return null}function So(t){return t=t[tn]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _r(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function va(t){return t[Js]||null}var kc=[],yr=-1;function fi(t){return{current:t}}function ce(t){0>yr||(t.current=kc[yr],kc[yr]=null,yr--)}function le(t,e){yr++,kc[yr]=t.current,t.current=e}var ci={},Ke=fi(ci),at=fi(!1),Fi=ci;function Gr(t,e){var n=t.type.contextTypes;if(!n)return ci;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ut(t){return t=t.childContextTypes,t!=null}function zl(){ce(at),ce(Ke)}function bf(t,e,n){if(Ke.current!==ci)throw Error(M(168));le(Ke,e),le(at,n)}function Nm(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(M(108,ev(t)||"Unknown",r));return _e({},n,i)}function bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,Fi=Ke.current,le(Ke,t),le(at,at.current),!0}function jf(t,e,n){var i=t.stateNode;if(!i)throw Error(M(169));n?(t=Nm(t,e,Fi),i.__reactInternalMemoizedMergedChildContext=t,ce(at),ce(Ke),le(Ke,t)):ce(at),le(at,n)}var yn=null,xa=!1,Eu=!1;function Fm(t){yn===null?yn=[t]:yn.push(t)}function _1(t){xa=!0,Fm(t)}function gi(){if(!Eu&&yn!==null){Eu=!0;var t=0,e=oe;try{var n=yn;for(oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}yn=null,xa=!1}catch(r){throw yn!==null&&(yn=yn.slice(t+1)),lm(Th,gi),r}finally{oe=e,Eu=!1}}return null}var vr=[],xr=0,jl=null,Gl=0,Rt=[],Tt=0,zi=null,xn=1,En="";function wi(t,e){vr[xr++]=Gl,vr[xr++]=jl,jl=t,Gl=e}function zm(t,e,n){Rt[Tt++]=xn,Rt[Tt++]=En,Rt[Tt++]=zi,zi=t;var i=xn;t=En;var r=32-Bt(i)-1;i&=~(1<<r),n+=1;var s=32-Bt(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,xn=1<<32-Bt(e)+r|n<<r|i,En=s+t}else xn=1<<s|n<<r|i,En=t}function Nh(t){t.return!==null&&(wi(t,1),zm(t,1,0))}function Fh(t){for(;t===jl;)jl=vr[--xr],vr[xr]=null,Gl=vr[--xr],vr[xr]=null;for(;t===zi;)zi=Rt[--Tt],Rt[Tt]=null,En=Rt[--Tt],Rt[Tt]=null,xn=Rt[--Tt],Rt[Tt]=null}var mt=null,pt=null,de=!1,Wt=null;function bm(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mt=t,pt=ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mt=t,pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zi!==null?{id:xn,overflow:En}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mt=t,pt=null,!0):!1;default:return!1}}function Mc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ac(t){if(de){var e=pt;if(e){var n=e;if(!Gf(t,e)){if(Mc(t))throw Error(M(418));e=ei(n.nextSibling);var i=mt;e&&Gf(t,e)?bm(i,n):(t.flags=t.flags&-4097|2,de=!1,mt=t)}}else{if(Mc(t))throw Error(M(418));t.flags=t.flags&-4097|2,de=!1,mt=t}}}function Wf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mt=t}function qo(t){if(t!==mt)return!1;if(!de)return Wf(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ic(t.type,t.memoizedProps)),e&&(e=pt)){if(Mc(t))throw jm(),Error(M(418));for(;e;)bm(t,e),e=ei(e.nextSibling)}if(Wf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pt=ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pt=null}}else pt=mt?ei(t.stateNode.nextSibling):null;return!0}function jm(){for(var t=pt;t;)t=ei(t.nextSibling)}function Wr(){pt=mt=null,de=!1}function zh(t){Wt===null?Wt=[t]:Wt.push(t)}var y1=Mn.ReactCurrentBatchConfig;function ps(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var i=n.stateNode}if(!i)throw Error(M(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Qo(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uf(t){var e=t._init;return e(t._payload)}function Gm(t){function e(p,g){if(t){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function i(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function r(p,g){return p=ri(p,g),p.index=0,p.sibling=null,p}function s(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,g,y,x){return g===null||g.tag!==6?(g=Lu(y,p.mode,x),g.return=p,g):(g=r(g,y),g.return=p,g)}function a(p,g,y,x){var E=y.type;return E===fr?c(p,g,y.props.children,x,y.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Wn&&Uf(E)===g.type)?(x=r(g,y.props),x.ref=ps(p,g,y),x.return=p,x):(x=Tl(y.type,y.key,y.props,null,p.mode,x),x.ref=ps(p,g,y),x.return=p,x)}function u(p,g,y,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Pu(y,p.mode,x),g.return=p,g):(g=r(g,y.children||[]),g.return=p,g)}function c(p,g,y,x,E){return g===null||g.tag!==7?(g=Di(y,p.mode,x,E),g.return=p,g):(g=r(g,y),g.return=p,g)}function h(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Lu(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Wo:return y=Tl(g.type,g.key,g.props,null,p.mode,y),y.ref=ps(p,null,g),y.return=p,y;case dr:return g=Pu(g,p.mode,y),g.return=p,g;case Wn:var x=g._init;return h(p,x(g._payload),y)}if(Cs(g)||cs(g))return g=Di(g,p.mode,y,null),g.return=p,g;Qo(p,g)}return null}function d(p,g,y,x){var E=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(p,g,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wo:return y.key===E?a(p,g,y,x):null;case dr:return y.key===E?u(p,g,y,x):null;case Wn:return E=y._init,d(p,g,E(y._payload),x)}if(Cs(y)||cs(y))return E!==null?null:c(p,g,y,x,null);Qo(p,y)}return null}function f(p,g,y,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(y)||null,l(g,p,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wo:return p=p.get(x.key===null?y:x.key)||null,a(g,p,x,E);case dr:return p=p.get(x.key===null?y:x.key)||null,u(g,p,x,E);case Wn:var w=x._init;return f(p,g,y,w(x._payload),E)}if(Cs(x)||cs(x))return p=p.get(y)||null,c(g,p,x,E,null);Qo(g,x)}return null}function m(p,g,y,x){for(var E=null,w=null,S=g,R=g=0,L=null;S!==null&&R<y.length;R++){S.index>R?(L=S,S=null):L=S.sibling;var k=d(p,S,y[R],x);if(k===null){S===null&&(S=L);break}t&&S&&k.alternate===null&&e(p,S),g=s(k,g,R),w===null?E=k:w.sibling=k,w=k,S=L}if(R===y.length)return n(p,S),de&&wi(p,R),E;if(S===null){for(;R<y.length;R++)S=h(p,y[R],x),S!==null&&(g=s(S,g,R),w===null?E=S:w.sibling=S,w=S);return de&&wi(p,R),E}for(S=i(p,S);R<y.length;R++)L=f(S,p,R,y[R],x),L!==null&&(t&&L.alternate!==null&&S.delete(L.key===null?R:L.key),g=s(L,g,R),w===null?E=L:w.sibling=L,w=L);return t&&S.forEach(function(z){return e(p,z)}),de&&wi(p,R),E}function _(p,g,y,x){var E=cs(y);if(typeof E!="function")throw Error(M(150));if(y=E.call(y),y==null)throw Error(M(151));for(var w=E=null,S=g,R=g=0,L=null,k=y.next();S!==null&&!k.done;R++,k=y.next()){S.index>R?(L=S,S=null):L=S.sibling;var z=d(p,S,k.value,x);if(z===null){S===null&&(S=L);break}t&&S&&z.alternate===null&&e(p,S),g=s(z,g,R),w===null?E=z:w.sibling=z,w=z,S=L}if(k.done)return n(p,S),de&&wi(p,R),E;if(S===null){for(;!k.done;R++,k=y.next())k=h(p,k.value,x),k!==null&&(g=s(k,g,R),w===null?E=k:w.sibling=k,w=k);return de&&wi(p,R),E}for(S=i(p,S);!k.done;R++,k=y.next())k=f(S,p,R,k.value,x),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?R:k.key),g=s(k,g,R),w===null?E=k:w.sibling=k,w=k);return t&&S.forEach(function(b){return e(p,b)}),de&&wi(p,R),E}function v(p,g,y,x){if(typeof y=="object"&&y!==null&&y.type===fr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Wo:e:{for(var E=y.key,w=g;w!==null;){if(w.key===E){if(E=y.type,E===fr){if(w.tag===7){n(p,w.sibling),g=r(w,y.props.children),g.return=p,p=g;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Wn&&Uf(E)===w.type){n(p,w.sibling),g=r(w,y.props),g.ref=ps(p,w,y),g.return=p,p=g;break e}n(p,w);break}else e(p,w);w=w.sibling}y.type===fr?(g=Di(y.props.children,p.mode,x,y.key),g.return=p,p=g):(x=Tl(y.type,y.key,y.props,null,p.mode,x),x.ref=ps(p,g,y),x.return=p,p=x)}return o(p);case dr:e:{for(w=y.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),g=r(g,y.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Pu(y,p.mode,x),g.return=p,p=g}return o(p);case Wn:return w=y._init,v(p,g,w(y._payload),x)}if(Cs(y))return m(p,g,y,x);if(cs(y))return _(p,g,y,x);Qo(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),g=r(g,y),g.return=p,p=g):(n(p,g),g=Lu(y,p.mode,x),g.return=p,p=g),o(p)):n(p,g)}return v}var Ur=Gm(!0),Wm=Gm(!1),Wl=fi(null),Ul=null,Er=null,bh=null;function jh(){bh=Er=Ul=null}function Gh(t){var e=Wl.current;ce(Wl),t._currentValue=e}function Oc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ar(t,e){Ul=t,bh=Er=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ot=!0),t.firstContext=null)}function Ot(t){var e=t._currentValue;if(bh!==t)if(t={context:t,memoizedValue:e,next:null},Er===null){if(Ul===null)throw Error(M(308));Er=t,Ul.dependencies={lanes:0,firstContext:t}}else Er=Er.next=t;return e}var Ii=null;function Wh(t){Ii===null?Ii=[t]:Ii.push(t)}function Um(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Wh(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ln(t,i)}function Ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Un=!1;function Uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ti(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,J&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ln(t,n)}return r=i.interleaved,r===null?(e.next=e,Wh(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ln(t,n)}function xl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ih(t,n)}}function Xf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xl(t,e,n,i){var r=t.updateQueue;Un=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=r.baseState;o=0,c=u=a=null,l=s;do{var d=l.lane,f=l.eventTime;if((i&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,_=l;switch(d=e,f=n,_.tag){case 1:if(m=_.payload,typeof m=="function"){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=_.payload,d=typeof m=="function"?m.call(f,h,d):m,d==null)break e;h=_e({},h,d);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[l]:d.push(l))}else f={eventTime:f,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=f,a=h):c=c.next=f,o|=d;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;d=l,l=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(c===null&&(a=h),r.baseState=a,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ji|=o,t.lanes=o,t.memoizedState=h}}function Bf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(M(191,r));r.call(i)}}}var Ro={},an=fi(Ro),eo=fi(Ro),to=fi(Ro);function Li(t){if(t===Ro)throw Error(M(174));return t}function Xh(t,e){switch(le(to,e),le(eo,t),le(an,Ro),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fc(e,t)}ce(an),le(an,e)}function Xr(){ce(an),ce(eo),ce(to)}function Bm(t){Li(to.current);var e=Li(an.current),n=fc(e,t.type);e!==n&&(le(eo,t),le(an,n))}function Bh(t){eo.current===t&&(ce(an),ce(eo))}var ge=fi(0);function Bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wu=[];function Yh(){for(var t=0;t<wu.length;t++)wu[t]._workInProgressVersionPrimary=null;wu.length=0}var El=Mn.ReactCurrentDispatcher,Cu=Mn.ReactCurrentBatchConfig,bi=0,me=null,Le=null,Oe=null,Yl=!1,zs=!1,no=0,v1=0;function Ge(){throw Error(M(321))}function Vh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kt(t[n],e[n]))return!1;return!0}function Kh(t,e,n,i,r,s){if(bi=s,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,El.current=t===null||t.memoizedState===null?C1:S1,t=n(i,r),zs){s=0;do{if(zs=!1,no=0,25<=s)throw Error(M(301));s+=1,Oe=Le=null,e.updateQueue=null,El.current=R1,t=n(i,r)}while(zs)}if(El.current=Vl,e=Le!==null&&Le.next!==null,bi=0,Oe=Le=me=null,Yl=!1,e)throw Error(M(300));return t}function $h(){var t=no!==0;return no=0,t}function en(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?me.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function Dt(){if(Le===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Oe===null?me.memoizedState:Oe.next;if(e!==null)Oe=e,Le=t;else{if(t===null)throw Error(M(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Oe===null?me.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function io(t,e){return typeof e=="function"?e(t):e}function Su(t){var e=Dt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var i=Le,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((bi&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=h,o=i):a=a.next=h,me.lanes|=c,ji|=c}u=u.next}while(u!==null&&u!==s);a===null?o=i:a.next=l,Kt(i,e.memoizedState)||(ot=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=a,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,me.lanes|=s,ji|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ru(t){var e=Dt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Kt(s,e.memoizedState)||(ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Ym(){}function Vm(t,e){var n=me,i=Dt(),r=e(),s=!Kt(i.memoizedState,r);if(s&&(i.memoizedState=r,ot=!0),i=i.queue,Zh(Zm.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,ro(9,$m.bind(null,n,i,r,e),void 0,null),Ne===null)throw Error(M(349));bi&30||Km(n,e,r)}return r}function Km(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $m(t,e,n,i){e.value=n,e.getSnapshot=i,Hm(e)&&qm(t)}function Zm(t,e,n){return n(function(){Hm(e)&&qm(t)})}function Hm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kt(t,n)}catch{return!0}}function qm(t){var e=Ln(t,1);e!==null&&Yt(e,t,1,-1)}function Yf(t){var e=en();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},e.queue=t,t=t.dispatch=w1.bind(null,me,t),[e.memoizedState,t]}function ro(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Qm(){return Dt().memoizedState}function wl(t,e,n,i){var r=en();me.flags|=t,r.memoizedState=ro(1|e,n,void 0,i===void 0?null:i)}function Ea(t,e,n,i){var r=Dt();i=i===void 0?null:i;var s=void 0;if(Le!==null){var o=Le.memoizedState;if(s=o.destroy,i!==null&&Vh(i,o.deps)){r.memoizedState=ro(e,n,s,i);return}}me.flags|=t,r.memoizedState=ro(1|e,n,s,i)}function Vf(t,e){return wl(8390656,8,t,e)}function Zh(t,e){return Ea(2048,8,t,e)}function Jm(t,e){return Ea(4,2,t,e)}function e_(t,e){return Ea(4,4,t,e)}function t_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function n_(t,e,n){return n=n!=null?n.concat([t]):null,Ea(4,4,t_.bind(null,e,t),n)}function Hh(){}function i_(t,e){var n=Dt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Vh(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function r_(t,e){var n=Dt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Vh(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function s_(t,e,n){return bi&21?(Kt(n,e)||(n=cm(),me.lanes|=n,ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=n)}function x1(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var i=Cu.transition;Cu.transition={};try{t(!1),e()}finally{oe=n,Cu.transition=i}}function o_(){return Dt().memoizedState}function E1(t,e,n){var i=ii(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},l_(t))a_(e,n);else if(n=Um(t,e,n,i),n!==null){var r=qe();Yt(n,t,i,r),u_(n,e,i)}}function w1(t,e,n){var i=ii(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(l_(t))a_(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,Kt(l,o)){var a=e.interleaved;a===null?(r.next=r,Wh(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}n=Um(t,e,r,i),n!==null&&(r=qe(),Yt(n,t,i,r),u_(n,e,i))}}function l_(t){var e=t.alternate;return t===me||e!==null&&e===me}function a_(t,e){zs=Yl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function u_(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ih(t,n)}}var Vl={readContext:Ot,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},C1={readContext:Ot,useCallback:function(t,e){return en().memoizedState=[t,e===void 0?null:e],t},useContext:Ot,useEffect:Vf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wl(4194308,4,t_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wl(4194308,4,t,e)},useInsertionEffect:function(t,e){return wl(4,2,t,e)},useMemo:function(t,e){var n=en();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=en();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=E1.bind(null,me,t),[i.memoizedState,t]},useRef:function(t){var e=en();return t={current:t},e.memoizedState=t},useState:Yf,useDebugValue:Hh,useDeferredValue:function(t){return en().memoizedState=t},useTransition:function(){var t=Yf(!1),e=t[0];return t=x1.bind(null,t[1]),en().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=me,r=en();if(de){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Ne===null)throw Error(M(349));bi&30||Km(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Vf(Zm.bind(null,i,s,t),[t]),i.flags|=2048,ro(9,$m.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=en(),e=Ne.identifierPrefix;if(de){var n=En,i=xn;n=(i&~(1<<32-Bt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=no++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=v1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},S1={readContext:Ot,useCallback:i_,useContext:Ot,useEffect:Zh,useImperativeHandle:n_,useInsertionEffect:Jm,useLayoutEffect:e_,useMemo:r_,useReducer:Su,useRef:Qm,useState:function(){return Su(io)},useDebugValue:Hh,useDeferredValue:function(t){var e=Dt();return s_(e,Le.memoizedState,t)},useTransition:function(){var t=Su(io)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Ym,useSyncExternalStore:Vm,useId:o_,unstable_isNewReconciler:!1},R1={readContext:Ot,useCallback:i_,useContext:Ot,useEffect:Zh,useImperativeHandle:n_,useInsertionEffect:Jm,useLayoutEffect:e_,useMemo:r_,useReducer:Ru,useRef:Qm,useState:function(){return Ru(io)},useDebugValue:Hh,useDeferredValue:function(t){var e=Dt();return Le===null?e.memoizedState=t:s_(e,Le.memoizedState,t)},useTransition:function(){var t=Ru(io)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Ym,useSyncExternalStore:Vm,useId:o_,unstable_isNewReconciler:!1};function jt(t,e){if(t&&t.defaultProps){e=_e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:_e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wa={isMounted:function(t){return(t=t._reactInternals)?Yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qe(),r=ii(t),s=wn(i,r);s.payload=e,n!=null&&(s.callback=n),e=ti(t,s,r),e!==null&&(Yt(e,t,r,i),xl(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qe(),r=ii(t),s=wn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ti(t,s,r),e!==null&&(Yt(e,t,r,i),xl(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qe(),i=ii(t),r=wn(n,i);r.tag=2,e!=null&&(r.callback=e),e=ti(t,r,i),e!==null&&(Yt(e,t,i,n),xl(e,t,i))}};function Kf(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Hs(n,i)||!Hs(r,s):!0}function c_(t,e,n){var i=!1,r=ci,s=e.contextType;return typeof s=="object"&&s!==null?s=Ot(s):(r=ut(e)?Fi:Ke.current,i=e.contextTypes,s=(i=i!=null)?Gr(t,r):ci),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wa,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function $f(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&wa.enqueueReplaceState(e,e.state,null)}function Nc(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Uh(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ot(s):(s=ut(e)?Fi:Ke.current,r.context=Gr(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dc(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&wa.enqueueReplaceState(r,r.state,null),Xl(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Br(t,e){try{var n="",i=e;do n+=Jy(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Tu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var T1=typeof WeakMap=="function"?WeakMap:Map;function h_(t,e,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){$l||($l=!0,Vc=i),Fc(t,e)},n}function d_(t,e,n){n=wn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Fc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fc(t,e),typeof i!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new T1;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=G1.bind(null,t,e,n),e.then(t,t))}function Hf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qf(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wn(-1,1),e.tag=2,ti(n,e,1))),n.lanes|=1),t)}var I1=Mn.ReactCurrentOwner,ot=!1;function Ze(t,e,n,i){e.child=t===null?Wm(e,null,n,i):Ur(e,t.child,n,i)}function Qf(t,e,n,i,r){n=n.render;var s=e.ref;return Ar(e,r),i=Kh(t,e,n,i,s,r),n=$h(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Pn(t,e,r)):(de&&n&&Nh(e),e.flags|=1,Ze(t,e,i,r),e.child)}function Jf(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!rd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,f_(t,e,s,i,r)):(t=Tl(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Hs,n(o,i)&&t.ref===e.ref)return Pn(t,e,r)}return e.flags|=1,t=ri(s,i),t.ref=e.ref,t.return=e,e.child=t}function f_(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Hs(s,i)&&t.ref===e.ref)if(ot=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,Pn(t,e,r)}return zc(t,e,n,i,r)}function g_(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(Cr,ft),ft|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(Cr,ft),ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,le(Cr,ft),ft|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,le(Cr,ft),ft|=i;return Ze(t,e,r,n),e.child}function p_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zc(t,e,n,i,r){var s=ut(n)?Fi:Ke.current;return s=Gr(e,s),Ar(e,r),n=Kh(t,e,n,i,s,r),i=$h(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Pn(t,e,r)):(de&&i&&Nh(e),e.flags|=1,Ze(t,e,n,r),e.child)}function eg(t,e,n,i,r){if(ut(n)){var s=!0;bl(e)}else s=!1;if(Ar(e,r),e.stateNode===null)Cl(t,e),c_(e,n,i),Nc(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=ut(n)?Fi:Ke.current,u=Gr(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||a!==u)&&$f(e,o,i,u),Un=!1;var d=e.memoizedState;o.state=d,Xl(e,i,o,r),a=e.memoizedState,l!==i||d!==a||at.current||Un?(typeof c=="function"&&(Dc(e,n,c,i),a=e.memoizedState),(l=Un||Kf(e,n,l,i,d,a,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Xm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:jt(e.type,l),o.props=u,h=e.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ot(a):(a=ut(n)?Fi:Ke.current,a=Gr(e,a));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||d!==a)&&$f(e,o,i,a),Un=!1,d=e.memoizedState,o.state=d,Xl(e,i,o,r);var m=e.memoizedState;l!==h||d!==m||at.current||Un?(typeof f=="function"&&(Dc(e,n,f,i),m=e.memoizedState),(u=Un||Kf(e,n,u,i,d,m,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=a,i=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return bc(t,e,n,i,s,r)}function bc(t,e,n,i,r,s){p_(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&jf(e,n,!1),Pn(t,e,s);i=e.stateNode,I1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ur(e,t.child,null,s),e.child=Ur(e,null,l,s)):Ze(t,e,l,s),e.memoizedState=i.state,r&&jf(e,n,!0),e.child}function m_(t){var e=t.stateNode;e.pendingContext?bf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bf(t,e.context,!1),Xh(t,e.containerInfo)}function tg(t,e,n,i,r){return Wr(),zh(r),e.flags|=256,Ze(t,e,n,i),e.child}var jc={dehydrated:null,treeContext:null,retryLane:0};function Gc(t){return{baseLanes:t,cachePool:null,transitions:null}}function __(t,e,n){var i=e.pendingProps,r=ge.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),le(ge,r&1),t===null)return Ac(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ra(o,i,0,null),t=Di(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Gc(n),e.memoizedState=jc,t):qh(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return L1(t,e,o,i,l,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,l=r.sibling;var a={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=ri(r,a),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=ri(l,s):(s=Di(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Gc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=jc,i}return s=t.child,t=s.sibling,i=ri(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function qh(t,e){return e=Ra({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jo(t,e,n,i){return i!==null&&zh(i),Ur(e,t.child,null,n),t=qh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L1(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Tu(Error(M(422))),Jo(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ra({mode:"visible",children:i.children},r,0,null),s=Di(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ur(e,t.child,null,o),e.child.memoizedState=Gc(o),e.memoizedState=jc,s);if(!(e.mode&1))return Jo(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(M(419)),i=Tu(s,i,void 0),Jo(t,e,o,i)}if(l=(o&t.childLanes)!==0,ot||l){if(i=Ne,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ln(t,r),Yt(i,t,r,-1))}return id(),i=Tu(Error(M(421))),Jo(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=W1.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,pt=ei(r.nextSibling),mt=e,de=!0,Wt=null,t!==null&&(Rt[Tt++]=xn,Rt[Tt++]=En,Rt[Tt++]=zi,xn=t.id,En=t.overflow,zi=e),e=qh(e,i.children),e.flags|=4096,e)}function ng(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Oc(t.return,e,n)}function Iu(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function y_(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ze(t,e,i.children,n),i=ge.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ng(t,n,e);else if(t.tag===19)ng(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(le(ge,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Bl(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Iu(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Bl(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Iu(e,!0,n,null,s);break;case"together":Iu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function P1(t,e,n){switch(e.tag){case 3:m_(e),Wr();break;case 5:Bm(e);break;case 1:ut(e.type)&&bl(e);break;case 4:Xh(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;le(Wl,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(le(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?__(t,e,n):(le(ge,ge.current&1),t=Pn(t,e,n),t!==null?t.sibling:null);le(ge,ge.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return y_(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),le(ge,ge.current),i)break;return null;case 22:case 23:return e.lanes=0,g_(t,e,n)}return Pn(t,e,n)}var v_,Wc,x_,E_;v_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wc=function(){};x_=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Li(an.current);var s=null;switch(n){case"input":r=uc(t,r),i=uc(t,i),s=[];break;case"select":r=_e({},r,{value:void 0}),i=_e({},i,{value:void 0}),s=[];break;case"textarea":r=dc(t,r),i=dc(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Fl)}gc(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xs.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var a=i[u];if(l=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xs.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ue("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};E_=function(t,e,n,i){n!==i&&(e.flags|=4)};function ms(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function k1(t,e,n){var i=e.pendingProps;switch(Fh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return ut(e.type)&&zl(),We(e),null;case 3:return i=e.stateNode,Xr(),ce(at),ce(Ke),Yh(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(qo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wt!==null&&(Zc(Wt),Wt=null))),Wc(t,e),We(e),null;case 5:Bh(e);var r=Li(to.current);if(n=e.type,t!==null&&e.stateNode!=null)x_(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(M(166));return We(e),null}if(t=Li(an.current),qo(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[tn]=e,i[Js]=s,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",i),ue("close",i);break;case"iframe":case"object":case"embed":ue("load",i);break;case"video":case"audio":for(r=0;r<Rs.length;r++)ue(Rs[r],i);break;case"source":ue("error",i);break;case"img":case"image":case"link":ue("error",i),ue("load",i);break;case"details":ue("toggle",i);break;case"input":hf(i,s),ue("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ue("invalid",i);break;case"textarea":ff(i,s),ue("invalid",i)}gc(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ho(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ho(i.textContent,l,t),r=["children",""+l]):Xs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ue("scroll",i)}switch(n){case"input":Uo(i),df(i,s,!0);break;case"textarea":Uo(i),gf(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Fl)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[tn]=e,t[Js]=i,v_(t,e,!1,!1),e.stateNode=t;e:{switch(o=pc(n,i),n){case"dialog":ue("cancel",t),ue("close",t),r=i;break;case"iframe":case"object":case"embed":ue("load",t),r=i;break;case"video":case"audio":for(r=0;r<Rs.length;r++)ue(Rs[r],t);r=i;break;case"source":ue("error",t),r=i;break;case"img":case"image":case"link":ue("error",t),ue("load",t),r=i;break;case"details":ue("toggle",t),r=i;break;case"input":hf(t,i),r=uc(t,i),ue("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=_e({},i,{value:void 0}),ue("invalid",t);break;case"textarea":ff(t,i),r=dc(t,i),ue("invalid",t);break;default:r=i}gc(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Qp(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Hp(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Bs(t,a):typeof a=="number"&&Bs(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xs.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ue("scroll",t):a!=null&&Eh(t,s,a,o))}switch(n){case"input":Uo(t),df(t,i,!1);break;case"textarea":Uo(t),gf(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ui(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Lr(t,!!i.multiple,s,!1):i.defaultValue!=null&&Lr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)E_(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(M(166));if(n=Li(to.current),Li(an.current),qo(e)){if(i=e.stateNode,n=e.memoizedProps,i[tn]=e,(s=i.nodeValue!==n)&&(t=mt,t!==null))switch(t.tag){case 3:Ho(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ho(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[tn]=e,e.stateNode=i}return We(e),null;case 13:if(ce(ge),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&pt!==null&&e.mode&1&&!(e.flags&128))jm(),Wr(),e.flags|=98560,s=!1;else if(s=qo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[tn]=e}else Wr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),s=!1}else Wt!==null&&(Zc(Wt),Wt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Pe===0&&(Pe=3):id())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return Xr(),Wc(t,e),t===null&&qs(e.stateNode.containerInfo),We(e),null;case 10:return Gh(e.type._context),We(e),null;case 17:return ut(e.type)&&zl(),We(e),null;case 19:if(ce(ge),s=e.memoizedState,s===null)return We(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ms(s,!1);else{if(Pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bl(t),o!==null){for(e.flags|=128,ms(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(ge,ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&Se()>Yr&&(e.flags|=128,i=!0,ms(s,!1),e.lanes=4194304)}else{if(!i)if(t=Bl(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ms(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!de)return We(e),null}else 2*Se()-s.renderingStartTime>Yr&&n!==1073741824&&(e.flags|=128,i=!0,ms(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Se(),e.sibling=null,n=ge.current,le(ge,i?n&1|2:n&1),e):(We(e),null);case 22:case 23:return nd(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ft&1073741824&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function M1(t,e){switch(Fh(e),e.tag){case 1:return ut(e.type)&&zl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xr(),ce(at),ce(Ke),Yh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(ce(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Wr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(ge),null;case 4:return Xr(),null;case 10:return Gh(e.type._context),null;case 22:case 23:return nd(),null;case 24:return null;default:return null}}var el=!1,Ye=!1,A1=typeof WeakSet=="function"?WeakSet:Set,F=null;function wr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){xe(t,e,i)}else n.current=null}function Uc(t,e,n){try{n()}catch(i){xe(t,e,i)}}var ig=!1;function O1(t,e){if(Rc=Ol,t=Tm(),Dh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||r!==0&&h.nodeType!==3||(l=o+r),h!==s||i!==0&&h.nodeType!==3||(a=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===r&&(l=o),d===s&&++c===i&&(a=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tc={focusedElem:t,selectionRange:n},Ol=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var _=m.memoizedProps,v=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?_:jt(e.type,_),v);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(x){xe(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return m=ig,ig=!1,m}function bs(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Uc(e,n,s)}r=r.next}while(r!==i)}}function Ca(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Xc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function w_(t){var e=t.alternate;e!==null&&(t.alternate=null,w_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tn],delete e[Js],delete e[Pc],delete e[p1],delete e[m1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function C_(t){return t.tag===5||t.tag===3||t.tag===4}function rg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||C_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fl));else if(i!==4&&(t=t.child,t!==null))for(Bc(t,e,n),t=t.sibling;t!==null;)Bc(t,e,n),t=t.sibling}function Yc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Yc(t,e,n),t=t.sibling;t!==null;)Yc(t,e,n),t=t.sibling}var Fe=null,Gt=!1;function Dn(t,e,n){for(n=n.child;n!==null;)S_(t,e,n),n=n.sibling}function S_(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(pa,n)}catch{}switch(n.tag){case 5:Ye||wr(n,e);case 6:var i=Fe,r=Gt;Fe=null,Dn(t,e,n),Fe=i,Gt=r,Fe!==null&&(Gt?(t=Fe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(Gt?(t=Fe,n=n.stateNode,t.nodeType===8?xu(t.parentNode,n):t.nodeType===1&&xu(t,n),$s(t)):xu(Fe,n.stateNode));break;case 4:i=Fe,r=Gt,Fe=n.stateNode.containerInfo,Gt=!0,Dn(t,e,n),Fe=i,Gt=r;break;case 0:case 11:case 14:case 15:if(!Ye&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Uc(n,e,o),r=r.next}while(r!==i)}Dn(t,e,n);break;case 1:if(!Ye&&(wr(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){xe(n,e,l)}Dn(t,e,n);break;case 21:Dn(t,e,n);break;case 22:n.mode&1?(Ye=(i=Ye)||n.memoizedState!==null,Dn(t,e,n),Ye=i):Dn(t,e,n);break;default:Dn(t,e,n)}}function sg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new A1),e.forEach(function(i){var r=U1.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function zt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Fe=l.stateNode,Gt=!1;break e;case 3:Fe=l.stateNode.containerInfo,Gt=!0;break e;case 4:Fe=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(Fe===null)throw Error(M(160));S_(s,o,r),Fe=null,Gt=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(u){xe(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R_(e,t),e=e.sibling}function R_(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zt(e,t),Jt(t),i&4){try{bs(3,t,t.return),Ca(3,t)}catch(_){xe(t,t.return,_)}try{bs(5,t,t.return)}catch(_){xe(t,t.return,_)}}break;case 1:zt(e,t),Jt(t),i&512&&n!==null&&wr(n,n.return);break;case 5:if(zt(e,t),Jt(t),i&512&&n!==null&&wr(n,n.return),t.flags&32){var r=t.stateNode;try{Bs(r,"")}catch(_){xe(t,t.return,_)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Kp(r,s),pc(l,o);var u=pc(l,s);for(o=0;o<a.length;o+=2){var c=a[o],h=a[o+1];c==="style"?Qp(r,h):c==="dangerouslySetInnerHTML"?Hp(r,h):c==="children"?Bs(r,h):Eh(r,c,h,u)}switch(l){case"input":cc(r,s);break;case"textarea":$p(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Lr(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Lr(r,!!s.multiple,s.defaultValue,!0):Lr(r,!!s.multiple,s.multiple?[]:"",!1))}r[Js]=s}catch(_){xe(t,t.return,_)}}break;case 6:if(zt(e,t),Jt(t),i&4){if(t.stateNode===null)throw Error(M(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(_){xe(t,t.return,_)}}break;case 3:if(zt(e,t),Jt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$s(e.containerInfo)}catch(_){xe(t,t.return,_)}break;case 4:zt(e,t),Jt(t);break;case 13:zt(e,t),Jt(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(ed=Se())),i&4&&sg(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ye=(u=Ye)||c,zt(e,t),Ye=u):zt(e,t),Jt(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(F=t,c=t.child;c!==null;){for(h=F=c;F!==null;){switch(d=F,f=d.child,d.tag){case 0:case 11:case 14:case 15:bs(4,d,d.return);break;case 1:wr(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(_){xe(i,n,_)}}break;case 5:wr(d,d.return);break;case 22:if(d.memoizedState!==null){lg(h);continue}}f!==null?(f.return=d,F=f):lg(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=qp("display",o))}catch(_){xe(t,t.return,_)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){xe(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:zt(e,t),Jt(t),i&4&&sg(t);break;case 21:break;default:zt(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(C_(n)){var i=n;break e}n=n.return}throw Error(M(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Bs(r,""),i.flags&=-33);var s=rg(t);Yc(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=rg(t);Bc(t,l,o);break;default:throw Error(M(161))}}catch(a){xe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function D1(t,e,n){F=t,T_(t)}function T_(t,e,n){for(var i=(t.mode&1)!==0;F!==null;){var r=F,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||el;if(!o){var l=r.alternate,a=l!==null&&l.memoizedState!==null||Ye;l=el;var u=Ye;if(el=o,(Ye=a)&&!u)for(F=r;F!==null;)o=F,a=o.child,o.tag===22&&o.memoizedState!==null?ag(r):a!==null?(a.return=o,F=a):ag(r);for(;s!==null;)F=s,T_(s),s=s.sibling;F=r,el=l,Ye=u}og(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,F=s):og(t)}}function og(t){for(;F!==null;){var e=F;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||Ca(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ye)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:jt(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Bf(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bf(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&$s(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ye||e.flags&512&&Xc(e)}catch(d){xe(e,e.return,d)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function lg(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function ag(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ca(4,e)}catch(a){xe(e,n,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(a){xe(e,r,a)}}var s=e.return;try{Xc(e)}catch(a){xe(e,s,a)}break;case 5:var o=e.return;try{Xc(e)}catch(a){xe(e,o,a)}}}catch(a){xe(e,e.return,a)}if(e===t){F=null;break}var l=e.sibling;if(l!==null){l.return=e.return,F=l;break}F=e.return}}var N1=Math.ceil,Kl=Mn.ReactCurrentDispatcher,Qh=Mn.ReactCurrentOwner,Mt=Mn.ReactCurrentBatchConfig,J=0,Ne=null,Re=null,be=0,ft=0,Cr=fi(0),Pe=0,so=null,ji=0,Sa=0,Jh=0,js=null,et=null,ed=0,Yr=1/0,mn=null,$l=!1,Vc=null,ni=null,tl=!1,Kn=null,Zl=0,Gs=0,Kc=null,Sl=-1,Rl=0;function qe(){return J&6?Se():Sl!==-1?Sl:Sl=Se()}function ii(t){return t.mode&1?J&2&&be!==0?be&-be:y1.transition!==null?(Rl===0&&(Rl=cm()),Rl):(t=oe,t!==0||(t=window.event,t=t===void 0?16:_m(t.type)),t):1}function Yt(t,e,n,i){if(50<Gs)throw Gs=0,Kc=null,Error(M(185));wo(t,n,i),(!(J&2)||t!==Ne)&&(t===Ne&&(!(J&2)&&(Sa|=n),Pe===4&&Yn(t,be)),ct(t,i),n===1&&J===0&&!(e.mode&1)&&(Yr=Se()+500,xa&&gi()))}function ct(t,e){var n=t.callbackNode;yv(t,e);var i=Al(t,t===Ne?be:0);if(i===0)n!==null&&_f(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&_f(n),e===1)t.tag===0?_1(ug.bind(null,t)):Fm(ug.bind(null,t)),f1(function(){!(J&6)&&gi()}),n=null;else{switch(hm(i)){case 1:n=Th;break;case 4:n=am;break;case 16:n=Ml;break;case 536870912:n=um;break;default:n=Ml}n=D_(n,I_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function I_(t,e){if(Sl=-1,Rl=0,J&6)throw Error(M(327));var n=t.callbackNode;if(Or()&&t.callbackNode!==n)return null;var i=Al(t,t===Ne?be:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Hl(t,i);else{e=i;var r=J;J|=2;var s=P_();(Ne!==t||be!==e)&&(mn=null,Yr=Se()+500,Oi(t,e));do try{b1();break}catch(l){L_(t,l)}while(!0);jh(),Kl.current=s,J=r,Re!==null?e=0:(Ne=null,be=0,e=Pe)}if(e!==0){if(e===2&&(r=xc(t),r!==0&&(i=r,e=$c(t,r))),e===1)throw n=so,Oi(t,0),Yn(t,i),ct(t,Se()),n;if(e===6)Yn(t,i);else{if(r=t.current.alternate,!(i&30)&&!F1(r)&&(e=Hl(t,i),e===2&&(s=xc(t),s!==0&&(i=s,e=$c(t,s))),e===1))throw n=so,Oi(t,0),Yn(t,i),ct(t,Se()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(M(345));case 2:Ci(t,et,mn);break;case 3:if(Yn(t,i),(i&130023424)===i&&(e=ed+500-Se(),10<e)){if(Al(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){qe(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Lc(Ci.bind(null,t,et,mn),e);break}Ci(t,et,mn);break;case 4:if(Yn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Bt(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Se()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*N1(i/1960))-i,10<i){t.timeoutHandle=Lc(Ci.bind(null,t,et,mn),i);break}Ci(t,et,mn);break;case 5:Ci(t,et,mn);break;default:throw Error(M(329))}}}return ct(t,Se()),t.callbackNode===n?I_.bind(null,t):null}function $c(t,e){var n=js;return t.current.memoizedState.isDehydrated&&(Oi(t,e).flags|=256),t=Hl(t,e),t!==2&&(e=et,et=n,e!==null&&Zc(e)),t}function Zc(t){et===null?et=t:et.push.apply(et,t)}function F1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Kt(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~Jh,e&=~Sa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bt(e),i=1<<n;t[n]=-1,e&=~i}}function ug(t){if(J&6)throw Error(M(327));Or();var e=Al(t,0);if(!(e&1))return ct(t,Se()),null;var n=Hl(t,e);if(t.tag!==0&&n===2){var i=xc(t);i!==0&&(e=i,n=$c(t,i))}if(n===1)throw n=so,Oi(t,0),Yn(t,e),ct(t,Se()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ci(t,et,mn),ct(t,Se()),null}function td(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Yr=Se()+500,xa&&gi())}}function Gi(t){Kn!==null&&Kn.tag===0&&!(J&6)&&Or();var e=J;J|=1;var n=Mt.transition,i=oe;try{if(Mt.transition=null,oe=1,t)return t()}finally{oe=i,Mt.transition=n,J=e,!(J&6)&&gi()}}function nd(){ft=Cr.current,ce(Cr)}function Oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,d1(n)),Re!==null)for(n=Re.return;n!==null;){var i=n;switch(Fh(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&zl();break;case 3:Xr(),ce(at),ce(Ke),Yh();break;case 5:Bh(i);break;case 4:Xr();break;case 13:ce(ge);break;case 19:ce(ge);break;case 10:Gh(i.type._context);break;case 22:case 23:nd()}n=n.return}if(Ne=t,Re=t=ri(t.current,null),be=ft=e,Pe=0,so=null,Jh=Sa=ji=0,et=js=null,Ii!==null){for(e=0;e<Ii.length;e++)if(n=Ii[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Ii=null}return t}function L_(t,e){do{var n=Re;try{if(jh(),El.current=Vl,Yl){for(var i=me.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Yl=!1}if(bi=0,Oe=Le=me=null,zs=!1,no=0,Qh.current=null,n===null||n.return===null){Pe=1,so=e,Re=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=be,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Hf(o);if(f!==null){f.flags&=-257,qf(f,o,l,s,e),f.mode&1&&Zf(s,u,e),e=f,a=u;var m=e.updateQueue;if(m===null){var _=new Set;_.add(a),e.updateQueue=_}else m.add(a);break e}else{if(!(e&1)){Zf(s,u,e),id();break e}a=Error(M(426))}}else if(de&&l.mode&1){var v=Hf(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),qf(v,o,l,s,e),zh(Br(a,l));break e}}s=a=Br(a,l),Pe!==4&&(Pe=2),js===null?js=[s]:js.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=h_(s,a,e);Xf(s,p);break e;case 1:l=a;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ni===null||!ni.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=d_(s,l,e);Xf(s,x);break e}}s=s.return}while(s!==null)}M_(n)}catch(E){e=E,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function P_(){var t=Kl.current;return Kl.current=Vl,t===null?Vl:t}function id(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Ne===null||!(ji&268435455)&&!(Sa&268435455)||Yn(Ne,be)}function Hl(t,e){var n=J;J|=2;var i=P_();(Ne!==t||be!==e)&&(mn=null,Oi(t,e));do try{z1();break}catch(r){L_(t,r)}while(!0);if(jh(),J=n,Kl.current=i,Re!==null)throw Error(M(261));return Ne=null,be=0,Pe}function z1(){for(;Re!==null;)k_(Re)}function b1(){for(;Re!==null&&!uv();)k_(Re)}function k_(t){var e=O_(t.alternate,t,ft);t.memoizedProps=t.pendingProps,e===null?M_(t):Re=e,Qh.current=null}function M_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=M1(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pe=6,Re=null;return}}else if(n=k1(n,e,ft),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);Pe===0&&(Pe=5)}function Ci(t,e,n){var i=oe,r=Mt.transition;try{Mt.transition=null,oe=1,j1(t,e,n,i)}finally{Mt.transition=r,oe=i}return null}function j1(t,e,n,i){do Or();while(Kn!==null);if(J&6)throw Error(M(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(vv(t,s),t===Ne&&(Re=Ne=null,be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tl||(tl=!0,D_(Ml,function(){return Or(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Mt.transition,Mt.transition=null;var o=oe;oe=1;var l=J;J|=4,Qh.current=null,O1(t,n),R_(n,t),s1(Tc),Ol=!!Rc,Tc=Rc=null,t.current=n,D1(n),cv(),J=l,oe=o,Mt.transition=s}else t.current=n;if(tl&&(tl=!1,Kn=t,Zl=r),s=t.pendingLanes,s===0&&(ni=null),fv(n.stateNode),ct(t,Se()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if($l)throw $l=!1,t=Vc,Vc=null,t;return Zl&1&&t.tag!==0&&Or(),s=t.pendingLanes,s&1?t===Kc?Gs++:(Gs=0,Kc=t):Gs=0,gi(),null}function Or(){if(Kn!==null){var t=hm(Zl),e=Mt.transition,n=oe;try{if(Mt.transition=null,oe=16>t?16:t,Kn===null)var i=!1;else{if(t=Kn,Kn=null,Zl=0,J&6)throw Error(M(331));var r=J;for(J|=4,F=t.current;F!==null;){var s=F,o=s.child;if(F.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(F=u;F!==null;){var c=F;switch(c.tag){case 0:case 11:case 15:bs(8,c,s)}var h=c.child;if(h!==null)h.return=c,F=h;else for(;F!==null;){c=F;var d=c.sibling,f=c.return;if(w_(c),c===u){F=null;break}if(d!==null){d.return=f,F=d;break}F=f}}}var m=s.alternate;if(m!==null){var _=m.child;if(_!==null){m.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(_!==null)}}F=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,F=o;else e:for(;F!==null;){if(s=F,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bs(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,F=p;break e}F=s.return}}var g=t.current;for(F=g;F!==null;){o=F;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,F=y;else e:for(o=g;F!==null;){if(l=F,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ca(9,l)}}catch(E){xe(l,l.return,E)}if(l===o){F=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,F=x;break e}F=l.return}}if(J=r,gi(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(pa,t)}catch{}i=!0}return i}finally{oe=n,Mt.transition=e}}return!1}function cg(t,e,n){e=Br(n,e),e=h_(t,e,1),t=ti(t,e,1),e=qe(),t!==null&&(wo(t,1,e),ct(t,e))}function xe(t,e,n){if(t.tag===3)cg(t,t,n);else for(;e!==null;){if(e.tag===3){cg(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ni===null||!ni.has(i))){t=Br(n,t),t=d_(e,t,1),e=ti(e,t,1),t=qe(),e!==null&&(wo(e,1,t),ct(e,t));break}}e=e.return}}function G1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=qe(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(be&n)===n&&(Pe===4||Pe===3&&(be&130023424)===be&&500>Se()-ed?Oi(t,0):Jh|=n),ct(t,e)}function A_(t,e){e===0&&(t.mode&1?(e=Yo,Yo<<=1,!(Yo&130023424)&&(Yo=4194304)):e=1);var n=qe();t=Ln(t,e),t!==null&&(wo(t,e,n),ct(t,n))}function W1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),A_(t,n)}function U1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(M(314))}i!==null&&i.delete(e),A_(t,n)}var O_;O_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||at.current)ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ot=!1,P1(t,e,n);ot=!!(t.flags&131072)}else ot=!1,de&&e.flags&1048576&&zm(e,Gl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Cl(t,e),t=e.pendingProps;var r=Gr(e,Ke.current);Ar(e,n),r=Kh(null,e,i,t,r,n);var s=$h();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ut(i)?(s=!0,bl(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Uh(e),r.updater=wa,e.stateNode=r,r._reactInternals=e,Nc(e,i,t,n),e=bc(null,e,i,!0,s,n)):(e.tag=0,de&&s&&Nh(e),Ze(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Cl(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=B1(i),t=jt(i,t),r){case 0:e=zc(null,e,i,t,n);break e;case 1:e=eg(null,e,i,t,n);break e;case 11:e=Qf(null,e,i,t,n);break e;case 14:e=Jf(null,e,i,jt(i.type,t),n);break e}throw Error(M(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jt(i,r),zc(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jt(i,r),eg(t,e,i,r,n);case 3:e:{if(m_(e),t===null)throw Error(M(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Xm(t,e),Xl(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Br(Error(M(423)),e),e=tg(t,e,i,n,r);break e}else if(i!==r){r=Br(Error(M(424)),e),e=tg(t,e,i,n,r);break e}else for(pt=ei(e.stateNode.containerInfo.firstChild),mt=e,de=!0,Wt=null,n=Wm(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wr(),i===r){e=Pn(t,e,n);break e}Ze(t,e,i,n)}e=e.child}return e;case 5:return Bm(e),t===null&&Ac(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Ic(i,r)?o=null:s!==null&&Ic(i,s)&&(e.flags|=32),p_(t,e),Ze(t,e,o,n),e.child;case 6:return t===null&&Ac(e),null;case 13:return __(t,e,n);case 4:return Xh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ur(e,null,i,n):Ze(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jt(i,r),Qf(t,e,i,r,n);case 7:return Ze(t,e,e.pendingProps,n),e.child;case 8:return Ze(t,e,e.pendingProps.children,n),e.child;case 12:return Ze(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,le(Wl,i._currentValue),i._currentValue=o,s!==null)if(Kt(s.value,o)){if(s.children===r.children&&!at.current){e=Pn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===i){if(s.tag===1){a=wn(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Oc(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(M(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Oc(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ze(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ar(e,n),r=Ot(r),i=i(r),e.flags|=1,Ze(t,e,i,n),e.child;case 14:return i=e.type,r=jt(i,e.pendingProps),r=jt(i.type,r),Jf(t,e,i,r,n);case 15:return f_(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jt(i,r),Cl(t,e),e.tag=1,ut(i)?(t=!0,bl(e)):t=!1,Ar(e,n),c_(e,i,r),Nc(e,i,r,n),bc(null,e,i,!0,t,n);case 19:return y_(t,e,n);case 22:return g_(t,e,n)}throw Error(M(156,e.tag))};function D_(t,e){return lm(t,e)}function X1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,i){return new X1(t,e,n,i)}function rd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function B1(t){if(typeof t=="function")return rd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ch)return 11;if(t===Sh)return 14}return 2}function ri(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tl(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")rd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fr:return Di(n.children,r,s,e);case wh:o=8,r|=8;break;case sc:return t=Lt(12,n,e,r|2),t.elementType=sc,t.lanes=s,t;case oc:return t=Lt(13,n,e,r),t.elementType=oc,t.lanes=s,t;case lc:return t=Lt(19,n,e,r),t.elementType=lc,t.lanes=s,t;case Bp:return Ra(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Up:o=10;break e;case Xp:o=9;break e;case Ch:o=11;break e;case Sh:o=14;break e;case Wn:o=16,i=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Di(t,e,n,i){return t=Lt(7,t,i,e),t.lanes=n,t}function Ra(t,e,n,i){return t=Lt(22,t,i,e),t.elementType=Bp,t.lanes=n,t.stateNode={isHidden:!1},t}function Lu(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function Pu(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y1(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uu(0),this.expirationTimes=uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uu(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function sd(t,e,n,i,r,s,o,l,a){return t=new Y1(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Lt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(s),t}function V1(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function N_(t){if(!t)return ci;t=t._reactInternals;e:{if(Yi(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(ut(n))return Nm(t,n,e)}return e}function F_(t,e,n,i,r,s,o,l,a){return t=sd(n,i,!0,t,r,s,o,l,a),t.context=N_(null),n=t.current,i=qe(),r=ii(n),s=wn(i,r),s.callback=e??null,ti(n,s,r),t.current.lanes=r,wo(t,r,i),ct(t,i),t}function Ta(t,e,n,i){var r=e.current,s=qe(),o=ii(r);return n=N_(n),e.context===null?e.context=n:e.pendingContext=n,e=wn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ti(r,e,o),t!==null&&(Yt(t,r,o,s),xl(t,r,o)),o}function ql(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function od(t,e){hg(t,e),(t=t.alternate)&&hg(t,e)}function K1(){return null}var z_=typeof reportError=="function"?reportError:function(t){console.error(t)};function ld(t){this._internalRoot=t}Ia.prototype.render=ld.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Ta(t,e,null,null)};Ia.prototype.unmount=ld.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gi(function(){Ta(null,t,null,null)}),e[In]=null}};function Ia(t){this._internalRoot=t}Ia.prototype.unstable_scheduleHydration=function(t){if(t){var e=gm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bn.length&&e!==0&&e<Bn[n].priority;n++);Bn.splice(n,0,t),n===0&&mm(t)}};function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function La(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dg(){}function $1(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=ql(o);s.call(u)}}var o=F_(e,i,t,0,null,!1,!1,"",dg);return t._reactRootContainer=o,t[In]=o.current,qs(t.nodeType===8?t.parentNode:t),Gi(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var u=ql(a);l.call(u)}}var a=sd(t,0,!1,null,null,!1,!1,"",dg);return t._reactRootContainer=a,t[In]=a.current,qs(t.nodeType===8?t.parentNode:t),Gi(function(){Ta(e,a,n,i)}),a}function Pa(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var a=ql(o);l.call(a)}}Ta(e,o,t,r)}else o=$1(n,e,t,r,i);return ql(o)}dm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ss(e.pendingLanes);n!==0&&(Ih(e,n|1),ct(e,Se()),!(J&6)&&(Yr=Se()+500,gi()))}break;case 13:Gi(function(){var i=Ln(t,1);if(i!==null){var r=qe();Yt(i,t,1,r)}}),od(t,1)}};Lh=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var n=qe();Yt(e,t,134217728,n)}od(t,134217728)}};fm=function(t){if(t.tag===13){var e=ii(t),n=Ln(t,e);if(n!==null){var i=qe();Yt(n,t,e,i)}od(t,e)}};gm=function(){return oe};pm=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};_c=function(t,e,n){switch(e){case"input":if(cc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=va(i);if(!r)throw Error(M(90));Vp(i),cc(i,r)}}}break;case"textarea":$p(t,n);break;case"select":e=n.value,e!=null&&Lr(t,!!n.multiple,e,!1)}};tm=td;nm=Gi;var Z1={usingClientEntryPoint:!1,Events:[So,_r,va,Jp,em,td]},_s={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H1={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sm(t),t===null?null:t.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||K1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{pa=nl.inject(H1),ln=nl}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z1;yt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ad(e))throw Error(M(200));return V1(t,e,null,n)};yt.createRoot=function(t,e){if(!ad(t))throw Error(M(299));var n=!1,i="",r=z_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=sd(t,1,!1,null,null,n,!1,i,r),t[In]=e.current,qs(t.nodeType===8?t.parentNode:t),new ld(e)};yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=sm(e),t=t===null?null:t.stateNode,t};yt.flushSync=function(t){return Gi(t)};yt.hydrate=function(t,e,n){if(!La(e))throw Error(M(200));return Pa(null,t,e,!0,n)};yt.hydrateRoot=function(t,e,n){if(!ad(t))throw Error(M(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=z_;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=F_(e,null,t,1,n??null,r,!1,s,o),t[In]=e.current,qs(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ia(e)};yt.render=function(t,e,n){if(!La(e))throw Error(M(200));return Pa(null,t,e,!1,n)};yt.unmountComponentAtNode=function(t){if(!La(t))throw Error(M(40));return t._reactRootContainer?(Gi(function(){Pa(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};yt.unstable_batchedUpdates=td;yt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!La(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Pa(t,e,n,!1,i)};yt.version="18.3.1-next-f1338f8080-20240426";function b_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b_)}catch(t){console.error(t)}}b_(),bp.exports=yt;var q1=bp.exports,j_,fg=q1;j_=fg.createRoot,fg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oo.apply(this,arguments)}var $n;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($n||($n={}));const gg="popstate";function Q1(t){t===void 0&&(t={});function e(r,s){let{pathname:o="/",search:l="",hash:a=""}=Vi(r.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Hc("",{pathname:o,search:l,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let a=r.location.href,u=a.indexOf("#");l=u===-1?a:a.slice(0,u)}return l+"#"+(typeof s=="string"?s:Ql(s))}function i(r,s){ud(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return ex(e,n,i,t)}function Te(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ud(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J1(){return Math.random().toString(36).substr(2,8)}function pg(t,e){return{usr:t.state,key:t.key,idx:e}}function Hc(t,e,n,i){return n===void 0&&(n=null),oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vi(e):e,{state:n,key:e&&e.key||i||J1()})}function Ql(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Vi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function ex(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l=$n.Pop,a=null,u=c();u==null&&(u=0,o.replaceState(oo({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){l=$n.Pop;let v=c(),p=v==null?null:v-u;u=v,a&&a({action:l,location:_.location,delta:p})}function d(v,p){l=$n.Push;let g=Hc(_.location,v,p);n&&n(g,v),u=c()+1;let y=pg(g,u),x=_.createHref(g);try{o.pushState(y,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;r.location.assign(x)}s&&a&&a({action:l,location:_.location,delta:1})}function f(v,p){l=$n.Replace;let g=Hc(_.location,v,p);n&&n(g,v),u=c();let y=pg(g,u),x=_.createHref(g);o.replaceState(y,"",x),s&&a&&a({action:l,location:_.location,delta:0})}function m(v){let p=r.location.origin!=="null"?r.location.origin:r.location.href,g=typeof v=="string"?v:Ql(v);return g=g.replace(/ $/,"%20"),Te(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let _={get action(){return l},get location(){return t(r,o)},listen(v){if(a)throw new Error("A history only accepts one active listener");return r.addEventListener(gg,h),a=v,()=>{r.removeEventListener(gg,h),a=null}},createHref(v){return e(r,v)},createURL:m,encodeLocation(v){let p=m(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:f,go(v){return o.go(v)}};return _}var mg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mg||(mg={}));function tx(t,e,n){return n===void 0&&(n="/"),nx(t,e,n,!1)}function nx(t,e,n,i){let r=typeof e=="string"?Vi(e):e,s=cd(r.pathname||"/",n);if(s==null)return null;let o=G_(t);ix(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=gx(s);l=dx(o[a],u,i)}return l}function G_(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(Te(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(i.length));let u=si([i,a.relativePath]),c=n.concat(a);s.children&&s.children.length>0&&(Te(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),G_(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:cx(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let a of W_(s.path))r(s,o,a)}),e}function W_(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=W_(i.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),r&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function ix(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hx(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const rx=/^:[\w-]+$/,sx=3,ox=2,lx=1,ax=10,ux=-2,_g=t=>t==="*";function cx(t,e){let n=t.split("/"),i=n.length;return n.some(_g)&&(i+=ux),e&&(i+=ox),n.filter(r=>!_g(r)).reduce((r,s)=>r+(rx.test(s)?sx:s===""?lx:ax),i)}function hx(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function dx(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let l=0;l<i.length;++l){let a=i[l],u=l===i.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=yg({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},c),d=a.route;if(!h&&u&&n&&!i[i.length-1].route.index&&(h=yg({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},c)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:si([s,h.pathname]),pathnameBase:yx(si([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=si([s,h.pathnameBase]))}return o}function yg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=fx(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((u,c,h)=>{let{paramName:d,isOptional:f}=c;if(d==="*"){let _=l[h]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const m=l[h];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function fx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ud(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(i.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function gx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ud(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function px(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Vi(t):t;return{pathname:n?n.startsWith("/")?n:mx(n,e):e,search:vx(i),hash:xx(r)}}function mx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ku(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _x(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function U_(t,e){let n=_x(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function X_(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Vi(t):(r=oo({},t),Te(!r.pathname||!r.pathname.includes("?"),ku("?","pathname","search",r)),Te(!r.pathname||!r.pathname.includes("#"),ku("#","pathname","hash",r)),Te(!r.search||!r.search.includes("#"),ku("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}l=h>=0?e[h]:"/"}let a=px(r,l),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}const si=t=>t.join("/").replace(/\/\/+/g,"/"),yx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ex(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const B_=["post","put","patch","delete"];new Set(B_);const wx=["get",...B_];new Set(wx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lo.apply(this,arguments)}const hd=A.createContext(null),Cx=A.createContext(null),Ki=A.createContext(null),ka=A.createContext(null),pi=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Y_=A.createContext(null);function Sx(t,e){let{relative:n}=e===void 0?{}:e;To()||Te(!1);let{basename:i,navigator:r}=A.useContext(Ki),{hash:s,pathname:o,search:l}=K_(t,{relative:n}),a=o;return i!=="/"&&(a=o==="/"?i:si([i,o])),r.createHref({pathname:a,search:l,hash:s})}function To(){return A.useContext(ka)!=null}function Io(){return To()||Te(!1),A.useContext(ka).location}function V_(t){A.useContext(Ki).static||A.useLayoutEffect(t)}function Ma(){let{isDataRoute:t}=A.useContext(pi);return t?jx():Rx()}function Rx(){To()||Te(!1);let t=A.useContext(hd),{basename:e,future:n,navigator:i}=A.useContext(Ki),{matches:r}=A.useContext(pi),{pathname:s}=Io(),o=JSON.stringify(U_(r,n.v7_relativeSplatPath)),l=A.useRef(!1);return V_(()=>{l.current=!0}),A.useCallback(function(u,c){if(c===void 0&&(c={}),!l.current)return;if(typeof u=="number"){i.go(u);return}let h=X_(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:si([e,h.pathname])),(c.replace?i.replace:i.push)(h,c.state,c)},[e,i,o,s,t])}const Tx=A.createContext(null);function Ix(t){let e=A.useContext(pi).outlet;return e&&A.createElement(Tx.Provider,{value:t},e)}function K_(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=A.useContext(Ki),{matches:r}=A.useContext(pi),{pathname:s}=Io(),o=JSON.stringify(U_(r,i.v7_relativeSplatPath));return A.useMemo(()=>X_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Lx(t,e){return Px(t,e)}function Px(t,e,n,i){To()||Te(!1);let{navigator:r}=A.useContext(Ki),{matches:s}=A.useContext(pi),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=Io(),c;if(e){var h;let v=typeof e=="string"?Vi(e):e;a==="/"||(h=v.pathname)!=null&&h.startsWith(a)||Te(!1),c=v}else c=u;let d=c.pathname||"/",f=d;if(a!=="/"){let v=a.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=tx(t,{pathname:f}),_=Dx(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:si([a,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:si([a,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,i);return e&&_?A.createElement(ka.Provider,{value:{location:lo({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:$n.Pop}},_):_}function kx(){let t=bx(),e=Ex(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:r},n):null,null)}const Mx=A.createElement(kx,null);class Ax extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(pi.Provider,{value:this.props.routeContext},A.createElement(Y_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ox(t){let{routeContext:e,match:n,children:i}=t,r=A.useContext(hd);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(pi.Provider,{value:e},i)}function Dx(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let c=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);c>=0||Te(!1),o=o.slice(0,Math.min(o.length,c+1))}let a=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:f}=n,m=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||m){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,d)=>{let f,m=!1,_=null,v=null;n&&(f=l&&h.route.id?l[h.route.id]:void 0,_=h.route.errorElement||Mx,a&&(u<0&&d===0?(m=!0,v=null):u===d&&(m=!0,v=h.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,d+1)),g=()=>{let y;return f?y=_:m?y=v:h.route.Component?y=A.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=c,A.createElement(Ox,{match:h,routeContext:{outlet:c,matches:p,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?A.createElement(Ax,{location:n.location,revalidation:n.revalidation,component:_,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var $_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($_||{}),Jl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Jl||{});function Nx(t){let e=A.useContext(hd);return e||Te(!1),e}function Fx(t){let e=A.useContext(Cx);return e||Te(!1),e}function zx(t){let e=A.useContext(pi);return e||Te(!1),e}function Z_(t){let e=zx(),n=e.matches[e.matches.length-1];return n.route.id||Te(!1),n.route.id}function bx(){var t;let e=A.useContext(Y_),n=Fx(Jl.UseRouteError),i=Z_(Jl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function jx(){let{router:t}=Nx($_.UseNavigateStable),e=Z_(Jl.UseNavigateStable),n=A.useRef(!1);return V_(()=>{n.current=!0}),A.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,lo({fromRouteId:e},s)))},[t,e])}function Gx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Wx(t){return Ix(t.context)}function Il(t){Te(!1)}function Ux(t){let{basename:e="/",children:n=null,location:i,navigationType:r=$n.Pop,navigator:s,static:o=!1,future:l}=t;To()&&Te(!1);let a=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:a,navigator:s,static:o,future:lo({v7_relativeSplatPath:!1},l)}),[a,l,s,o]);typeof i=="string"&&(i=Vi(i));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:m="default"}=i,_=A.useMemo(()=>{let v=cd(c,a);return v==null?null:{location:{pathname:v,search:h,hash:d,state:f,key:m},navigationType:r}},[a,c,h,d,f,m,r]);return _==null?null:A.createElement(Ki.Provider,{value:u},A.createElement(ka.Provider,{children:n,value:_}))}function Xx(t){let{children:e,location:n}=t;return Lx(qc(e),n)}new Promise(()=>{});function qc(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(i,r)=>{if(!A.isValidElement(i))return;let s=[...e,r];if(i.type===A.Fragment){n.push.apply(n,qc(i.props.children,s));return}i.type!==Il&&Te(!1),!i.props.index||!i.props.children||Te(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=qc(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qc(){return Qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qc.apply(this,arguments)}function Bx(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Yx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vx(t,e){return t.button===0&&(!e||e==="_self")&&!Yx(t)}const Kx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$x="6";try{window.__reactRouterVersion=$x}catch{}const Zx="startTransition",vg=Gy[Zx];function Hx(t){let{basename:e,children:n,future:i,window:r}=t,s=A.useRef();s.current==null&&(s.current=Q1({window:r,v5Compat:!0}));let o=s.current,[l,a]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},c=A.useCallback(h=>{u&&vg?vg(()=>a(h)):a(h)},[a,u]);return A.useLayoutEffect(()=>o.listen(c),[o,c]),A.useEffect(()=>Gx(i),[i]),A.createElement(Ux,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:i})}const qx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ri=A.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:l,target:a,to:u,preventScrollReset:c,viewTransition:h}=e,d=Bx(e,Kx),{basename:f}=A.useContext(Ki),m,_=!1;if(typeof u=="string"&&Qx.test(u)&&(m=u,qx))try{let y=new URL(window.location.href),x=u.startsWith("//")?new URL(y.protocol+u):new URL(u),E=cd(x.pathname,f);x.origin===y.origin&&E!=null?u=E+x.search+x.hash:_=!0}catch{}let v=Sx(u,{relative:r}),p=Jx(u,{replace:o,state:l,target:a,preventScrollReset:c,relative:r,viewTransition:h});function g(y){i&&i(y),y.defaultPrevented||p(y)}return A.createElement("a",Qc({},d,{href:m||v,onClick:_||s?i:g,ref:n,target:a}))});var xg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xg||(xg={}));var Eg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Eg||(Eg={}));function Jx(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,a=Ma(),u=Io(),c=K_(t,{relative:o});return A.useCallback(h=>{if(Vx(h,n)){h.preventDefault();let d=i!==void 0?i:Ql(u)===Ql(c);a(t,{replace:d,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[u,a,c,i,r,n,t,s,o,l])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),H_=(t,e)=>{const n=A.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:a,...u},c)=>A.createElement("svg",{ref:c,...eE,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:["lucide",`lucide-${tE(t)}`,l].join(" "),...u},[...e.map(([h,d])=>A.createElement(h,d)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=H_("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=H_("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gt=[{id:"barbarossa",title:"Начало войны (Операция «Барбаросса»)",date:"22 июня 1941 г.",coverImage:"https://avatars.mds.yandex.net/i?id=fce8ba09fab7c9016d57e2ac0f49b8f1_l-5232384-images-thumbs&n=13",shortDescription:"Германия нарушает пакт о ненападении и вторгается в СССР. Три группы армий («Север», «Центр», «Юг») идут к Ленинграду, Москве и Киеву.",description:["В 4 часа утра 22 июня 1941 года Германия начала операцию «Барбаросса» — крупнейшее военное вторжение в истории. Три группы армий двинулись к Ленинграду, Москве и Киеву. Советский Союз оказался не готов к такому удару, фронт рушился, а советские войска несли огромные потери.","Ранним утром 22 июня 1941 года, ровно в 4 часа, на Советский Союз обрушился сокрушительный удар. На протяжении почти 3 тысяч километров от Балтийского до Чёрного моря началось крупнейшее в истории военное вторжение — операция «Барбаросса». Гитлеровская Германия, нарушив Пакт о ненападении, бросила на восток более 4 миллионов солдат, свыше 3 тысяч танков и почти 5 тысяч самолётов. Три мощные группы армий — «Север», «Центр» и «Юг» — должны были молниеносно разгромить СССР: взять Ленинград, Москву и захватить всю Украину.","Советский Союз оказался не готов к такому удару. Несмотря на множество сигналов разведки и переброску войск к западной границе, командование до последнего верило, что нападание удастся избежать. Войска не были приведены в полную боевую готовность, аэродромы располагались слишком близко к границе, штабы не имели чёткой связи.","Результат — катастрофа. Уже в первые часы были уничтожены сотни самолётов на земле, фронт в ряде направлений развалился, целые армии оказались в окружении. Немцы стремительно продвигались вперёд, захватывая города, деревни и важные коммуникации. К началу июля был оккупирован Минск, к августу — Смоленск, а к сентябрю — приближались к Ленинграду и Киеву. Потери Красной армии измерялись миллионами: убитые, пленные, пропавшие без вести.","Однако вместо лёгкой победы, на которую рассчитывал Гитлер, началась долгая, изнуряющая война. Несмотря на страшный удар, страна мобилизовалась. С первых дней сопротивление нарастало: от Брестской крепости, сражавшейся в полном окружении, до простых людей в тылу, вставших к станкам и оружию.","22 июня вошло в историю как день национальной трагедии и начала Великой Отечественной войны — тотальной борьбы за выживание народа, государства и памяти."],timeline:[{date:"22 июня 1941 г.",title:"Вторжение",description:"Германия нападает на СССР, начинается Великая Отечественная война."}],photos:[],coordinates:[53.9045,27.5615]},{id:"encirclements-1941",title:"Окружения под Минском, Смоленском, Киевом",date:"июнь–сентябрь 1941 г.",coverImage:"https://avatars.mds.yandex.net/i?id=8bc86e87da77e1667c5c3b9a0ed09508_l-5241638-images-thumbs&n=13",shortDescription:"Массовые потери. Фраза 'немцы продвигаются стремительно' стала мантрой новостей.",description:["После молниеносного начала операции «Барбаросса» вермахт продвигался на восток с пугающей скоростью. Советское командование не успевало реагировать на удары противника, а структура управления сыпалась под давлением событий. В результате в течение лета и начала осени 1941 года произошли три крупнейшие трагедии начала войны — окружения под Минском, Смоленском и Киевом.","Первой пала Минская группировка. Уже к 28 июня 1941 года немецкие танковые клинья замкнули кольцо вокруг города. Более 300 тысяч советских солдат оказались в окружении, связь с ними была потеряна. Отдельные части продолжали бой, но организованное сопротивление быстро исчезло. Потери были колоссальными — тысячи убитых, ещё больше пленных.","Следующей стала Смоленская операция. С середины июля по сентябрь 1941 года в районе Смоленска шли ожесточённые бои. Несмотря на попытки контратак и героизм отдельных соединений, Красная армия вновь оказалась не в силах остановить немецкое наступление. Поражение здесь открыло немцам дорогу на Москву, хотя сражение затормозило их продвижение почти на два месяца — критическая передышка для обороны столицы.","Самой тяжёлой стала катастрофа под Киевом. В сентябре 1941 года гитлеровские войска провели одну из самых крупных операций окружения в военной истории. Около 600 тысяч советских солдат попали в «котёл». Попытки деблокирования провалились. Потери — шокирующие: убитые, раненые, пленные. Киев сдан. Генерал Кирпонос погиб при попытке выхода из окружения. Эта трагедия стала результатом политического вмешательства в военное планирование: Ставка до последнего запрещала отвод войск, несмотря на угрозу полного охвата.","К лету и осени 1941 года Красная армия утратила значительную часть кадрового состава, огромное количество техники и ресурсов. Это был переломный момент: страна поняла, что победы не будет «вот-вот» — предстоит долгая и кровавая война. Несмотря на поражения, советское командование училось, адаптировалось и готовилось к обороне Москвы. А простой солдат уже тогда показал, что не сдаётся просто так."],timeline:[{date:"июнь–сентябрь 1941 г.",title:"Окружения",description:"Крупные окружения и потери под Минском, Смоленском, Киевом."}],photos:[],coordinates:[53.9045,27.5615]},{id:"leningrad-blockade",title:"Начало блокады Ленинграда",date:"8 сентября 1941 г.",coverImage:"https://cdnn21.img.ria.ru/images/156366/63/1563666329_0:1353:2047:2504_1920x0_80_0_0_8cc7c0b612a8250b3eab14d60373ba39.jpg",shortDescription:"Кольцо замкнуто. Миллион погибших, из которых почти половина — от голода.",description:["8 сентября 1941 года немецкие и финские войска окончательно замкнули кольцо окружения вокруг Ленинграда. Началась одна из самых страшных страниц Второй мировой войны — блокада, длившаяся 872 дня. Это было не просто осада: это была попытка стереть город с лица земли через голод, страх и разрушения.","Цель врага была предельно циничной: Ленинград не брать штурмом, а уничтожить — полностью. Артиллерия ежедневно обстреливала жилые кварталы, бомбардировки разрушали склады и инфраструктуру. Подвоз продовольствия был прекращён, а эвакуация — практически невозможна. Оставшиеся в городе более двух миллионов человек, включая женщин, детей и стариков, оказались в ловушке.","Настоящая катастрофа началась с наступлением зимы 1941 года. Температуры падали до -30, отопление отсутствовало, электричество — в дефиците, транспорт не работал. В это время норма хлеба снизилась до 125 граммов в день — и это всё, что получал человек, выполнявший тяжёлую работу. Умирали на улицах, в домах, в очередях за продуктами. Люди ели клей, кожаные ремни, столярный клей, кошек, крыс — и, да, были случаи каннибализма. Половина всех погибших — от голода.","Но, несмотря на всё это, город выстоял. Он не сдался. Работали заводы, выпускалась военная продукция, действовали школы, музеи, даже театры. Люди хоронили близких, теряли силы, замерзали, но не покидали город и не принимали поражения.","В январе 1943 года кольцо блокады было частично прорвано, а полностью — только 27 января 1944 года. За эти 872 дня Ленинград потерял, по разным оценкам, от 600 тысяч до миллиона человек — больше, чем США потеряли за всю войну.","Блокада Ленинграда — это не просто трагедия. Это символ человеческой выносливости на пределе, когда вся цивилизованность слетает с мира, а люди выбирают — не сдаваться."],timeline:[{date:"8 сентября 1941 г.",title:"Блокада Ленинграда",description:"Начало блокады города, которая продлится 872 дня."}],photos:[],coordinates:[59.9375,30.3086]},{id:"moscow-battle",title:"Битва за Москву",date:"30 сентября 1941 г.",coverImage:"https://upload.wikimedia.org/wikipedia/commons/a/ad/RIAN_archive_887721_Defense_of_Moscow.jpg",shortDescription:"Немцы в 30 км от столицы. Советское командование запускает эвакуацию и мобилизацию.",description:["Битва за Москву стала решающим эпизодом начального периода Великой Отечественной войны. С конца сентября 1941 года немецкая группа армий «Центр» начала операцию «Тайфун» — стремительное наступление с целью захвата советской столицы. План был прост: прорвать фронт, окружить советские войска и взять Москву до зимы. Проблема в том, что простыми эти планы были только на бумаге.","Советские войска, истощённые и обескровленные предыдущими поражениями, спешно отступали к столице. Паника охватывала население, началась частичная эвакуация органов власти и заводов. В Москве копали противотанковые рвы, строили баррикады, создавали народное ополчение из рабочих, студентов, пенсионеров. Всё выглядело так, будто это конец.","И всё же, несмотря на техническое и тактическое превосходство вермахта, наступление замедлилось. Немцы столкнулись с несколькими «неожиданностями»: упорным сопротивлением, растянутыми коммуникациями, распутицей (да, осень — оружие России №2), и наконец, с той самой русской зимой, в которую якобы «не верили».","Когда температура опустилась до -30, немецкие солдаты мерзли в лёгкой форме, техника выходила из строя, топливо замерзало прямо в баках. А Красная армия, между прочим, получила зимнюю форму и начала перегруппировку.","5–6 декабря 1941 года советские войска перешли в контрнаступление. Началась операция по освобождению Подмосковья. Немцев отбросили на сотни километров. Это стало первым крупным поражением вермахта за всю войну. Мираж молниеносной победы развеялся окончательно, а мировая общественность впервые увидела, что Третий рейх можно не только остановить, но и бить.","Битва за Москву изменила ход войны. Гитлеру пришлось пересматривать планы, мировое мнение начало колебаться, а моральный дух советских граждан получил столь редкое в те месяцы — подкрепление верой, что враг не непобедим."],timeline:[{date:"30 сентября 1941 г.",title:"Начало битвы за Москву",description:"Немцы начинают наступление на Москву."}],photos:[],coordinates:[55.7558,37.6173]},{id:"kharkov-disaster",title:"Харьковская катастрофа",date:"май 1942 г.",coverImage:"https://avatars.dzeninfra.ru/get-zen_doc/9704999/pub_645e214e0b942a7054730118_645e22fe2159f72a5371f6a2/scale_1200",shortDescription:"Красная армия пошла в наступление и опять попала в мешок. Зачем? Хороший вопрос.",description:["После зимнего контрнаступления под Москвой в верхах появилось легкомысленное чувство, что немецкая машина трещит по швам. На волне этого оптимизма советское командование решает начать новое наступление — на Харьков. Цель: отбросить немцев, освободить стратегически важный город, укрепить позиции на юге. В общем, амбиции — уровня «давайте повторим зиму, но весной». Спойлер: весной всё тает, включая здравый смысл.","Операция началась 12 мая 1942 года. С двух направлений — из района Барвенково и Волчанска — войска Юго-Западного фронта нанесли удар по немецким позициям. И вначале всё шло неплохо: несколько успехов, продвижение на десятки километров, враг вроде бы отступает. Но, как это часто бывало в 1941–1942 годах, успех был преждевременным и неосновательным.","Немцы, как обычно, притворились растерянными, а затем провели классическое контрнаступление. Они замкнули два ударных советских клина в «Барвенковский котёл». Более 250 тысяч человек оказались в окружении. Связь была нарушена, снабжения не было, выход — затруднён. Командование до последнего не верило в катастрофу, приказывало держаться, пока котёл буквально не задохнулся.","К концу мая советские войска понесли чудовищные потери: около 200 тысяч убитых, раненых и пленных. Немцы не просто отразили наступление — они вновь захватили стратегическую инициативу. Эта катастрофа развязала им руки для летнего наступления на юг — прямо к Сталинграду и Кавказу.","Харьков стал символом переоценки своих возможностей. Советская армия ещё не была готова к масштабным наступательным операциям: не хватало техники, подготовки, скоординированного управления. Эта весна показала: война всё ещё в самом разгаре, и перед «победами» будет ещё очень много поражений."],timeline:[{date:"май 1942 г.",title:"Харьковская катастрофа",description:"Неудачное наступление Красной армии и окружение под Харьковом."}],photos:[],coordinates:[49.9935,36.2304]},{id:"blau-operation",title:"Операция «Блау»",date:"28 июня 1942 г.",coverImage:"https://reibert.info/media/screenshot_11-png.270930/full",shortDescription:"Новый удар немцев на юг, к Кавказу. Цель — нефть и Сталинград.",description:["Операция «Блау» (она же «Синяя») — стратегическое наступление вермахта летом 1942 года, цель которого была проста и одновременно безумно амбициозна: прорваться на юг СССР, захватить Кавказ и взять под контроль жизненно важные нефтяные месторождения, а заодно и Сталинград — крупнейший промышленный и транспортный узел на Волге.","После Харьковской катастрофы и падения Севастополя немецкое командование решило, что Советский Союз уже на грани изнеможения. В Берлине уверовали, что вторая попытка блицкрига, теперь по южному направлению, наконец-то сломит противника. Группа армий «Юг» была разделена: одна часть шла на Кавказ (нефть Баку — хлеб с икрой для военной машины Третьего рейха), другая — на восток, к Сталинграду. Проблема в том, что наступали они на слишком широком фронте, с растянутыми коммуникациями и жадным аппетитом.","Поначалу всё шло, как по нотам: немецкие войска продвигались с огромной скоростью, захватывая города и стратегические позиции. К августу они стояли на подступах к Сталинграду и одновременно рвались в горы Кавказа. Казалось, успех неизбежен.","Но чем дальше, тем хуже. Советское командование осознало серьёзность угрозы и начало перебрасывать резервы. Кроме того, Кавказ оказался не совсем пустыней, а Сталинград — не просто точкой на карте, а бастионом с волей к жизни крепче немецкой логистики.","«Блау» показала всё: и мощь вермахта, и его уязвимость. Удары были сильными, но непоследовательными. Вместо быстрого захвата нефти и Волги, немцы увязли — в километрах, в людях, в упрямом сопротивлении. Это наступление стало прологом к самому кровавому сражению войны — битве за Сталинград.","Операция «Блау» — классический пример того, как Гитлер любил расширять фронт быстрее, чем штаб успевал рисовать карты. И как армия, размахнувшись, может потерять равновесие и рухнуть. Громко."],timeline:[{date:"28 июня 1942 г.",title:"Начало операции «Блау»",description:"Немцы начинают наступление на юг СССР."}],photos:[],coordinates:[48.708,44.5133]},{id:"stalingrad-battle",title:"Сталинградская битва",date:"17 июля 1942 г.",coverImage:"https://culture38.ru/app/uploads/2023/02/01-e1675234287100.jpg",shortDescription:"Одно из самых кровавых сражений в истории человечества. Ад на земле.",description:["Сталинградская битва — это не просто сражение. Это мясорубка, поставленная на промышленные рельсы. Один из самых кровавых конфликтов в истории человечества, где война перестала быть фронтом и превратилась в каждый дом, каждую лестницу, каждую руину.","Началась она 17 июля 1942 года, как продолжение немецкой операции «Блау». Немцы рвались к Волге, чтобы перерезать важнейшую транспортную артерию, парализовать снабжение и обеспечить контроль над южным направлением. Город на Волге, носящий имя Сталина, стал символической и стратегической целью. А когда Гитлеру что-то становилось «символом», он начинал действовать с удвоенной глупостью.","С августа 1942 года начались ожесточённые уличные бои. Немцы методично разрушали город бомбардировками, превращая его в груды кирпича — а потом шли в наступление, где каждый подвал, лестничная клетка и канализационный люк становились плацдармом обороны. Советские войска, под командованием генерала Чуйкова, буквально вгрызались в землю, не давая врагу закрепиться.","Настоящий перелом начался в ноябре. 19 ноября 1942 года Красная армия начала контрнаступление — операцию «Уран». Цель — окружить немецкую 6-ю армию под командованием фельдмаршала Паулюса. В течение нескольких дней ударные клинья прорвали фланги, обороняемые румынскими и итальянскими частями, и 23 ноября кольцо замкнулось.","Штаб Паулюса остался внутри. Немцы отказались от попыток прорыва, надеясь на снабжение с воздуха (спасибо Герингу за его завышенное ЧСВ). Это закончилось, мягко говоря, провалом. В январе 1943 года советские войска начали штурм внутреннего «котла». 2 февраля Паулюс сдался — и стал первым немецким фельдмаршалом, взятым в плен.","Цена победы была чудовищной. По разным оценкам, обе стороны потеряли около 2 миллионов человек — убитых, раненых, пленных, пропавших без вести. Город был полностью разрушен, но не сдался. Победа под Сталинградом стала переломным моментом войны: с этого момента инициатитива окончательно перешла к СССР.","Сталинград — это не просто география. Это точка на шкале человеческой выносливости, где всё — кроме воли — было уничтожено."],timeline:[{date:"17 июля 1942 г.",title:"Начало Сталинградской битвы",description:"Начало ожесточённых боёв за город на Волге."}],photos:[],coordinates:[48.708,44.5133]},{id:"paulus-capitulation",title:"Капитуляция армии Паулюса под Сталинградом",date:"2 февраля 1943 г.",coverImage:"https://mf.b37mrtl.ru/russian/images/2023.02/original/63da4146ae5ac97d2b530f9f.jpeg",shortDescription:"6-я армия сдалась. Гитлер в истерике, СССР ликует.",description:["2 февраля 1943 года завершилась Сталинградская битва — и вместе с ней рухнул миф о непобедимости немецкой армии. В этот день капитулировала 6-я армия вермахта под командованием фельдмаршала Фридриха Паулюса. Это стало не просто военной победой — это был психологический надлом, стратегический поворот, и по сути — начало конца Третьего рейха.","После успешного советского контрнаступления (операция «Уран») в ноябре 1942 года, немецкие войска оказались в полном окружении. Более 300 тысяч солдат и офицеров оказались в котле под Сталинградом. Командование Германии настаивало: 'Ни шагу назад, снабжение с воздуха, всё будет хорошо.' Ну, спойлер: не было.","Паулюс, запертый в развалинах города, до последнего пытался поддерживать оборону. Гитлер в отчаянной попытке вдохновить своего генерала повысил его в фельдмаршалы — мол, фельдмаршалы не сдаются. Паулюс воспринял это скорее как намёк на самоубийство, но решил: «Нет уж, спасибо. Я лучше поживу.» И сдался вместе с остатками своей армии.","Из 300 тысяч человек, попавших в котёл, лишь около 90 тысяч пошли в плен. До дома в итоге вернулись менее 6 тысяч. Остальные — остались в замёрзшей, искалеченной, разрушенной земле Сталинграда.","Эта капитуляция стала символом перелома в войне. Впервые за всю кампанию Германия не только проиграла сражение, но и понесла такое унизительное, громкое, публичное поражение, что его эхо прокатилось по всему миру. Британские газеты писали: 'Теперь видно, кто кого', а в СССР город Сталина стал синонимом непобедимого сопротивления.","Сталинград не просто выстоял — он похоронил целую армию. И с этого момента советское наступление стало не исключением, а новой нормой."],timeline:[{date:"2 февраля 1943 г.",title:"Капитуляция Паулюса",description:"Окружённая армия Паулюса сдалась Красной армии."}],photos:[],coordinates:[48.708,44.5133]},{id:"kursk-battle",title:"Курская битва",date:"5 июля – 23 августа 1943 г.",coverImage:"https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_679f093efa13e209b0ae0674_679f0a5152086544920f6d57/scale_1200",shortDescription:"Самая большое танковое сражение в истории. Немцы снова проиграли, фронт больше не отходит назад.",description:["Курская битва стала поворотным моментом в Великой Отечественной войне и одновременно самым крупным танковым сражением в истории человечества. После поражения под Сталинградом Германия отчаянно пыталась вернуть инициативу. Операция получила кодовое название «Цитадель» — потому что звучит пафосно, и потому что кто-то в ставке Гитлера ещё верил в магию громких слов.","План был прост: ударить по Курскому выступу — огромной дуге, образовавшейся между Орлом и Белгородом. С севера наступала группа армий «Центр», с юга — «Юг». Цель — окружить и уничтожить крупные советские силы, после чего перейти в общее наступление. Но Красная армия больше не была той же, что в 1941 году. Разведка работала, оборона готовилась заранее: глубоко эшелонированная, с минными полями, противотанковыми рубежами и тщательно выверенными артиллерийскими зонами.","5 июля 1943 года началась немецкая атака. И почти сразу стало ясно: лёгкой прогулки не будет. Завязались ожесточённые бои, особенно в районе Прохоровки — где 12 июля произошло само то, что потом вошло в учебники как крупнейшее танковое сражение. С обеих сторон в бой вступили сотни танков. Земля плавилась, техника горела, люди гибли сотнями в течение одного дня. Победителя в этом конкретном бою не назовёшь, но стратегически — немцы застряли.","После неудачи операции «Цитадель» Красная армия перешла в контрнаступление. 5 августа был освобождён Орёл, 23 августа — Харьков. Инициатива окончательно перешла к СССР, а вермахт впервые осознал: наступать больше не получится. Весь Восточный фронт начал медленно, но неотвратимо катиться на запад.","Курская битва стала символом окончательного слома наступательной мощи Германии. Это было как технический нокаут: вроде ещё стоишь, но больше уже не бьёшь. А Красная армия, набравшая обороты, теперь шла только вперёд."],timeline:[{date:"5 июля – 23 августа 1943 г.",title:"Курская битва",description:"Крупнейшее танковое сражение Второй мировой войны."}],photos:[],coordinates:[51.7373,36.1873]},{id:"ukraine-liberation",title:"Освобождение Левобережной Украины",date:"26 августа – декабрь 1943 г.",coverImage:"https://cdn.iz.ru/sites/default/files/styles/1065xh/public/photo_item-2024-08/RIA_5479159.HR_.jpg?itok=NdOkxUvw",shortDescription:"Началось массовое изгнание немцев из СССР. Процесс пошёл.",description:["После победы на Курской дуге Красная армия больше не останавливалась. Впервые за два года война перестала быть серией оборонительных операций — теперь она двигалась только вперёд. Освобождение Левобережной Украины стало одним из ключевых этапов этого наступательного периода. Речь шла не просто о территориях — это была борьба за огромный промышленный и сельскохозяйственный регион, логистически важный и символически значимый.","Операция началась 26 августа 1943 года. Сразу несколько фронтов — Воронежский, Степной, Юго-Западный — перешли в наступление на широком участке. Немцы пытались организовать оборону, но их стратегическая инициатива была потеряна после Курска. Их линии обороны прорвались, снабжение нарушалось, мораль — падала.",'Города освобождались один за другим: Харьков — 23 августа, Полтава — 23 сентября, Днепропетровск — в октябре. Советская армия использовала манёвренные действия, танковые прорывы, артподготовки и, конечно, пресловутое "давление числом". Немцы отступали, часто не успевая организовать полноценную оборону.',"Но главное — Красная армия вышла к Днепру. Перед войсками встала новая задача: форсировать одну из крупнейших рек Европы, под огнём, с минимальной техникой и без мостов. Это будет следующим этапом. А пока — весь Левобережный регион оказался под контролем СССР.","Освобождение Украины стало не только военным успехом, но и важнейшим политическим сигналом: оккупация может быть сломлена. Люди, пережившие два года террора, начали возвращаться к жизни — хотя война ещё не ушла, а впереди ждали новые битвы."],timeline:[{date:"26 августа – декабрь 1943 г.",title:"Освобождение Украины",description:"Массовое изгнание немцев с территории СССР."}],photos:[],coordinates:[50.4501,30.5234]},{id:"dnepr-crossing",title:"Форсирование Днепра",date:"сентябрь–ноябрь 1943 г.",coverImage:"https://waralbum.ru/wp-content/uploads/2016/05/Sovet_soldati-forsiruiut-Vislu_1945.jpg",shortDescription:"Переправа через реку под огнём. На чём попало, часто вплавь. Героизм за гранью разумного.",description:["После освобождения Левобережной Украины Красная армия вплотную подошла к Днепру — огромной природной преграде, длиной более 2 000 км и шириной в некоторых местах до 3 км. Немцы рассчитывали, что река станет новым «непреодолимым» рубежом, своего рода восточным аналогом Атлантического вала. Они начали укреплять правый берег, создавая так называемый «Восточный вал» — систему оборонительных рубежей, траншей, дотов, минных полей и артиллерийских позиций.","Но советское командование решило не ждать. Уже с конца сентября 1943 года части Красной армии начали стремительное форсирование Днепра — часто буквально с ходу, без подготовки, понтонов и достаточного оснащения. Многие солдаты переплывали реку на плотах, досках, бочках или вплавь. Кто-то шёл по воде с винтовкой над головой. Это был не столько военный манёвр, сколько массовое, безумное и героическое пересечение водной стихии под огнём.","Особенно тяжёлые бои разгорелись за плацдармы у Каневa, Днепропетровска, Запорожья и Киева. Немцы отчаянно сопротивлялись, пытаясь сбросить наступающие части обратно в реку, но советские войска, несмотря на тяжёлые потери, удержали захваченные участки. Артиллерия, штурмовые группы, инженерные батальоны работали на пределе возможностей.","К ноябрю удалось закрепиться сразу на нескольких плацдармах, и Красная армия начала расширять их, готовясь к освобождению Киева и последующему наступлению на Правобережную Украину.","Форсирование Днепра стало не просто военной операцией — это был акт отчаянной решимости, символ настойчивости и человеческой выносливости. Потери были огромными: только по официальным данным, более 400 тысяч человек убитыми, ранеными и пропавшими без вести. Но операция увенчалась успехом: Днепр был преодолён, и путь на запад был открыт."],timeline:[{date:"сентябрь–ноябрь 1943 г.",title:"Форсирование Днепра",description:"Преодоление крупнейшей водной преграды и прорыв «Восточного вала»."}],photos:[],coordinates:[50.4501,30.5234]},{id:"leningrad-lift",title:"Полный прорыв блокады Ленинграда",date:"27 января 1944 г.",coverImage:"https://cdn.culture.ru/images/f2e9d7d7-53b2-5058-b2a6-47f8bc12f610",shortDescription:"872 дня ада закончились. Город не сдался. Кто молодец? Ленинград молодец.",description:["27 января 1944 года вошло в историю как день окончательного снятия блокады Ленинграда. Спустя почти два с половиной года — 872 дня — город, окружённый, изолированный, истощённый, но не покорённый, был наконец освобождён от смертельного кольца. Это была не просто военная операция — это был исторический акт выживания.","Началось всё в январе 1943 года, когда в ходе операции «Искра» был прорван южный участок блокады и создан узкий коридор к «большой земле». Через него началась частичная эвакуация и доставка грузов, но основной фронт оставался вблизи города, и артобстрелы, бомбардировки и гибель от голода продолжались.","Лишь в январе 1944 года, в ходе Ленинградско-Новгородской стратегической операции, Красная армия нанесла мощные удары по немецким позициям. Войска Ленинградского и Волховского фронтов освободили Красное Село, Пушкин, Павловск и вышвырнули врага с подступов к городу. 27 января немецкие части были окончательно отброшены. Над городом вновь зазвучала тишина, в которой не было взрывов.","Снятие блокады стало символом триумфа человеческой стойкости. Ленинград пережил всё: бомбардировки, голод, зимы без отопления, смерть от истощения, обстрелы и страх. Более миллиона человек погибли за эти годы, половина — от голода. И всё же город продолжал жить, работать, сражаться.","Вечером 27 января в Ленинграде прогремел праздничный салют — первый за всю войну. Это был не просто фейерверк — это было доказательство, что даже в аду можно остаться городом, а не руинами."],timeline:[{date:"27 января 1944 г.",title:"Прорыв блокады",description:"Полное снятие блокады Ленинграда."}],photos:[],coordinates:[59.9375,30.3086]},{id:"bagration",title:"Операция «Багратион»",date:"23 июня – 29 августа 1944 г.",coverImage:"https://avatars.mds.yandex.net/get-kinopoisk-image/6201401/c8461efa-ea06-404c-8f3f-37ec7e16f1cf/1920x",shortDescription:"Разгром группы армий «Центр», освобождение Беларуси. Самая успешная операция войны по масштабам.",description:["Операция «Багратион» — крупнейшее наступление Красной армии за всю Вторую мировую войну. Её масштабы были столь огромны, что даже слово «наступление» звучит скромно. Это была стратегическая мясорубка с географией в комплекте, в ходе которой была практически уничтожена немецкая группа армий «Центр» и полностью освобождена территория Беларуси.","Операция началась 23 июня 1944 года, почти ровно через три года после начала войны — и выглядела как долгожданный реверс. Советские войска нанесли удары сразу на нескольких направлениях, применяя тактику глубоких прорывов, охватов и так называемых «котлов». Группировка вермахта оказалась застигнута врасплох: немцы ожидали удара южнее, а основное наступление пошло через болотистую, труднопроходимую местность — туда, где якобы «нельзя воевать». Ну, Красная армия сказала: «Смотрите, можно».","Главным успехом стала ликвидация немецкой группы армий «Центр». По сути, это была стратегическая казнь: три немецкие армии были разгромлены, более 400 тысяч солдат выведены из строя — убиты, ранены или взяты в плен. Гитлер бесновался, но изменить ход событий уже не мог.","Минск был освобождён 3 июля, за ним — Витебск, Орша, Бобруйск, Гродно. Войска продвигались до 30 километров в день, ломая остатки обороны и уходя всё дальше вглубь оккупированной территории.","«Багратион» стал не просто военным триумфом. Это было моральное возмездие. Беларусь, изувеченная и истощённая за три года оккупации, была возвращена. Восточный фронт обрушился для Германии, как карточный домик, собранный мокрыми руками.","К осени 1944 года Красная армия вышла к границам Польши и Восточной Пруссии. А вермахт больше никогда не оправился от удара, полученного в этой операции."],timeline:[{date:"23 июня – 29 августа 1944 г.",title:"Операция «Багратион»",description:"Разгром группы армий «Центр» и освобождение Беларуси."}],photos:[],coordinates:[53.9045,27.5615]},{id:"baltic-poland-liberation",title:"Освобождение Прибалтики, Польши, части Румынии и Югославии",date:"июль–октябрь 1944 г.",coverImage:"https://waralbum.ru/wp-content/uploads/2010/11/katyusha.jpg",shortDescription:"Советская армия шагает по Европе. Танки громят, немецкие войска пятятся.",description:["Вторая половина 1944 года стала периодом стремительного освобождения Восточной Европы от нацистской оккупации. После разгрома группы армий «Центр» в операции «Багратион», Красная армия перешла к масштабному наступлению сразу по нескольким направлениям. Советские войска буквально выбивали немцев с занятых позиций, продвигаясь через Прибалтику, Польшу, Румынию и Югославию. И всё это — в одном историческом порыве, как будто решили закончить войну в режиме ускоренного прохождения.","В Прибалтике сражения шли ожесточённые: немецкие войска, понимая стратегическую важность региона, оказывали яростное сопротивление. Однако уже к осени советские армии освободили Таллин, Ригу, Вильнюс, Каунас — почти полностью вытеснив оккупационные силы. Лишь часть немецких войск осталась в Курляндском котле — но, по сути, это была военная кладовка с замком.","Параллельно шло наступление на Польшу. Советские войска продвигались к Варшаве, форсировали Вислу и вышли к границам Восточной Пруссии. Хотя судьба самого Варшавского восстания — отдельная и болезненная история, именно летом и осенью 1944 года был освобождён значительный кусок польской территории.","На юге фронта в августе началась Ясско-Кишинёвская операция. Это была быстрая и эффективная военная расправа, в результате которой Германия потеряла Румынию как союзника. Король Михаил I устроил государственный переворот и заявил: «Ну всё, мы теперь против Гитлера» — типичный дипломатический разворот на 180°, если выживать стало выгоднее, чем сотрудничать.","А в Югославии Красная армия и югославские партизаны под командованием Тито освободили Белград. Осень 1944 года превратилась в парад освобождённых столиц, где советские солдаты появлялись чаще, чем местные поезда.","Это наступление стало началом завершающего акта войны. Красная армия уже находилась в пределах Центральной Европы. До Берлина оставалось меньше года. Германия уже не отбивалась — она пыталась не распасться на ходу."],timeline:[{date:"июль–октябрь 1944 г.",title:"Освобождение Европы",description:"Советская армия освобождает страны Восточной Европы."}],photos:[],coordinates:[52.2297,21.0122]},{id:"belgrade-liberation",title:"Освобождение Белграда",date:"20 октября 1944 г.",coverImage:"https://avatars.dzeninfra.ru/get-zen_doc/1654267/pub_5cdfd4899ad6b100b3c9e021_5cdfde88044f7f00b36370bc/scale_1200",shortDescription:"Совместно с югославскими партизанами. Сталин и Тито делают селфи.",description:["20 октября 1944 года советские войска совместно с югославскими партизанами освободили Белград — столицу Югославии. Это событие стало ключевым моментом в освобождении Балканского полуострова от нацистской оккупации и важным политическим жестом: Красная армия входила в Центральную Европу не только как военная сила, но и как новый фактор влияния.","К тому времени Югославия уже несколько лет сопротивлялась оккупации. С 1941 года в стране действовали мощные партизанские формирования, возглавляемые Иосипом Брозом Тито. Немцы не могли полностью подавить сопротивление, несмотря на жёсткие меры и карательные операции. Но для окончательного освобождения столицы требовалась мощная поддержка снаружи — и она пришла осенью 1944 года.","Советские войска 3-го Украинского фронта, совместно с югославскими отрядами, начали наступление на Белград в середине октября. Бои были ожесточёнными, особенно в городской черте. Немцы пытались удержать город, который имел важное стратегическое значение, но силы были неравны.","20 октября Белград был освобождён. Это стало одним из редких эпизодов, когда регулярная армия и партизаны действовали синхронно и эффективно. Победа не только изгнала оккупантов, но и стала символом союзничества между СССР и движением Тито — хотя после войны у них будут свои очень специфические разногласия.","После взятия Белграда началось дальнейшее наступление на Балканах. Освобождались Венгрия, Болгария, Албания — и фронт всё ближе подбирался к южным границам нацистской Германии."],timeline:[{date:"20 октября 1944 г.",title:"Освобождение Белграда",description:"Советские войска и партизаны освобождают столицу Югославии."}],photos:[],coordinates:[44.7866,20.4489]},{id:"vistula-oder",title:"Висло-Одерская операция",date:"12 января 1945 г.",coverImage:"https://cdn.culture.ru/images/d74d9530-4893-5d00-bd66-17ec133507f9",shortDescription:"Молниеносное наступление. Советские войска в 70 км от Берлина. Немцы в панике.",description:["В январе 1945 года Красная армия провела одну из самых стремительных и эффективных операций за всю войну — Висло-Одерскую. Начав наступление из района Сандомира, советские войска буквально прорвались через Польшу и к началу февраля вышли к Одеру — последнему крупному водному барьеру на пути к Берлину. До столицы Третьего рейха оставалось каких-то 70 километров. Для сравнения: это как проехать два метро и выйти прямо в логове врага.","Операция началась 12 января. Немецкая оборона была ослаблена: часть войск перебросили на Западный фронт, чтобы остановить наступление союзников в Арденнах. Советское командование воспользовалось этим как профи. После мощной артиллерийской подготовки началось масштабное наступление 1-го Белорусского и 1-го Украинского фронтов. За пять недель они продвинулись более чем на 500 километров.","Города освобождались один за другим: Варшава — 17 января, Краков — 19 января, Лодзь, Познань, Бреслау — всё падало под натиском наступающих армий. Немецкая оборона просто рассыпалась. Войска шли на пределе, но почти без пауз — скорость была критической.","Висло-Одерская операция стала логичным продолжением всех предыдущих наступлений и одновременно прологом к последнему акту войны. Красная армия вышла к Одру, заняла плацдармы на его западном берегу, и перед ней остался последний рывок — штурм Берлина.","Психологически это был удар по Германии такой силы, что там начали эвакуировать школы, архивы и паниковать на уровне командования. На Восточном фронте стало ясно: это конец. Только вопрос — когда именно."],timeline:[{date:"12 января 1945 г.",title:"Висло-Одерская операция",description:"Советские войска выходят к границам Германии."}],photos:[],coordinates:[52.2297,21.0122]},{id:"budapest-liberation",title:"Освобождение Будапешта",date:"13 февраля 1945 г.",coverImage:"https://cdn5.vedomosti.ru/image/2020/3w/1ff20f/original-1umz.jpg",shortDescription:"Венгрия больше не союзник Германии.",description:["13 февраля 1945 года завершилось одно из самых продолжительных и ожесточённых сражений финального этапа войны — битва за Будапешт. После 50-дневной осады советские войска взяли венгерскую столицу, выбив оттуда немецко-венгерский гарнизон и фактически выведя Венгрию из войны.","Боевые действия за город начались ещё в конце декабря 1944 года. Красная армия подошла к Будапешту в ходе общего наступления на Балканах и начала окружение. 24 декабря кольцо сомкнулось — в котёл попали около 80 тысяч немецких и венгерских солдат. Вместо капитуляции началась долгая и кровавая оборона.","Бои шли буквально за каждый квартал. Центр города, включая исторический замок, мосты через Дунай, улицы и подземные коммуникации, стал ареной ожесточённых столкновений. Немцы предпринимали несколько попыток деблокировать гарнизон, но все они были отражены. Тем временем внутри окружения запасы заканчивались, а сопротивление становилось всё более отчаянным.","В ночь на 13 февраля гарнизон Будапешта капитулировал. Улицы были в руинах, город разрушен, но стратегическая цель достигнута: Венгрия фактически перестала существовать как союзник Германии. Это был один из последних ударов по системе Третьего рейха — его союзники либо пали, либо сбежали, либо начали делать вид, что «мы вообще-то против были, просто молчали».","Освобождение Будапешта открыло путь к Австрии и Вене. Восточный фронт двигался к финалу. До Берлина оставались считаные недели."],timeline:[{date:"13 февраля 1945 г.",title:"Освобождение Будапешта",description:"Советские войска освобождают столицу Венгрии."}],photos:[],coordinates:[47.4979,19.0402]},{id:"dresden-bombing",title:"Дрезденская бомбардировка",date:"13–15 февраля 1945 г.",coverImage:"https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_67afa06f36a76d12eab7e612_67afa1f736a76d12eab832eb/scale_1200",shortDescription:"Союзники решили показать, что у них тоже есть спорные методы.",description:["В середине февраля 1945 года британская и американская авиация провела одну из самых разрушительных бомбардировок в истории — уничтожение Дрездена. Этот немецкий город, известный своей архитектурой, музеями и почти отсутствием военной промышленности, был превращён в огненное пекло за несколько дней массированных авиаударов.","Операция началась вечером 13 февраля. Сначала удар нанесла британская Королевская авиация (RAF), а на следующий день — американские бомбардировщики. За 72 часа на город было сброшено более 3 900 тонн бомб, включая зажигательные. Целью официально считались железнодорожные узлы и коммуникации, но по факту весь центр города оказался под ковровым ударом.","В результате возник огненный шторм — температурой более 1000 °C. Пламя засасывало кислород, улицы превращались в гигантские печи. Люди задыхались в убежищах, плавились на мостовых, погибали целыми семьями. По разным оценкам, погибло от 25 до 35 тысяч человек — почти все мирные жители.","Бомбардировка Дрездена до сих пор вызывает острые споры. Для союзников это был удар по тыловой инфраструктуре накануне наступления на Берлин. Для многих историков — это акт устрашения и символ избыточной силы. Для Германии — национальная травма и повод обвинять Запад в «собственных преступлениях войны».","Город был стёрт с лица земли. Знаменитая Фрауэнкирхе (церковь Богоматери), дворцы, музеи, картинные галереи — всё лежало в пепле. Дрезден стал не просто жертвой войны, а её напоминанием: разрушение — это не всегда победа."],timeline:[{date:"13–15 февраля 1945 г.",title:"Бомбардировка Дрездена",description:"Союзники уничтожают город авиацией."}],photos:[],coordinates:[51.0504,13.7373]},{id:"berlin-battle",title:"Битва за Берлин",date:"16 апреля – 2 мая 1945 г.",coverImage:"https://mf.b37mrtl.ru/rbthmedia/images/2020.04/original/5ea0ab7a85600a4c744f0a70.jpg",shortDescription:"Финальное сражение в Европе. Водружение Знамени Победы над Рейхстагом.",description:["Битва за Берлин — финальное, яростное и безжалостное сражение в Европе. Здесь всё было на пределе: темп, цена, символика. Это был момент, когда Красная армия прорвалась в самое сердце Третьего рейха и вынесла приговор всей нацистской машине.","Наступление началось 16 апреля 1945 года. С востока и с юга к Берлину шли войска 1-го Белорусского фронта под командованием Жукова и 1-го Украинского фронта под командованием Конева. На подступах к столице немцы создали несколько линий обороны, включая мощную линию на Зееловских высотах. Там и развернулся первый ад: многотысячные артобстрелы, танковые атаки, рукопашные схватки, и всё это — под дождём, грязью и под огнём.","Несмотря на ожесточённое сопротивление, Красная армия прорвалась. Уже 25 апреля город оказался полностью окружён. Немецкое командование издавало приказы, которые никто уже не мог выполнить. Снабжение — ноль, связи — хаос, уличные бои — ад.","Внутри города каждый квартал превращался в крепость. Танки сражались на мостовых, пехота — в подвалах. Улицы Берлина, когда-то бывшие символом модерна и могущества, стали ареной тотального разрушения.","30 апреля Гитлер покончил с собой в своём бункере. 1 мая начались переговоры о капитуляции гарнизона. 2 мая Берлин пал. Знамя Победы, водружённое над Рейхстагом, стало иконой эпохи — символом триумфа, но и финальной точки одной из самых разрушительных войн в истории человечества.","Город лежал в руинах. Почти 80 тысяч советских солдат погибли в битве за столицу рейха. Но война закончилась именно там — в бетонных обломках империи, которая мечтала о вечности, а закончилась на подземной лестнице под горящим городом."],timeline:[{date:"16 апреля 1945 г.",title:"Начало наступления на Берлин",description:"Красная армия начинает штурм города."},{date:"25 апреля 1945 г.",title:"Окружение Берлина",description:"Город полностью блокирован советскими войсками."},{date:"30 апреля 1945 г.",title:"Смерть Гитлера",description:"Гитлер совершает самоубийство в бункере."},{date:"2 мая 1945 г.",title:"Падение Берлина",description:"Берлин капитулировал. Гарнизон сдался в плен."}],photos:[],coordinates:[52.52,13.405]},{id:"hitler-death",title:"Самоубийство Гитлера",date:"30 апреля 1945 г.",coverImage:"https://ustinka.kz/upload/iblock/165/p9m5attgvp0g61785rbsrcng6anfhb5r/fsb_raskryla_novye_detali_samoubiystva_gitlera_v_1945_godu.jpg",shortDescription:"Фюрер покинул планету. Все выдохнули.",description:[`30 апреля 1945 года Адольф Гитлер покончил с собой в подземном бункере под Рейхсканцелярией в центре осаждённого Берлина. Этот акт стал не просто личной трагикомедией диктатора — он стал символическим концом нацистской Германии.

К этому моменту столица рейха была окружена, здание Рейхстага уже штурмовали советские части, а Знамя Победы готовилось к установке на крыше, где когда-то развевались флаги с чёрной свастикой. Гитлер отказался покинуть Берлин, хотя окружение умоляло его эвакуироваться. Вместо этого он решил уйти так, как привык — по сценарию, написанному им самим. Только сцена была уже в руинах.

Он женился на Еве Браун за сутки до смерти, а затем оба покончили с собой. По одной из версий — она приняла яд, он выстрелил себе в голову. Их тела были сожжены — в тщетной попытке избежать посмертного унижения. Остатки охраны пытались скрыть факт смерти, но было поздно: все знали, что это — финал.

Смерть Гитлера не остановила войну мгновенно, но стала моральной точкой невозврата. Символ режима исчез в момент, когда его войска сдавались по всей Европе, союзники брали города, а советские солдаты уже поднимали флаг над Рейхстагом.

Нацистская Германия, созданная на крови, страхе и пропаганде, закончилась в бункере. Без фанфар, без триумфа, без даже единой уважаемой ноты. Только труп диктатора в бетонной могиле, под рушащейся империей.`],timeline:[{date:"30 апреля 1945 г.",title:"Смерть Гитлера",description:"Гитлер совершает самоубийство в бункере."}],photos:[],coordinates:[52.52,13.405]},{id:"reichstag-capture",title:"Захват Рейхстага",date:"2 мая 1945 г.",coverImage:"https://img.tsargrad.tv/cache/2/1/-01.png/w1056h594fill.png",shortDescription:"Красное знамя водружено. Фото становится легендарным. СССР празднует.",description:["2 мая 1945 года советские войска захватили здание Рейхстага в центре Берлина. Это событие стало визуальной и исторической кульминацией всей Великой Отечественной войны. Красное знамя, водружённое над руинами Третьего рейха, стало символом окончательной победы над нацизмом.",'Штурм Рейхстага начался 30 апреля, одновременно с последними боями в городе. Здание, имевшее скорее символическое, чем стратегическое значение, превратилось в последнюю крепость идеологии. Несмотря на то, что парламент в нём давно не заседал, именно Рейхстаг считался "сердцем Германии" — и именно его захват должен был стать знаковым актом финальной победы.',"Штурм был кровавым: лестничные пролёты, коридоры, залы — всё оборонялось с ожесточением. Немецкие солдаты и офицеры понимали, что проиграли, но продолжали сражаться за каждый метр. 1 мая советские подразделения прорвались в здание, и уже к утру 2 мая оно было полностью занято.","Среди тех, кто водрузил знамя, были сержант Михаил Егоров, младший сержант Мелитон Кантария и лейтенант Алексей Берест — их имена впоследствии стали частью мифологии Победы. Фото Евгения Халдея с флагом над Рейхстагом облетело весь мир — пусть и позже будет немного отретушировано.","Штурм Рейхстага стал не просто победой в конкретном сражении — это была историческая метафора: вот, мол, на месте, где строили империю, теперь развевается флаг тех, кто её сломал.","Спустя несколько дней, 8 мая, Германия официально капитулировала. Но именно 2 мая стало эмоциональной точкой — когда война на глазах превратилась в Победу."],timeline:[{date:"2 мая 1945 г.",title:"Захват Рейхстага",description:"Красное знамя водружено над Рейхстагом."}],photos:[],coordinates:[52.52,13.405]},{id:"germany-capitulation",title:"Капитуляция Германии",date:"8–9 мая 1945 г.",coverImage:"https://a.d-cd.net/69234aes-1920.jpg",shortDescription:"В Берлине. Официальная Победа. Всё. Конец. Ура.",description:["Ночью с 8 на 9 мая 1945 года в пригороде Берлина, в Карлсхорсте, был подписан Акт о безоговорочной капитуляции нацистской Германии. Таким образом официально завершилась Вторая мировая война в Европе. Страшнейший конфликт в истории человечества подошёл к концу — и это было не просто военное событие, это был цивилизационный перелом.","Подписание акта происходило в присутствии представителей союзников: от СССР — маршал Георгий Жуков, от Великобритании — Артур Теддер, от США — генерал Карл Спаац, от Франции — Жан де Латтр де Тасиньи. Со стороны Германии — фельдмаршал Кейтель, адмирал фон Фридебург и генерал Штумпф. Их задача была проста: расписаться под капитуляцией, потому что больше они не могли предложить ничего.","Акт о капитуляции был подписан поздно вечером 8 мая, но по московскому времени это уже было 9 мая — отсюда и разница в датах празднования: на Западе — 8-го, в СССР и постсоветском пространстве — 9-го. Так появилась День Победы — дата, которая для миллионов людей означает конец кошмара.","В тот день по всей стране начали греметь салюты, люди выходили на улицы, плакали, обнимались, танцевали, молчали. Для одних это был праздник, для других — облегчение, для третьих — горечь: слишком велика оказалась цена.","Война закончилась. Победа пришла. И с ней — тишина, в которой больше не было крика с неба, воя сирен и шагов по бетонным улицам. Только эхо выстрелов, которое ещё долго будет звучать в истории."],timeline:[{date:"8–9 мая 1945 г.",title:"Капитуляция Германии",description:"Подписание акта о капитуляции. Победа!"}],photos:[],coordinates:[52.52,13.405]}],rE=()=>{const[t,e]=A.useState(!1),[n,i]=A.useState(!1),r=Io();return A.useEffect(()=>{const s=()=>{i(window.scrollY>20)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[]),A.useEffect(()=>{e(!1)},[r.pathname]),C.jsx("nav",{className:`sticky top-0 z-10 transition-all duration-300 ${n?"bg-black/80 backdrop-blur-md":"bg-transparent"}`,children:C.jsxs("div",{className:"container mx-auto px-4 py-4 max-w-6xl",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx(Ri,{to:"/",className:"text-xl font-medium tracking-wider hover:text-gray-300 transition-colors",children:"ВЕЛИКАЯ ОТЕЧЕСТВЕННАЯ ВОЙНА"}),C.jsx("button",{className:"md:hidden focus:outline-none",onClick:()=>e(!t),children:t?C.jsx(iE,{size:24}):C.jsx(nE,{size:24})}),C.jsxs("div",{className:"hidden md:flex space-x-6",children:[C.jsx(Ri,{to:"/",className:"hover:text-gray-300 transition-colors",children:"Главная"}),C.jsxs("div",{className:"relative group",children:[C.jsx("button",{className:"hover:text-gray-300 transition-colors",children:"События"}),C.jsx("div",{className:"absolute left-0 mt-2 w-56 bg-black/90 shadow-lg rounded-md overflow-hidden transform scale-0 group-hover:scale-100 transition-transform origin-top",children:gt.map(s=>C.jsx(Ri,{to:`/events/${s.id}`,className:"block px-4 py-2 hover:bg-gray-800 transition-colors",children:s.title},s.id))})]})]})]}),t&&C.jsxs("div",{className:"md:hidden bg-black/95 mt-4 rounded-md p-4 space-y-3",children:[C.jsx(Ri,{to:"/",className:"block hover:text-gray-300 transition-colors",children:"Главная"}),C.jsxs("div",{className:"pt-2 border-t border-gray-800",children:[C.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"События:"}),C.jsx("div",{className:"space-y-2 pl-2",children:gt.map(s=>C.jsx(Ri,{to:`/events/${s.id}`,className:"block hover:text-gray-300 transition-colors",children:s.title},s.id))})]})]})]})})},sE=()=>C.jsx("footer",{className:"border-t border-gray-800 bg-black/40 backdrop-blur-sm mt-16",children:C.jsx("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:C.jsx("div",{className:"flex justify-center",children:C.jsxs("div",{className:"max-w-2xl text-center",children:[C.jsx("h3",{className:"text-lg font-medium mb-4",children:"О проекте"}),C.jsx("p",{className:"text-sm text-gray-400",children:"Этот сайт посвящен событиям Великой Отечественной войны 1941-1945 гг. и подвигу советского народа в борьбе против фашизма."})]})})})}),oE=()=>C.jsxs("div",{className:"flex flex-col min-h-screen",children:[C.jsx(rE,{}),C.jsx("main",{className:"flex-grow container mx-auto px-4 py-8 max-w-6xl",children:C.jsx(Wx,{})}),C.jsx(sE,{})]}),q_=({title:t,subtitle:e,buttonText:n,buttonLink:i,backgroundImage:r})=>C.jsxs("div",{className:"relative h-[70vh] flex items-center justify-center text-center overflow-hidden mb-16",children:[r&&C.jsx("div",{className:"absolute inset-0 z-0",style:{backgroundImage:`url(${r})`,backgroundPosition:"center",backgroundSize:"cover",filter:"grayscale(100%) brightness(0.3) contrast(1.2)"}}),C.jsxs("div",{className:"relative z-1 max-w-3xl px-4",children:[C.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold leading-tight mb-6",children:t}),e&&C.jsx("p",{className:"text-lg md:text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:e}),n&&i&&C.jsx(Ri,{to:i,className:"inline-block px-6 py-3 border-2 border-white hover:bg-white hover:text-black transition-all duration-300 font-medium tracking-wider",children:n})]})]}),lE=()=>{const[t,e]=A.useState(null),n=A.useRef(null),i=Ma();A.useEffect(()=>{const o=n.current;if(!o)return;let l=1;const a=.6,u=3e3;let c=!1,h;const d=m=>{c||(o.scrollLeft+=a*l,o.scrollLeft>=o.scrollWidth-o.clientWidth?(l=-1,c=!0,h=setTimeout(()=>{c=!1},u)):o.scrollLeft<=0&&(l=1,c=!0,h=setTimeout(()=>{c=!1},u))),requestAnimationFrame(d)},f=requestAnimationFrame(d);return()=>{cancelAnimationFrame(f),clearTimeout(h)}},[]);const r=yh.useMemo(()=>gt.filter(l=>l.timeline!==void 0&&l.timeline.length>0).sort((l,a)=>{const u=d=>{const f=d.match(/(\d{4})/);return f?parseInt(f[1],10):0},c=u(l.date),h=u(a.date);return c===h?0:c-h}),[]);if(r.length===0)return C.jsx("div",{children:"Нет доступных событий"});const s=o=>{i(`/events/${o}`)};return C.jsxs("div",{className:"w-full bg-neutral-900/50 p-8 rounded-lg backdrop-blur-sm",children:[C.jsx("h2",{className:"text-2xl font-bold mb-12 text-center text-gray-100",children:"Хронология Великой Отечественной войны"}),C.jsxs("div",{className:"relative w-full overflow-hidden",children:[C.jsx("div",{className:"absolute w-full h-0.5 bg-white/20 top-6"}),C.jsx("div",{ref:n,className:"flex items-start gap-16 pb-8 overflow-x-auto scrollbar-hide",children:r.map(o=>C.jsxs("div",{className:"relative flex flex-col items-center first:pl-4 last:pr-4",style:{minWidth:"350px"},children:[C.jsx("div",{className:`w-5 h-5 rounded-full cursor-pointer transition-all duration-300 
                  ${t===o.id?"bg-white scale-125":"bg-white/50 hover:bg-white hover:scale-110"}`,onMouseEnter:()=>e(o.id),onMouseLeave:()=>e(null)}),C.jsx("div",{className:"mt-6 text-center text-sm text-gray-400 font-medium",children:o.timeline[0].date}),C.jsxs("div",{className:`mt-6 w-[350px] bg-neutral-800/90 rounded-lg shadow-2xl \r
                  border border-white/10 transition-all duration-300 cursor-pointer\r
                  hover:border-white/20 hover:shadow-2xl hover:-translate-y-1`,onClick:()=>s(o.id),children:[C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-neutral-900/80 to-transparent"}),C.jsx("img",{src:o.coverImage,alt:o.title,className:"w-full h-48 object-cover rounded-t-lg grayscale hover:grayscale-0 transition-all duration-500"})]}),C.jsxs("div",{className:"p-5",children:[C.jsx("h3",{className:"font-bold mb-3 text-gray-100 text-xl",children:o.title}),C.jsx("p",{className:"text-gray-400 text-sm line-clamp-3",children:o.shortDescription})]})]})]},o.id))}),C.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 w-16 bg-gradient-to-r from-neutral-900/50 to-transparent"}),C.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-16 bg-gradient-to-l from-neutral-900/50 to-transparent"})]})]})},aE=()=>C.jsxs("div",{className:"animate-fadeIn",children:[C.jsx(q_,{title:"Великая Отечественная Война",subtitle:"1941-1945: Подвиг и память советского народа",backgroundImage:"https://images.pexels.com/photos/1776444/pexels-photo-1776444.jpeg?auto=compress&cs=tinysrgb&w=1600"}),C.jsx("section",{className:"mb-16",children:C.jsx(lE,{})}),C.jsxs("section",{className:"mb-16",children:[C.jsx("h2",{className:"section-title",children:"О войне"}),C.jsx("p",{className:"mb-6 leading-relaxed",children:"Великая Отечественная война (22 июня 1941 — 9 мая 1945) — война Союза Советских Социалистических Республик против нацистской Германии и её европейских союзников (Венгрии, Италии, Румынии, Финляндии, Словакии и Хорватии)."}),C.jsx("p",{className:"mb-6 leading-relaxed",children:"Важнейшая составная часть Второй мировой войны, завершившаяся победой Красной Армии и безоговорочной капитуляцией вооружённых сил Германии. В Советском Союзе война с Германией и её европейскими союзниками официально называлась Великой Отечественной войной в честь Отечественной войны 1812 года."}),C.jsx("p",{className:"leading-relaxed",children:"Одна из самых кровопролитных войн в истории человечества. В ходе войны погибло более 26 миллионов советских граждан."})]}),C.jsxs("section",{className:"mb-16",children:[C.jsx("h2",{className:"section-title",children:"Ключевые события"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:gt.map(t=>C.jsxs(Ri,{to:`/events/${t.id}`,className:"bg-black/30 hover:bg-black/50 transition-all duration-300 p-6 rounded-md border border-gray-800 hover:border-gray-700 group",children:[C.jsx("div",{className:"h-48 mb-4 overflow-hidden rounded-md",style:{backgroundImage:`url(${t.coverImage})`,backgroundSize:"cover",backgroundPosition:"center",filter:"grayscale(100%) contrast(1.1) brightness(0.7)"}}),C.jsx("h3",{className:"text-xl font-medium mb-2 group-hover:text-white transition-colors",children:t.title}),C.jsx("p",{className:"text-sm text-gray-400 mb-3",children:t.date}),C.jsx("p",{className:"text-gray-300 text-sm line-clamp-3",children:t.shortDescription})]},t.id))})]}),C.jsxs("section",{children:[C.jsx("h2",{className:"section-title",children:"Цена Победы"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-8",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-xl font-medium mb-4",children:"Человеческие потери"}),C.jsx("p",{className:"text-gray-300 leading-relaxed",children:"В годы войны Советский Союз потерял около 26,6 миллионов человек. Это около 13,7% от довоенной численности населения СССР. Из них военные потери составили 8,7 миллионов человек, а остальные — гражданское население."})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-xl font-medium mb-4",children:"Материальные потери"}),C.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Было разрушено 1710 городов и посёлков, более 70 тысяч сёл и деревень, 32 тысячи промышленных предприятий, 65 тысяч километров железнодорожных путей. Страна потеряла около 30% национального богатства."})]})]})]})]}),uE=({photos:t})=>C.jsxs("div",{className:"mt-8 mb-12",children:[C.jsx("h2",{className:"section-title",children:"Фотогалерея"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((e,n)=>C.jsxs("div",{className:"photo-container rounded-md overflow-hidden shadow-md bg-black/50",children:[C.jsx("img",{src:e.url,alt:e.caption,className:"w-full h-64 object-cover grayscale hover:grayscale-0 transition-all duration-500"}),C.jsx("div",{className:"photo-caption",children:e.caption})]},n))})]}),cE=({events:t})=>C.jsxs("div",{className:"mt-8 mb-12",children:[C.jsx("h2",{className:"section-title",children:"Хронология событий"}),C.jsx("div",{className:"relative border-l border-gray-700 ml-4 mt-8",children:t.map((e,n)=>C.jsxs("div",{className:"mb-10 ml-8",children:[C.jsx("div",{className:"absolute w-3 h-3 bg-white rounded-full -left-[6.5px] mt-1.5 border border-gray-700"}),C.jsx("time",{className:"mb-1 text-sm font-normal leading-none text-gray-400",children:e.date}),C.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:e.title}),C.jsx("p",{className:"text-base font-normal text-gray-400",children:e.description})]},n))})]}),tt={ADD:"add",REMOVE:"remove"},Vr={PROPERTYCHANGE:"propertychange"},V={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Aa{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function hE(t,e,n){let i,r;n=n||Cn;let s=0,o=t.length,l=!1;for(;s<o;)i=s+(o-s>>1),r=+n(t[i],e),r<0?s=i+1:(o=i,l=!r);return l?s:~s}function Cn(t,e){return t>e?1:t<e?-1:0}function dE(t,e){return t<e?1:t>e?-1:0}function dd(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=t[r];if(s===e)return r;if(s<e)return n(e,t[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(t[r]<e)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(t[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function fE(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function fd(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function mi(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function gE(t,e,n){const i=e||Cn;return t.every(function(r,s){if(s===0)return!0;const o=i(t[s-1],r);return!(o>0||o===0)})}function ao(){return!0}function Oa(){return!1}function uo(){}function Q_(t){let e,n,i;return function(){const r=Array.prototype.slice.call(arguments);return(!n||this!==i||!mi(r,n))&&(i=this,n=r,e=t.apply(this,arguments)),e}}function pE(t){function e(){let n;try{n=t()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function Lo(t){for(const e in t)delete t[e]}function Kr(t){let e;for(e in t)return!1;return!e}class An{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Da extends Aa{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(n)||r.push(n)}dispatchEvent(e){const n=typeof e=="string",i=n?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new An(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,l[i]=0),++o[i];let a;for(let u=0,c=r.length;u<c;++u)if("handleEvent"in r[u]?a=r[u].handleEvent(s):a=r[u].call(this,s),a===!1||s.propagationStopped){a=!1;break}if(--o[i]===0){let u=l[i];for(delete l[i];u--;)this.removeEventListener(i,uo);delete o[i]}return a}disposeInternal(){this.listeners_&&Lo(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=uo,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function Q(t,e,n,i,r){if(r){const o=n;n=function(l){return t.removeEventListener(e,n),o.call(i??this,l)}}else i&&i!==t&&(n=n.bind(i));const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function ea(t,e,n,i){return Q(t,e,n,i,!0)}function he(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Lo(t))}class Po extends Da{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(V.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Q(this,e[s],n);return r}return Q(this,e,n)}onceInternal(e,n){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=ea(this,e[s],n)}else i=ea(this,e,n);return n.ol_key=i,i}unInternal(e,n){const i=n.ol_key;if(i)mE(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],n);else this.removeEventListener(e,n)}}Po.prototype.on;Po.prototype.once;Po.prototype.un;function mE(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)he(t[e]);else he(t)}function ee(){throw new Error("Unimplemented abstract method.")}let _E=0;function ne(t){return t.ol_uid||(t.ol_uid=String(++_E))}class wg extends An{constructor(e,n,i){super(e),this.key=n,this.oldValue=i}}class Zt extends Po{constructor(e){super(),this.on,this.once,this.un,ne(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new wg(i,e,n)),i=Vr.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new wg(i,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,i){const r=this.values_||(this.values_={});if(i)r[e]=n;else{const s=r[e];r[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const i in e)this.set(i,e[i],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Kr(this.values_)&&(this.values_=null),n||this.notify(e,i)}}}const Cg={LENGTH:"length"};class il extends An{constructor(e,n,i){super(e),this.element=n,this.index=i}}class sn extends Zt{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,i=e.length;n<i;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)e(n[i],i,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Cg.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new il(tt.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new il(tt.REMOVE,n,e)),n}setAt(e,n){const i=this.getLength();if(e>=i){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const r=this.array_[e];this.array_[e]=n,this.dispatchEvent(new il(tt.REMOVE,r,e)),this.dispatchEvent(new il(tt.ADD,n,e))}updateLength_(){this.set(Cg.LENGTH,this.array_.length)}assertUnique_(e,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}class ar extends An{constructor(e,n,i){super(e),this.map=n,this.frameState=i!==void 0?i:null}}class Gn extends ar{constructor(e,n,i,r,s,o){super(e,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ve={SINGLECLICK:"singleclick",CLICK:V.CLICK,DBLCLICK:V.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Wi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",yE=Wi.includes("safari")&&!Wi.includes("chrom");yE&&(Wi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Wi));const vE=Wi.includes("webkit")&&!Wi.includes("edge"),J_=Wi.includes("macintosh"),xE=typeof devicePixelRatio<"u"?devicePixelRatio:1,e0=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,t0=typeof Image<"u"&&Image.prototype.decode,n0=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}(),Jc={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class EE extends Da{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Q(i,Jc.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Q(i,Jc.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(V.TOUCHMOVE,this.boundHandleTouchMove_,n0?{passive:!1}:!1)}emulateClick_(e){let n=new Gn(ve.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Gn(ve.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Gn(ve.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const n=e,i=n.pointerId;if(n.type==ve.POINTERUP||n.type==ve.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==ve.POINTERDOWN||n.type==ve.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Gn(ve.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(he),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Gn(ve.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Q(i,ve.POINTERMOVE,this.handlePointerMove_,this),Q(i,ve.POINTERUP,this.handlePointerUp_,this),Q(this.element_,ve.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Q(this.element_.getRootNode(),ve.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Gn(ve.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Gn(ve.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(he(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(V.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(he(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(he),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const _n={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Xe={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},U={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function re(t,e){if(!t)throw new Error(e)}const ta=1/0;class wE{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Lo(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,i=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){re(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=ta?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,i=this.priorities_,r=n.length,s=n[e],o=i[e],l=e;for(;e<r>>1;){const a=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<r&&i[u]<i[a]?u:a;n[e]=n[c],i[e]=i[c],e=c}n[e]=s,i[e]=o,this.siftDown_(l,e)}siftDown_(e,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>e;){const l=this.getParentIndex_(n);if(r[l]>o)i[n]=i[l],r[n]=r[l],n=l;else break}i[n]=s,r[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,l,a;for(l=0;l<s;++l)o=n[l],a=e(o),a==ta?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=a,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}class CE extends wE{constructor(e,n){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(V.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,i=n.getState();if(i===U.LOADED||i===U.ERROR||i===U.EMPTY){i!==U.ERROR&&n.removeEventListener(V.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let i=0;for(;this.tilesLoading_<e&&i<n&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===U.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,r.load())}}}function SE(t,e,n,i,r){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return ta;const s=t.viewState.center,o=i[0]-s[0],l=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+l*l)/r}const Be={ANIMATING:0,INTERACTING:1},bt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function pe(t,e,n){return Math.min(Math.max(t,e),n)}function RE(t,e,n,i,r,s){const o=r-n,l=s-i;if(o!==0||l!==0){const a=((t-n)*o+(e-i)*l)/(o*o+l*l);a>1?(n=r,i=s):a>0&&(n+=o*a,i+=l*a)}return Dr(t,e,n,i)}function Dr(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function TE(t){const e=t.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(t[i][i]);for(let l=i+1;l<e;l++){const a=Math.abs(t[l][i]);a>s&&(s=a,r=l)}if(s===0)return null;const o=t[r];t[r]=t[i],t[i]=o;for(let l=i+1;l<e;l++){const a=-t[l][i]/t[i][i];for(let u=i;u<e+1;u++)i==u?t[l][u]=0:t[l][u]+=a*t[i][u]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function Sg(t){return t*180/Math.PI}function oi(t){return t*Math.PI/180}function Nr(t,e){const n=t%e;return n*e<0?n+e:n}function It(t,e,n){return t+n*(e-t)}function Na(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function rl(t,e){return Math.floor(Na(t,e))}function sl(t,e){return Math.ceil(Na(t,e))}function eh(t,e,n){if(t>=e&&t<n)return t;const i=n-e;return((t-e)%i+i)%i+e}function Rg(t,e,n){return function(i,r,s,o,l){if(!i)return;if(!r&&!e)return i;const a=e?0:s[0]*r,u=e?0:s[1]*r,c=l?l[0]:0,h=l?l[1]:0;let d=t[0]+a/2+c,f=t[2]-a/2+c,m=t[1]+u/2+h,_=t[3]-u/2+h;d>f&&(d=(f+d)/2,f=d),m>_&&(m=(_+m)/2,_=m);let v=pe(i[0],d,f),p=pe(i[1],m,_);if(o&&n&&r){const g=30*r;v+=-g*Math.log(1+Math.max(0,d-i[0])/g)+g*Math.log(1+Math.max(0,i[0]-f)/g),p+=-g*Math.log(1+Math.max(0,m-i[1])/g)+g*Math.log(1+Math.max(0,i[1]-_)/g)}return[v,p]}}function IE(t){return t}const Ae={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Tg(t){const e=Nt();for(let n=0,i=t.length;n<i;++n)Ws(e,t[n]);return e}function gd(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function i0(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function r0(t,e,n){let i,r;return e<t[0]?i=t[0]-e:t[2]<e?i=e-t[2]:i=0,n<t[1]?r=t[1]-n:t[3]<n?r=n-t[3]:r=0,i*i+r*r}function $r(t,e){return s0(t,e[0],e[1])}function Sr(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function s0(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function th(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],l=e[1];let a=Ae.UNKNOWN;return o<n?a=a|Ae.LEFT:o>r&&(a=a|Ae.RIGHT),l<i?a=a|Ae.BELOW:l>s&&(a=a|Ae.ABOVE),a===Ae.UNKNOWN&&(a=Ae.INTERSECTING),a}function Nt(){return[1/0,1/0,-1/0,-1/0]}function hi(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function Fa(t){return hi(1/0,1/0,-1/0,-1/0,t)}function o0(t,e){const n=t[0],i=t[1];return hi(n,i,n,i,e)}function pd(t,e,n,i,r){const s=Fa(r);return l0(s,t,e,n,i)}function co(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function LE(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Ws(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function l0(t,e,n,i,r){for(;n<i;n+=r)PE(t,e[n],e[n+1]);return t}function PE(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function a0(t,e){let n;return n=e(za(t)),n||(n=e(ba(t)),n)||(n=e(ja(t)),n)||(n=e($i(t)),n)?n:!1}function nh(t){let e=0;return Ga(t)||(e=ie(t)*Ve(t)),e}function za(t){return[t[0],t[1]]}function ba(t){return[t[2],t[1]]}function Ui(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function kE(t,e){let n;if(e==="bottom-left")n=za(t);else if(e==="bottom-right")n=ba(t);else if(e==="top-left")n=$i(t);else if(e==="top-right")n=ja(t);else throw new Error("Invalid corner");return n}function ih(t,e,n,i,r){const[s,o,l,a,u,c,h,d]=u0(t,e,n,i);return hi(Math.min(s,l,u,h),Math.min(o,a,c,d),Math.max(s,l,u,h),Math.max(o,a,c,d),r)}function u0(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),l=Math.sin(n),a=r*o,u=r*l,c=s*o,h=s*l,d=t[0],f=t[1];return[d-a+h,f-u-c,d-a-h,f-u+c,d+a-h,f+u+c,d+a+h,f+u-c,d-a+h,f-u-c]}function Ve(t){return t[3]-t[1]}function Ni(t,e,n){const i=n||Nt();return rt(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):Fa(i),i}function $i(t){return[t[0],t[3]]}function ja(t){return[t[2],t[3]]}function ie(t){return t[2]-t[0]}function rt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ga(t){return t[2]<t[0]||t[3]<t[1]}function ME(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function AE(t,e,n){let i=!1;const r=th(t,e),s=th(t,n);if(r===Ae.INTERSECTING||s===Ae.INTERSECTING)i=!0;else{const o=t[0],l=t[1],a=t[2],u=t[3],c=e[0],h=e[1],d=n[0],f=n[1],m=(f-h)/(d-c);let _,v;s&Ae.ABOVE&&!(r&Ae.ABOVE)&&(_=d-(f-u)/m,i=_>=o&&_<=a),!i&&s&Ae.RIGHT&&!(r&Ae.RIGHT)&&(v=f-(d-a)*m,i=v>=l&&v<=u),!i&&s&Ae.BELOW&&!(r&Ae.BELOW)&&(_=d-(f-l)/m,i=_>=o&&_<=a),!i&&s&Ae.LEFT&&!(r&Ae.LEFT)&&(v=f-(d-o)*m,i=v>=l&&v<=u)}return i}function c0(t,e){const n=e.getExtent(),i=Ui(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=ie(n),o=Math.floor((i[0]-n[0])/r)*r;t[0]-=o,t[2]-=o}return t}function h0(t,e,n){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];c0(t,e);const r=ie(i);if(ie(t)>r&&!n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}function OE(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function na(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function md(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function DE(t,e){return t[0]*=e,t[1]*=e,t}function d0(t,e){if(e.canWrapX()){const n=ie(e.getExtent()),i=NE(t,e,n);i&&(t[0]-=i*n)}return t}function NE(t,e,n){const i=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||ie(i),r=Math.floor((t[0]-i[0])/n)),r}function f0(t){return Math.pow(t,3)}function ns(t){return 1-f0(1-t)}function FE(t){return 3*t*t-2*t*t*t}function zE(t){return t}const bE=63710088e-1;function Ig(t,e,n){n=n||bE;const i=oi(t[1]),r=oi(e[1]),s=(r-i)/2,o=oi(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function g0(...t){console.warn(...t)}const _d={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class yd{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||_d[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const ko=6378137,Rr=Math.PI*ko,jE=[-Rr,-Rr,Rr,Rr],GE=[-180,-85,180,85],ol=ko*Math.log(Math.tan(Math.PI/2));class tr extends yd{constructor(e){super({code:e,units:"m",extent:jE,global:!0,worldExtent:GE,getPointResolution:function(n,i){return n/Math.cosh(i[1]/ko)}})}}const Lg=[new tr("EPSG:3857"),new tr("EPSG:102100"),new tr("EPSG:102113"),new tr("EPSG:900913"),new tr("http://www.opengis.net/def/crs/EPSG/0/3857"),new tr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function WE(t,e,n,i){const r=t.length;n=n>1?n:2,i=i??n,e===void 0&&(n>2?e=t.slice():e=new Array(r));for(let s=0;s<r;s+=i){e[s]=Rr*t[s]/180;let o=ko*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));o>ol?o=ol:o<-ol&&(o=-ol),e[s+1]=o}return e}function UE(t,e,n,i){const r=t.length;n=n>1?n:2,i=i??n,e===void 0&&(n>2?e=t.slice():e=new Array(r));for(let s=0;s<r;s+=i)e[s]=180*t[s]/Rr,e[s+1]=360*Math.atan(Math.exp(t[s+1]/ko))/Math.PI-90;return e}const XE=6378137,Pg=[-180,-90,180,90],BE=Math.PI*XE/180;class xi extends yd{constructor(e,n){super({code:e,units:"degrees",extent:Pg,axisOrientation:n,global:!0,metersPerUnit:BE,worldExtent:Pg})}}const kg=[new xi("CRS:84"),new xi("EPSG:4326","neu"),new xi("urn:ogc:def:crs:OGC:1.3:CRS84"),new xi("urn:ogc:def:crs:OGC:2:84"),new xi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new xi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new xi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let rh={};function YE(t){return rh[t]||rh[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function VE(t,e){rh[t]=e}let Fr={};function ho(t,e,n){const i=t.getCode(),r=e.getCode();i in Fr||(Fr[i]={}),Fr[i][r]=n}function Mu(t,e){return t in Fr&&e in Fr[t]?Fr[t][e]:null}const ia=.9996,At=.00669438,Wa=At*At,Ua=Wa*At,Pi=At/(1-At),Mg=Math.sqrt(1-At),Zr=(1-Mg)/(1+Mg),p0=Zr*Zr,vd=p0*Zr,xd=vd*Zr,m0=xd*Zr,_0=1-At/4-3*Wa/64-5*Ua/256,KE=3*At/8+3*Wa/32+45*Ua/1024,$E=15*Wa/256+45*Ua/1024,ZE=35*Ua/3072,HE=3/2*Zr-27/32*vd+269/512*m0,qE=21/16*p0-55/32*xd,QE=151/96*vd-417/128*m0,JE=1097/512*xd,ra=6378137;function ew(t,e,n){const i=t-5e5,o=(n.north?e:e-1e7)/ia/(ra*_0),l=o+HE*Math.sin(2*o)+qE*Math.sin(4*o)+QE*Math.sin(6*o)+JE*Math.sin(8*o),a=Math.sin(l),u=a*a,c=Math.cos(l),h=a/c,d=h*h,f=d*d,m=1-At*u,_=Math.sqrt(1-At*u),v=ra/_,p=(1-At)/m,g=Pi*c**2,y=g*g,x=i/(v*ia),E=x*x,w=E*x,S=w*x,R=S*x,L=R*x,k=l-h/p*(E/2-S/24*(5+3*d+10*g-4*y-9*Pi))+L/720*(61+90*d+298*g+45*f-252*Pi-3*y);let z=(x-w/6*(1+2*d+g)+R/120*(5-2*g+28*d-3*y+8*Pi+24*f))/c;return z=eh(z+oi(y0(n.number)),-Math.PI,Math.PI),[Sg(z),Sg(k)]}const Ag=-80,Og=84,tw=-180,nw=180;function iw(t,e,n){t=eh(t,tw,nw),e<Ag?e=Ag:e>Og&&(e=Og);const i=oi(e),r=Math.sin(i),s=Math.cos(i),o=r/s,l=o*o,a=l*l,u=oi(t),c=y0(n.number),h=oi(c),d=ra/Math.sqrt(1-At*r**2),f=Pi*s**2,m=s*eh(u-h,-Math.PI,Math.PI),_=m*m,v=_*m,p=v*m,g=p*m,y=g*m,x=ra*(_0*i-KE*Math.sin(2*i)+$E*Math.sin(4*i)-ZE*Math.sin(6*i)),E=ia*d*(m+v/6*(1-l+f)+g/120*(5-18*l+a+72*f-58*Pi))+5e5;let w=ia*(x+d*o*(_/2+p/24*(5-l+9*f+4*f**2)+y/720*(61-58*l+a+600*f-330*Pi)));return n.north||(w+=1e7),[E,w]}function y0(t){return(t-1)*6-180+3}const rw=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function v0(t){let e=0;for(const r of rw){const s=t.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let n=0,i=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(i=!0,n=e-32600),n?{number:n,north:i}:null}function Dg(t,e){return function(n,i,r,s){const o=n.length;r=r>1?r:2,s=s??r,i||(r>2?i=n.slice():i=new Array(o));for(let l=0;l<o;l+=s){const a=n[l],u=n[l+1],c=t(a,u,e);i[l]=c[0],i[l+1]=c[1]}return i}}function sw(t){return v0(t)?new yd({code:t,units:"m"}):null}function ow(t){const e=v0(t.getCode());return e?{forward:Dg(iw,e),inverse:Dg(ew,e)}:null}const lw=[ow],aw=[sw];let sh=!0;function x0(t){sh=!1}function Ed(t,e){if(e!==void 0){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function oh(t){VE(t.getCode(),t),ho(t,t,Ed)}function uw(t){t.forEach(oh)}function ht(t){if(typeof t!="string")return t;const e=YE(t);if(e)return e;for(const n of aw){const i=n(t);if(i)return i}return null}function Ng(t,e,n,i){t=ht(t);let r;const s=t.getPointResolutionFunc();if(s)r=s(e,n);else{const o=t.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const l=Cd(t,ht("EPSG:4326"));if(!l&&o!=="degrees")r=e*t.getMetersPerUnit();else{let u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];u=l(u,u,2);const c=Ig(u.slice(0,2),u.slice(2,4)),h=Ig(u.slice(4,6),u.slice(6,8));r=(c+h)/2}const a=t.getMetersPerUnit();a!==void 0&&(r/=a)}}return r}function Fg(t){uw(t),t.forEach(function(e){t.forEach(function(n){e!==n&&ho(e,n,Ed)})})}function cw(t,e,n,i){t.forEach(function(r){e.forEach(function(s){ho(r,s,n),ho(s,r,i)})})}function wd(t,e){return t?typeof t=="string"?ht(t):t:ht(e)}function hw(t){return function(e,n,i,r){const s=e.length;i=i!==void 0?i:2,r=r??i,n=n!==void 0?n:new Array(s);for(let o=0;o<s;o+=r){const l=t(e.slice(o,o+i)),a=l.length;for(let u=0,c=r;u<c;++u)n[o+u]=u>=a?e[o+u]:l[u]}return n}}function Au(t,e){return x0(),Sd(t,"EPSG:4326","EPSG:3857")}function Ou(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Cd(t,e)===Ed)&&n}function Cd(t,e){const n=t.getCode(),i=e.getCode();let r=Mu(n,i);if(r)return r;let s=null,o=null;for(const a of lw)s||(s=a(t)),o||(o=a(e));if(!s&&!o)return null;const l="EPSG:4326";if(o)if(s)r=Du(s.inverse,o.forward);else{const a=Mu(n,l);a&&(r=Du(a,o.forward))}else{const a=Mu(l,i);a&&(r=Du(s.inverse,a))}return r&&(oh(t),oh(e),ho(t,e,r)),r}function Du(t,e){return function(n,i,r,s){return i=t(n,i,r,s),e(i,i,r,s)}}function sa(t,e){const n=ht(t),i=ht(e);return Cd(n,i)}function Sd(t,e,n){const i=sa(e,n);if(!i){const r=ht(e).getCode(),s=ht(n).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return i(t,void 0,t.length)}function lh(t,e){return t}function gn(t,e){return sh&&!na(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(sh=!1,g0("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function E0(t,e){return t}function Zn(t,e){return t}function dw(){Fg(Lg),Fg(kg),cw(kg,Lg,WE,UE)}dw();new Array(6);function Vt(){return[1,0,0,1,0,0]}function fw(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function De(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function kn(t,e,n,i,r,s,o,l){const a=Math.sin(s),u=Math.cos(s);return t[0]=i*u,t[1]=r*a,t[2]=-i*a,t[3]=r*u,t[4]=o*i*u-l*i*a+e,t[5]=o*r*a+l*r*u+n,t}function w0(t,e){const n=gw(e);re(n!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],l=e[4],a=e[5];return t[0]=o/n,t[1]=-r/n,t[2]=-s/n,t[3]=i/n,t[4]=(s*a-o*l)/n,t[5]=-(i*a-r*l)/n,t}function gw(t){return t[0]*t[3]-t[1]*t[2]}const pw=[1e5,1e5,1e5,1e5,2,2];function mw(t){return"matrix("+t.join(", ")+")"}function zg(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function _w(t,e){const n=zg(t),i=zg(e);for(let r=0;r<6;++r)if(Math.round((n[r]-i[r])*pw[r])!==0)return!1;return!0}function li(t,e,n,i,r,s,o){s=s||[],o=o||2;let l=0;for(let a=e;a<n;a+=i){const u=t[a],c=t[a+1];s[l++]=r[0]*u+r[2]*c+r[4],s[l++]=r[1]*u+r[3]*c+r[5];for(let h=2;h<o;h++)s[l++]=t[a+h]}return s&&s.length!=l&&(s.length=l),s}function C0(t,e,n,i,r,s,o){o=o||[];const l=Math.cos(r),a=Math.sin(r),u=s[0],c=s[1];let h=0;for(let d=e;d<n;d+=i){const f=t[d]-u,m=t[d+1]-c;o[h++]=u+f*l-m*a,o[h++]=c+f*a+m*l;for(let _=d+2;_<d+i;++_)o[h++]=t[_]}return o&&o.length!=h&&(o.length=h),o}function yw(t,e,n,i,r,s,o,l){l=l||[];const a=o[0],u=o[1];let c=0;for(let h=e;h<n;h+=i){const d=t[h]-a,f=t[h+1]-u;l[c++]=a+r*d,l[c++]=u+s*f;for(let m=h+2;m<h+i;++m)l[c++]=t[m]}return l&&l.length!=c&&(l.length=c),l}function vw(t,e,n,i,r,s,o){o=o||[];let l=0;for(let a=e;a<n;a+=i){o[l++]=t[a]+r,o[l++]=t[a+1]+s;for(let u=a+2;u<a+i;++u)o[l++]=t[u]}return o&&o.length!=l&&(o.length=l),o}const bg=Vt(),xw=[NaN,NaN];class Ew extends Zt{constructor(){super(),this.extent_=Nt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Q_((e,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return ee()}closestPointXY(e,n,i,r){return ee()}containsXY(e,n){return this.closestPointXY(e,n,xw,Number.MIN_VALUE)===0}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ee()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Fa(n),this.extentRevision_=this.getRevision()}return ME(this.extent_,e)}rotate(e,n){ee()}scale(e,n,i){ee()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ee()}getType(){return ee()}applyTransform(e){ee()}intersectsExtent(e){return ee()}translate(e,n){ee()}transform(e,n){const i=ht(e),r=i.getUnits()=="tile-pixels"?function(s,o,l){const a=i.getExtent(),u=i.getWorldExtent(),c=Ve(u)/Ve(a);kn(bg,u[0],u[3],c,-c,0,0,0);const h=li(s,0,s.length,l,bg,o),d=sa(i,n);return d?d(h,h,l):h}:sa(i,n);return this.applyTransform(r),this}}class Rd extends Ew{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ee()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=jg(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){ee()}setLayout(e,n,i){let r;if(e)r=jg(e);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,e=ww(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();C0(i,0,i.length,r,e,n,i),this.changed()}}scale(e,n,i){n===void 0&&(n=e),i||(i=Ui(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();yw(r,0,r.length,s,e,n,i,r),this.changed()}}translate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();vw(i,0,i.length,r,e,n,i),this.changed()}}}function ww(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function jg(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function Cw(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const r=t.getStride();return li(i,0,i.length,r,e,n)}function S0(t,e,n,i){let r=0;const s=t[n-i],o=t[n-i+1];let l=0,a=0;for(;e<n;e+=i){const u=t[e]-s,c=t[e+1]-o;r+=a*u-l*c,l=u,a=c}return r/2}function Sw(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const l=n[s];r+=S0(t,e,l,i),e=l}return r}function Gg(t,e,n,i,r,s,o){const l=t[e],a=t[e+1],u=t[n]-l,c=t[n+1]-a;let h;if(u===0&&c===0)h=e;else{const d=((r-l)*u+(s-a)*c)/(u*u+c*c);if(d>1)h=n;else if(d>0){for(let f=0;f<i;++f)o[f]=It(t[e+f],t[n+f],d);o.length=i;return}else h=e}for(let d=0;d<i;++d)o[d]=t[h+d];o.length=i}function R0(t,e,n,i,r){let s=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const l=t[e],a=t[e+1],u=Dr(s,o,l,a);u>r&&(r=u),s=l,o=a}return r}function Rw(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const l=n[s];r=R0(t,e,l,i,r),e=l}return r}function T0(t,e,n,i,r,s,o,l,a,u,c){if(e==n)return u;let h,d;if(r===0){if(d=Dr(o,l,t[e],t[e+1]),d<u){for(h=0;h<i;++h)a[h]=t[e+h];return a.length=i,d}return u}c=c||[NaN,NaN];let f=e+i;for(;f<n;)if(Gg(t,f-i,f,i,o,l,c),d=Dr(o,l,c[0],c[1]),d<u){for(u=d,h=0;h<i;++h)a[h]=c[h];a.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(Gg(t,n-i,e,i,o,l,c),d=Dr(o,l,c[0],c[1]),d<u){for(u=d,h=0;h<i;++h)a[h]=c[h];a.length=i}return u}function Tw(t,e,n,i,r,s,o,l,a,u,c){c=c||[NaN,NaN];for(let h=0,d=n.length;h<d;++h){const f=n[h];u=T0(t,e,f,i,r,s,o,l,a,u,c),e=f}return u}function Iw(t,e,n,i){for(let r=0,s=n.length;r<s;++r)t[e++]=n[r];return e}function I0(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let l=0;l<i;++l)t[e++]=o[l]}return e}function Lw(t,e,n,i,r){r=r||[];let s=0;for(let o=0,l=n.length;o<l;++o){const a=I0(t,e,n[o],i);r[s++]=a,e=a}return r.length=s,r}function Tr(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function oa(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,l=n.length;o<l;++o){const a=n[o];r[s++]=Tr(t,e,a,i,r[s]),e=a}return r.length=s,r}function Wg(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,l=n.length;o<l;++o){const a=n[o];r[s++]=a.length===1&&a[0]===e?[]:oa(t,e,a,i,r[s]),e=a[a.length-1]}return r.length=s,r}function Td(t,e,n,i,r,s,o){const l=(n-e)/i;if(l<3){for(;e<n;e+=i)s[o++]=t[e],s[o++]=t[e+1];return o}const a=new Array(l);a[0]=1,a[l-1]=1;const u=[e,n-i];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let f=0;const m=t[d],_=t[d+1],v=t[h],p=t[h+1];for(let g=d+i;g<h;g+=i){const y=t[g],x=t[g+1],E=RE(y,x,m,_,v,p);E>f&&(c=g,f=E)}f>r&&(a[(c-e)/i]=1,d+i<c&&u.push(d,c),c+i<h&&u.push(c,h))}for(let h=0;h<l;++h)a[h]&&(s[o++]=t[e+h*i],s[o++]=t[e+h*i+1]);return o}function Pw(t,e,n,i,r,s,o,l){for(let a=0,u=n.length;a<u;++a){const c=n[a];o=Td(t,e,c,i,r,s,o),l.push(o),e=c}return o}function Si(t,e){return e*Math.round(t/e)}function kw(t,e,n,i,r,s,o){if(e==n)return o;let l=Si(t[e],r),a=Si(t[e+1],r);e+=i,s[o++]=l,s[o++]=a;let u,c;do if(u=Si(t[e],r),c=Si(t[e+1],r),e+=i,e==n)return s[o++]=u,s[o++]=c,o;while(u==l&&c==a);for(;e<n;){const h=Si(t[e],r),d=Si(t[e+1],r);if(e+=i,h==u&&d==c)continue;const f=u-l,m=c-a,_=h-l,v=d-a;if(f*v==m*_&&(f<0&&_<f||f==_||f>0&&_>f)&&(m<0&&v<m||m==v||m>0&&v>m)){u=h,c=d;continue}s[o++]=u,s[o++]=c,l=u,a=c,u=h,c=d}return s[o++]=u,s[o++]=c,o}function L0(t,e,n,i,r,s,o,l){for(let a=0,u=n.length;a<u;++a){const c=n[a];o=kw(t,e,c,i,r,s,o),l.push(o),e=c}return o}class fo extends Rd{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new fo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,i,r){return r<r0(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(R0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),T0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,i,r))}getArea(){return S0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Tr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=Td(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new fo(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=I0(this.flatCoordinates,0,e,this.stride),this.changed()}}class Xa extends Rd{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Xa(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){const s=this.flatCoordinates,o=Dr(e,n,s[0],s[1]);if(o<r){const l=this.stride;for(let a=0;a<l;++a)i[a]=s[a];return i.length=l,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return o0(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return s0(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Iw(this.flatCoordinates,0,e,this.stride),this.changed()}}function Mw(t,e,n,i,r){return!a0(r,function(o){return!ki(t,e,n,i,o[0],o[1])})}function ki(t,e,n,i,r,s){let o=0,l=t[n-i],a=t[n-i+1];for(;e<n;e+=i){const u=t[e],c=t[e+1];a<=s?c>s&&(u-l)*(s-a)-(r-l)*(c-a)>0&&o++:c<=s&&(u-l)*(s-a)-(r-l)*(c-a)<0&&o--,l=u,a=c}return o!==0}function P0(t,e,n,i,r,s){if(n.length===0||!ki(t,e,n[0],i,r,s))return!1;for(let o=1,l=n.length;o<l;++o)if(ki(t,n[o-1],n[o],i,r,s))return!1;return!0}function Id(t,e,n,i,r,s,o){let l,a,u,c,h,d,f;const m=r[s+1],_=[];for(let g=0,y=n.length;g<y;++g){const x=n[g];for(c=t[x-i],d=t[x-i+1],l=e;l<x;l+=i)h=t[l],f=t[l+1],(m<=d&&f<=m||d<=m&&m<=f)&&(u=(m-d)/(f-d)*(h-c)+c,_.push(u)),c=h,d=f}let v=NaN,p=-1/0;for(_.sort(Cn),c=_[0],l=1,a=_.length;l<a;++l){h=_[l];const g=Math.abs(h-c);g>p&&(u=(c+h)/2,P0(t,e,n,i,u,m)&&(v=u,p=g)),c=h}return isNaN(v)&&(v=r[s]),o?(o.push(v,m,p),o):[v,m,p]}function Aw(t,e,n,i,r){let s=[];for(let o=0,l=n.length;o<l;++o){const a=n[o];s=Id(t,e,a,i,r,2*o,s),e=a[a.length-1]}return s}function Ow(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function k0(t,e,n,i,r,s){return s=s??l0(Nt(),t,e,n,i),rt(r,s)?s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:Ow(t,e,n,i,function(o,l){return AE(r,o,l)}):!1}function M0(t,e,n,i,r){return!!(k0(t,e,n,i,r)||ki(t,e,n,i,r[0],r[1])||ki(t,e,n,i,r[0],r[3])||ki(t,e,n,i,r[2],r[1])||ki(t,e,n,i,r[2],r[3]))}function Dw(t,e,n,i,r){if(!M0(t,e,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(Mw(t,n[s-1],n[s],i,r)&&!k0(t,n[s-1],n[s],i,r))return!1;return!0}function Nw(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function Ld(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const l=t[e],a=t[e+1];r+=(l-s)*(a+o),s=l,o=a}return r===0?void 0:r>0}function Fw(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const l=n[s],a=Ld(t,e,l,i);if(s===0){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=l}return!0}function Ug(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const l=n[s],a=Ld(t,e,l,i);(s===0?r&&a||!r&&!a:r&&!a||!r&&a)&&Nw(t,e,l,i),e=l}return e}function zw(t,e){const n=[];let i=0,r=0,s;for(let o=0,l=e.length;o<l;++o){const a=e[o],u=Ld(t,i,a,2);if(s===void 0&&(s=u),u===s)n.push(e.slice(r,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[r])}r=o+1,i=a}return n}class go extends Rd{constructor(e,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?fd(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new go(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<r0(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rw(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tw(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return P0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return Sw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Ug(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,oa(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ui(this.getExtent());this.flatInteriorPoint_=Id(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Xa(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new fo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,l=i.length;o<l;++o){const a=i[o],u=new fo(n.slice(s,a),e);r.push(u),s=a}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Fw(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Ug(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=L0(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,i),new go(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Dw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Lw(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Xg(t){if(Ga(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new go(s,"XY",[s.length])}function Pd(t,e,n,i){const r=ie(e)/n[0],s=Ve(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function kd(t,e,n){let i=Math.min(t,e);const r=50;return i*=Math.log(1+r*Math.max(0,t/e-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/t-1))/r+1),pe(i,n/2,e*2)}function bw(t,e,n,i){return e=e!==void 0?e:!0,function(r,s,o,l){if(r!==void 0){const a=t[0],u=t[t.length-1],c=n?Pd(a,n,o,i):a;if(l)return e?kd(r,c,u):pe(r,u,c);const h=Math.min(c,r),d=Math.floor(dd(t,h,s));return t[d]>c&&d<t.length-1?t[d+1]:t[d]}}}function jw(t,e,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,l,a,u){if(o!==void 0){const c=r?Pd(e,r,a,s):e;if(u)return i?kd(o,c,n):pe(o,n,c);const h=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(t)-h),f=-l*(.5-h)+.5,m=Math.min(c,o),_=Math.floor(Math.log(e/m)/Math.log(t)+f),v=Math.max(d,_),p=e/Math.pow(t,v);return pe(p,n,c)}}}function Bg(t,e,n,i,r){return n=n!==void 0?n:!0,function(s,o,l,a){if(s!==void 0){const u=i?Pd(t,i,l,r):t;return!n||!a?pe(s,e,u):kd(s,u,e)}}}function Md(t){if(t!==void 0)return 0}function Yg(t){if(t!==void 0)return t}function Gw(t){const e=2*Math.PI/t;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function Ww(t){const e=oi(5);return function(n,i){return i||n===void 0?n:Math.abs(n)<=e?0:n}}const Uw=42,Ad=256,Nu=0;class nn extends Zt{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=wd(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&x0(),e.center&&(e.center=gn(e.center,this.projection_)),e.extent&&(e.extent=Zn(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const l in bt)delete n[l];this.setProperties(n,!0);const i=Bw(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=Xw(e),s=i.constraint,o=Yw(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),l=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-l])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=gn(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=gn(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const c=arguments[r];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(r===n){i&&ll(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),l=this.targetResolution_,a=this.targetRotation_;const u=[];for(;r<n;++r){const c=arguments[r],h={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||FE,callback:i};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=l,h.targetResolution=this.getResolutionForZoom(c.zoom),l=h.targetResolution):c.resolution&&(h.sourceResolution=l,h.targetResolution=c.resolution,l=h.targetResolution),c.rotation!==void 0){h.sourceRotation=a;const d=Nr(c.rotation-a+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=a+d,a=h.targetRotation}Vw(h)?h.complete=!0:s+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(Be.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Be.ANIMATING]>0}getInteracting(){return this.hints_[Be.INTERACTING]>0}cancelAnimations(){this.setHint(Be.ANIMATING,-this.hints_[Be.ANIMATING]);let e;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&ll(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const l=r[s];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,l=r.length;o<l;++o){const a=r[o];if(a.complete)continue;const u=e-a.start;let c=a.duration>0?u/a.duration:1;c>=1?(a.complete=!0,c=1):s=!1;const h=a.easing(c);if(a.sourceCenter){const d=a.sourceCenter[0],f=a.sourceCenter[1],m=a.targetCenter[0],_=a.targetCenter[1];this.nextCenter_=a.targetCenter;const v=d+h*(m-d),p=f+h*(_-f);this.targetCenter_=[v,p]}if(a.sourceResolution&&a.targetResolution){const d=h===1?a.targetResolution:a.sourceResolution+h*(a.targetResolution-a.sourceResolution);if(a.anchor){const f=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(m,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(a.sourceRotation!==void 0&&a.targetRotation!==void 0){const d=h===1?Nr(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+h*(a.targetRotation-a.sourceRotation);if(a.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),n=!0,!a.complete)break}if(s){this.animations_[i]=null,this.setHint(Be.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&ll(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],md(i,e-this.getRotation()),OE(i,n)),i}calculateCenterZoom(e,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-r[0])/s,l=n[1]-e*(n[1]-r[1])/s;i=[o,l]}return i}getViewportSize_(e){const n=this.viewportSize_;if(e){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&lh(e,this.getProjection())}getCenterInternal(){return this.get(bt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return E0(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();re(n,"The view center is not defined");const i=this.getResolution();re(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return re(r!==void 0,"The view rotation is not defined"),ih(n,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(bt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(Zn(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const i=ie(e)/n[0],r=Ve(e)/n[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(s){return n/Math.pow(e,s*r)}}getRotation(){return this.get(bt.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=Fu(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=dd(this.resolutions_,e,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){var n;if((n=this.resolutions_)!=null&&n.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=pe(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,pe(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let i;if(re(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){re(!Ga(e),"Cannot fit empty extent provided as `geometry`");const r=Zn(e,this.getProjection());i=Xg(r)}else if(e.getType()==="Circle"){const r=Zn(e.getExtent(),this.getProjection());i=Xg(r),i.rotate(this.getRotation(),Ui(r))}else i=e;this.fitInternal(i,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let l=1/0,a=1/0,u=-1/0,c=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*i-s[h+1]*r,m=s[h]*r+s[h+1]*i;l=Math.min(l,f),a=Math.min(a,m),u=Math.max(u,f),c=Math.max(c,m)}return[l,a,u,c]}fitInternal(e,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const l=this.rotatedExtentForGeometry(e);let a=this.getResolutionForExtentInternal(l,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,s?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=Ui(l);d[0]+=(r[1]-r[3])/2*a,d[1]+=(r[0]-r[2])/2*a;const f=d[0]*h-d[1]*c,m=d[1]*h+d[0]*c,_=this.getConstrainedCenter([f,m],a),v=n.callback?n.callback:uo;n.duration!==void 0?this.animateInternal({resolution:a,center:_,duration:n.duration,easing:n.easing},v):(this.targetResolution_=a,this.targetCenter_=_,this.applyTargetState_(!1,!0),ll(v,!0))}centerOn(e,n,i){this.centerOnInternal(gn(e,this.getProjection()),n,i)}centerOnInternal(e,n,i){this.setCenterInternal(Fu(e,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,i,r){let s;const o=this.padding_;if(o&&e){const l=this.getViewportSizeMinusPadding_(-i),a=Fu(e,r,[l[0]/2+o[3],l[1]/2+o[0]],n,i);s=[e[0]-a[0],e[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=lh(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&gn(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=gn(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&gn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),l=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(bt.ROTATION)!==r&&this.set(bt.ROTATION,r),this.get(bt.RESOLUTION)!==o&&(this.set(bt.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(bt.CENTER)||!na(this.get(bt.CENTER),l))&&this.set(bt.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,i){e=e!==void 0?e:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,r,o),a=this.constraints_.center(this.targetCenter_,l,o,!1,this.calculateCenterShift(this.targetCenter_,l,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=s,this.targetCenter_=a,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==s||!this.getCenterInternal()||!na(this.getCenterInternal(),a))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:l,duration:e,easing:ns,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Be.INTERACTING,1)}endInteraction(e,n,i){i=i&&gn(i,this.getProjection()),this.endInteractionInternal(e,n,i)}endInteractionInternal(e,n,i){this.getInteracting()&&(this.setHint(Be.INTERACTING,-1),this.resolveConstraints(e,n,i))}getConstrainedCenter(e,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),i)}getConstrainedZoom(e,n){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(e,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,i)}}function ll(t,e){setTimeout(function(){t(e)},0)}function Xw(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return Rg(t.extent,t.constrainOnlyCenter,n)}const e=wd(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Rg(n,!1,!1)}return IE}function Bw(t){let e,n,i,o=t.minZoom!==void 0?t.minZoom:Nu,l=t.maxZoom!==void 0?t.maxZoom:28;const a=t.zoomFactor!==void 0?t.zoomFactor:2,u=t.multiWorld!==void 0?t.multiWorld:!1,c=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,d=wd(t.projection,"EPSG:3857"),f=d.getExtent();let m=t.constrainOnlyCenter,_=t.extent;if(!u&&!_&&d.isGlobal()&&(m=!1,_=f),t.resolutions!==void 0){const v=t.resolutions;n=v[o],i=v[l]!==void 0?v[l]:v[v.length-1],t.constrainResolution?e=bw(v,c,!m&&_,h):e=Bg(n,i,c,!m&&_,h)}else{const p=(f?Math.max(ie(f),Ve(f)):360*_d.degrees/d.getMetersPerUnit())/Ad/Math.pow(2,Nu),g=p/Math.pow(2,28-Nu);n=t.maxResolution,n!==void 0?o=0:n=p/Math.pow(a,o),i=t.minResolution,i===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?i=n/Math.pow(a,l):i=p/Math.pow(a,l):i=g),l=o+Math.floor(Math.log(n/i)/Math.log(a)),i=n/Math.pow(a,l-o),t.constrainResolution?e=jw(a,n,i,c,!m&&_,h):e=Bg(n,i,c,!m&&_,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:a}}function Yw(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?Ww():n===!1?Yg:typeof n=="number"?Gw(n):Yg}return Md}function Vw(t){return!(t.sourceCenter&&t.targetCenter&&!na(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function Fu(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),l=t[0]*s-t[1]*o,a=t[1]*s+t[0]*o;l+=(e[0]/2-n[0])*i,a+=(n[1]-e[1]/2)*i,o=-o;const u=l*s-a*o,c=a*s+l*o;return[u,c]}const al="ol-hidden",Kw="ol-selectable",Ba="ol-unselectable",Od="ol-control",Vg="ol-collapsed",$w=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Kg=["style","variant","weight","size","lineHeight","family"],A0=function(t){const e=t.match($w);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Kg.length;i<r;++i){const s=e[i+1];s!==void 0&&(n[Kg[i]]=s)}return n.families=n.family.split(/,\s?/),n};function ke(t,e,n,i){let r;return n&&n.length?r=n.shift():e0?r=new OffscreenCanvas(t||300,e||300):r=document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}let zu;function la(){return zu||(zu=ke(1,1)),zu}function Ya(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Zw(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function Hw(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function $g(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function O0(t){for(;t.lastChild;)t.lastChild.remove()}function qw(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){t.appendChild(s);continue}if(!s){t.removeChild(r),--i;continue}t.insertBefore(s,r)}}}class Dd extends Zt{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var n;this.map_&&((n=this.element)==null||n.remove());for(let i=0,r=this.listenerKeys.length;i<r;++i)he(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==uo&&this.listenerKeys.push(Q(e,_n.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Qw extends Dd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const l=e.label!==void 0?e.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=r):this.label_=l;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(V.CLICK,this.handleClick_.bind(this),!1);const u=n+" "+Ba+" "+Od+(this.collapsed_&&this.collapsible_?" "+Vg:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),i=new Set(n.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!n.some(s=>{var o;return((o=s.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(r=>pE(()=>r))),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!mi(n,this.renderedAttributions_)){O0(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Vg),this.collapsed_?$g(this.collapseLabel_,this.label_):$g(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Jw extends Dd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(V.CLICK,this.handleClick_.bind(this),!1);const l=n+" "+Ba+" "+Od,a=this.element;a.className=l,a.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(al)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:ns}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(al);!s&&i===0?this.element.classList.add(al):s&&i!==0&&this.element.classList.remove(al)}this.label_.style.transform=r}this.rotation_=i}}class eC extends Dd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",l=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",a=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=a,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(V.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof l=="string"?document.createTextNode(l):l),h.addEventListener(V.CLICK,this.handleClick_.bind(this,-i),!1);const d=n+" "+Ba+" "+Od,f=this.element;f.className=d,f.appendChild(c),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:ns})):i.setZoom(s)}}}function tC(t){t=t||{};const e=new sn;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new eC(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new Jw(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new Qw(t.attributionOptions)),e}class nC{constructor(e,n,i){this.decay_=e,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Zg={ACTIVE:"active"};class Mo extends Zt{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Zg.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Zg.ACTIVE,e)}setMap(e){this.map_=e}}function iC(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:zE,center:t.getConstrainedCenter(r)})}}function Nd(t,e,n,i){const r=t.getZoom();if(r===void 0)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:ns})}class rC extends Mo{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==ve.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,l=r.getView();Nd(l,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}function ah(t){const e=arguments;return function(n){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](n),!!i);++r);return i}}const sC=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},oC=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),i=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(i):e.contains(i)},D0=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?oC(t):!0},lC=ao,N0=function(t){const e=t.originalEvent;return e instanceof PointerEvent&&e.button==0&&!(vE&&J_&&e.ctrlKey)},F0=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},aC=function(t){const e=t.originalEvent;return J_?e.metaKey:e.ctrlKey},uC=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},z0=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},bu=function(t){const e=t.originalEvent;return e instanceof PointerEvent&&e.pointerType=="mouse"},cC=function(t){const e=t.originalEvent;return e instanceof PointerEvent&&e.isPrimary&&e.button===0};class Ao extends Mo{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ve.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ve.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==ve.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,n=this.stopDown(i)}else e.type==ve.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Fd(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}class hC extends Ao{constructor(e){super({stopDown:Oa}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:ah(F0,cC);this.condition_=e.onFocusOnly?ah(D0,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(Fd(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],l=e.map.getView();DE(s,l.getResolution()),md(s,l.getRotation()),l.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),l=n.getPixelFromCoordinateInternal(o),a=n.getCoordinateFromPixelInternal([l[0]-r*Math.cos(s),l[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(a),duration:500,easing:ns})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class dC extends Ao{constructor(e){e=e||{},super({stopDown:Oa}),this.condition_=e.condition?e.condition:sC,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!bu(e))return;const n=e.map,i=n.getView();if(i.getConstraints().rotation===Md)return;const r=n.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const l=o-this.lastAngle_;i.adjustRotationInternal(-l)}this.lastAngle_=o}handleUpEvent(e){return bu(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return bu(e)&&N0(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class fC extends Aa{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],n[0])+i,r.top=Math.min(e[1],n[1])+i,r.width=Math.abs(n[0]-e[0])+i,r.height=Math.abs(n[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new go([r])}getGeometry(){return this.geometry_}}const nr={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ys extends An{constructor(e,n,i){super(e),this.coordinate=n,this.mapBrowserEvent=i}}class gC extends Ao{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new fC(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??N0,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ys(nr.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new ys(n?nr.BOXEND:nr.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ys(nr.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ys(nr.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ys(nr.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class pC extends gC{constructor(e){e=e||{};const n=e.condition?e.condition:uC;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),l=i.getResolution()/o;r=r.clone(),r.scale(l*l)}i.fitInternal(r,{duration:this.duration_,easing:ns})}}const Ei={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class mC extends Mo{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return F0(n)&&z0(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==V.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Ei.DOWN||r==Ei.LEFT||r==Ei.RIGHT||r==Ei.UP)){const o=e.map.getView(),l=o.getResolution()*this.pixelDelta_;let a=0,u=0;r==Ei.DOWN?u=-l:r==Ei.LEFT?a=-l:r==Ei.RIGHT?a=l:u=l;const c=[a,u];md(c,o.getRotation()),iC(o,c,this.duration_),i.preventDefault(),n=!0}}return!n}}class _C extends Mo{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!aC(n)&&z0(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==V.KEYDOWN||e.type==V.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,l=s.getView();Nd(l,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}class yC extends Mo{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:lC;this.condition_=e.onFocusOnly?ah(D0,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==V.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==V.WHEEL&&(s=r.deltaY,r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const l=i.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const a=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),a),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let i=-pe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Nd(n,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class vC extends Ao{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=Oa),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;this.rotationDelta_+=a,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=a}this.lastAngle_=s;const o=e.map,l=o.getView();l.getConstraints().rotation!==Md&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Fd(this.targetPointers))),this.rotating_&&(o.render(),l.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class xC extends Ao{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=Oa),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,l=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/l),this.lastDistance_=l;const a=e.map,u=a.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Fd(this.targetPointers))),a.render(),u.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function EC(t){t=t||{};const e=new sn,n=new nC(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new dC),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new rC({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new hC({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new vC),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new xC({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new mC),e.push(new _C({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new yC({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new pC({duration:t.zoomDuration})),e}const se={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class b0 extends Zt{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[se.OPACITY]=e.opacity!==void 0?e.opacity:1,re(typeof n[se.OPACITY]=="number","Layer opacity must be a number"),n[se.VISIBLE]=e.visible!==void 0?e.visible:!0,n[se.Z_INDEX]=e.zIndex,n[se.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[se.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[se.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[se.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return n.opacity=pe(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return ee()}getLayerStatesArray(e){return ee()}getExtent(){return this.get(se.EXTENT)}getMaxResolution(){return this.get(se.MAX_RESOLUTION)}getMinResolution(){return this.get(se.MIN_RESOLUTION)}getMinZoom(){return this.get(se.MIN_ZOOM)}getMaxZoom(){return this.get(se.MAX_ZOOM)}getOpacity(){return this.get(se.OPACITY)}getSourceState(){return ee()}getVisible(){return this.get(se.VISIBLE)}getZIndex(){return this.get(se.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(se.EXTENT,e)}setMaxResolution(e){this.set(se.MAX_RESOLUTION,e)}setMinResolution(e){this.set(se.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(se.MAX_ZOOM,e)}setMinZoom(e){this.set(se.MIN_ZOOM,e)}setOpacity(e){re(typeof e=="number","Layer opacity must be a number"),this.set(se.OPACITY,e)}setVisible(e){this.set(se.VISIBLE,e)}setZIndex(e){this.set(se.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Xn extends An{constructor(e,n){super(e),this.layer=n}}const ju={LAYERS:"layers"};class is extends b0{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let i=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ju.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new sn(i.slice(),{unique:!0}):re(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new sn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(he),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Q(e,tt.ADD,this.handleLayersAdd_,this),Q(e,tt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(he);Lo(this.listenerKeys_);const n=e.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new Xn("addlayer",s))}this.changed()}registerLayerListeners_(e){const n=[Q(e,Vr.PROPERTYCHANGE,this.handleLayerChange_,this),Q(e,V.CHANGE,this.handleLayerChange_,this)];e instanceof is&&n.push(Q(e,"addlayer",this.handleLayerGroupAdd_,this),Q(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ne(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new Xn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Xn("removelayer",e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new Xn("addlayer",n)),this.changed()}handleLayersRemove_(e){const n=e.element,i=ne(n);this.listenerKeys_[i].forEach(he),delete this.listenerKeys_[i],this.dispatchEvent(new Xn("removelayer",n)),this.changed()}getLayers(){return this.get(ju.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Xn("removelayer",i[r]))}this.set(ju.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,l=n.length;o<l;o++){const a=n[o];a.opacity*=r.opacity,a.visible=a.visible&&r.visible,a.maxResolution=Math.min(a.maxResolution,r.maxResolution),a.minResolution=Math.max(a.minResolution,r.minResolution),a.minZoom=Math.max(a.minZoom,r.minZoom),a.maxZoom=Math.min(a.maxZoom,r.maxZoom),r.extent!==void 0&&(a.extent!==void 0?a.extent=Ni(a.extent,r.extent):a.extent=r.extent),a.zIndex===void 0&&(a.zIndex=s)}return n}getSourceState(){return"ready"}}const Pt={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Va extends b0{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(se.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(se.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(he(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Q(e,V.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof nn?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(n.layerStatesArray){if(r=n.layerStatesArray.find(o=>o.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return zd(r,n.viewState)&&(!s||rt(s,n.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const n=(s=this.getSource())==null?void 0:s.getAttributions();if(!n)return[];const i=e instanceof nn?e.getViewStateAndExtent():e;let r=n(i);return Array.isArray(r)||(r=[r]),r}render(e,n){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(se.MAP,e)}getMapInternal(){return this.get(se.MAP)}setMap(e){this.mapPrecomposeKey_&&(he(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(he(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Q(e,Pt.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Q(this,V.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const n=e.frameState.layerStatesArray,i=this.getLayerState(!1);re(!n.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(i)}setSource(e){this.set(se.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function zd(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}function j0(t,e,n=0,i=t.length-1,r=wC){for(;i>n;){if(i-n>600){const a=i-n+1,u=e-n+1,c=Math.log(a),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(a-h)/a)*(u-a/2<0?-1:1),f=Math.max(n,Math.floor(e-u*h/a+d)),m=Math.min(i,Math.floor(e+(a-u)*h/a+d));j0(t,e,f,m,r)}const s=t[e];let o=n,l=i;for(vs(t,n,e),r(t[i],s)>0&&vs(t,n,i);o<l;){for(vs(t,o,l),o++,l--;r(t[o],s)<0;)o++;for(;r(t[l],s)>0;)l--}r(t[n],s)===0?vs(t,n,l):(l++,vs(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}}function vs(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function wC(t,e){return t<e?-1:t>e?1:0}let G0=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const i=[];if(!cl(e,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const l=n.children[o],a=n.leaf?r(l):l;cl(e,a)&&(n.leaf?i.push(l):Wu(e,a)?this._all(l,i):s.push(l))}n=s.pop()}return i}collides(e){let n=this.data;if(!cl(e,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(cl(e,o)){if(n.leaf||Wu(e,o))return!0;i.push(s)}}n=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ur([]),this}remove(e,n){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let l,a,u;for(;i||s.length;){if(i||(i=s.pop(),a=s[s.length-1],l=o.pop(),u=!0),i.leaf){const c=CC(e,i.children,n);if(c!==-1)return i.children.splice(c,1),s.push(i),this._condense(s),this}!u&&!i.leaf&&Wu(i,r)?(s.push(i),o.push(l),l=0,a=i,i=i.children[0]):a?(l++,i=a.children[l],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const i=[];for(;e;)e.leaf?n.push(...e.children):i.push(...e.children),e=i.pop();return n}_build(e,n,i,r){const s=i-n+1;let o=this._maxEntries,l;if(s<=o)return l=ur(e.slice(n,i+1)),ir(l,this.toBBox),l;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),l=ur([]),l.leaf=!1,l.height=r;const a=Math.ceil(s/o),u=a*Math.ceil(Math.sqrt(o));Hg(e,n,i,u,this.compareMinX);for(let c=n;c<=i;c+=u){const h=Math.min(c+u-1,i);Hg(e,c,h,a,this.compareMinY);for(let d=c;d<=h;d+=a){const f=Math.min(d+a-1,h);l.children.push(this._build(e,d,f,r-1))}}return ir(l,this.toBBox),l}_chooseSubtree(e,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,l;for(let a=0;a<n.children.length;a++){const u=n.children[a],c=Gu(u),h=TC(e,u)-c;h<o?(o=h,s=c<s?c:s,l=u):h===o&&c<s&&(s=c,l=u)}n=l||n.children[0]}return n}_insert(e,n,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(e),Is(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(e,n){const i=e[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),l=ur(i.children.splice(o,i.children.length-o));l.height=i.height,l.leaf=i.leaf,ir(i,this.toBBox),ir(l,this.toBBox),n?e[n-1].children.push(l):this._splitRoot(i,l)}_splitRoot(e,n){this.data=ur([e,n]),this.data.height=e.height+1,this.data.leaf=!1,ir(this.data,this.toBBox)}_chooseSplitIndex(e,n,i){let r,s=1/0,o=1/0;for(let l=n;l<=i-n;l++){const a=Ts(e,0,l,this.toBBox),u=Ts(e,l,i,this.toBBox),c=IC(a,u),h=Gu(a)+Gu(u);c<s?(s=c,r=l,o=h<o?h:o):c===s&&h<o&&(o=h,r=l)}return r||i-n}_chooseSplitAxis(e,n,i){const r=e.leaf?this.compareMinX:SC,s=e.leaf?this.compareMinY:RC,o=this._allDistMargin(e,n,i,r),l=this._allDistMargin(e,n,i,s);o<l&&e.children.sort(r)}_allDistMargin(e,n,i,r){e.children.sort(r);const s=this.toBBox,o=Ts(e,0,n,s),l=Ts(e,i-n,i,s);let a=ul(o)+ul(l);for(let u=n;u<i-n;u++){const c=e.children[u];Is(o,e.leaf?s(c):c),a+=ul(o)}for(let u=i-n-1;u>=n;u--){const c=e.children[u];Is(l,e.leaf?s(c):c),a+=ul(l)}return a}_adjustParentBBoxes(e,n,i){for(let r=i;r>=0;r--)Is(n[r],e)}_condense(e){for(let n=e.length-1,i;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():ir(e[n],this.toBBox)}};function CC(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function ir(t,e){Ts(t,0,t.children.length,e,t)}function Ts(t,e,n,i,r){r||(r=ur(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];Is(r,t.leaf?i(o):o)}return r}function Is(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function SC(t,e){return t.minX-e.minX}function RC(t,e){return t.minY-e.minY}function Gu(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ul(t){return t.maxX-t.minX+(t.maxY-t.minY)}function TC(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function IC(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function Wu(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function cl(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ur(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Hg(t,e,n,i,r){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=i)continue;const o=e+Math.ceil((n-e)/i/2)*i;j0(t,o,e,n,r),s.push(e,o,o,n)}}const bd=[NaN,NaN,NaN,0];let Uu;function LC(){return Uu||(Uu=ke(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Uu}const PC=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,kC=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,MC=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,AC=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function hl(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function Us(t){throw new Error('failed to parse "'+t+'" as color')}function W0(t){if(t.toLowerCase().startsWith("rgb")){const s=t.match(kC)||t.match(PC)||t.match(MC);if(s){const o=s[4],l=100/255;return[pe(hl(s[1],l)+.5|0,0,255),pe(hl(s[2],l)+.5|0,0,255),pe(hl(s[3],l)+.5|0,0,255),o!==void 0?pe(hl(o,100),0,1):1]}Us(t)}if(t.startsWith("#")){if(AC.test(t)){const s=t.substring(1),o=s.length<=4?1:2,l=[0,0,0,255];for(let a=0,u=s.length;a<u;a+=o){let c=parseInt(s.substring(a,a+o),16);o===1&&(c+=c<<4),l[a/o]=c}return l[3]=l[3]/255,l}Us(t)}const e=LC();e.fillStyle="#abcdef";let n=e.fillStyle;e.fillStyle=t,e.fillStyle===n&&(e.fillStyle="#fedcba",n=e.fillStyle,e.fillStyle=t,e.fillStyle===n&&Us(t));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return W0(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=Na(r[3]/255,3),r}function OC(t){return typeof t=="string"?t:Gd(t)}const DC=1024,xs={};let Xu=0;function NC(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function Bu(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function Yu(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function Vu(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function Ku(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function qg(t){const e=Vu(t[0]),n=Vu(t[1]),i=Vu(t[2]),r=Ku(e*.222488403+n*.716873169+i*.06060791),s=500*(Ku(e*.452247074+n*.399439023+i*.148375274)-r),o=200*(r-Ku(e*.016863605+n*.117638439+i*.865350722)),l=Math.atan2(o,s)*(180/Math.PI);return[116*r-16,Math.sqrt(s*s+o*o),l<0?l+360:l,t[3]]}function FC(t){const e=(t[0]+16)/116,n=t[1],i=t[2]*Math.PI/180,r=Yu(e),s=Yu(e+n/500*Math.cos(i)),o=Yu(e-n/200*Math.sin(i)),l=Bu(s*3.021973625-r*1.617392459-o*.404875592),a=Bu(s*-.943766287+r*1.916279586+o*.027607165),u=Bu(s*.069407491-r*.22898585+o*1.159737864);return[pe(l+.5|0,0,255),pe(a+.5|0,0,255),pe(u+.5|0,0,255),t[3]]}function jd(t){if(t==="none")return bd;if(xs.hasOwnProperty(t))return xs[t];if(Xu>=DC){let n=0;for(const i in xs)n++&3||(delete xs[i],--Xu)}const e=W0(t);e.length!==4&&Us(t);for(const n of e)isNaN(n)&&Us(t);return xs[t]=e,++Xu,e}function Hr(t){return Array.isArray(t)?t:jd(t)}function Gd(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let i=t[2];i!=(i|0)&&(i=i+.5|0);const r=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+i+","+r+")"}function Qg(t){return t[0]>0&&t[1]>0}function zC(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function lt(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}let Zi=0;const He=1<<Zi++,q=1<<Zi++,nt=1<<Zi++,Xt=1<<Zi++,Xi=1<<Zi++,Ls=1<<Zi++,dl=Math.pow(2,Zi)-1,Wd={[He]:"boolean",[q]:"number",[nt]:"string",[Xt]:"color",[Xi]:"number[]",[Ls]:"size"},bC=Object.keys(Wd).map(Number).sort(Cn);function jC(t){return t in Wd}function Ps(t){const e=[];for(const n of bC)ks(t,n)&&e.push(Wd[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function ks(t,e){return(t&e)===e}function Nn(t,e){return t===e}class Ie{constructor(e,n){if(!jC(e))throw new Error(`literal expressions must have a specific type, got ${Ps(e)}`);this.type=e,this.value=n}}class GC{constructor(e,n,...i){this.type=e,this.operator=n,this.args=i}}function U0(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ze(t,e,n){switch(typeof t){case"boolean":{if(Nn(e,nt))return new Ie(nt,t?"true":"false");if(!ks(e,He))throw new Error(`got a boolean, but expected ${Ps(e)}`);return new Ie(He,t)}case"number":{if(Nn(e,Ls))return new Ie(Ls,lt(t));if(Nn(e,He))return new Ie(He,!!t);if(Nn(e,nt))return new Ie(nt,t.toString());if(!ks(e,q))throw new Error(`got a number, but expected ${Ps(e)}`);return new Ie(q,t)}case"string":{if(Nn(e,Xt))return new Ie(Xt,jd(t));if(Nn(e,He))return new Ie(He,!!t);if(!ks(e,nt))throw new Error(`got a string, but expected ${Ps(e)}`);return new Ie(nt,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return qC(t,e,n);for(const i of t)if(typeof i!="number")throw new Error("expected an array of numbers");if(Nn(e,Ls)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new Ie(Ls,t)}if(Nn(e,Xt)){if(t.length===3)return new Ie(Xt,[...t,1]);if(t.length===4)return new Ie(Xt,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!ks(e,Xi))throw new Error(`got an array of numbers, but expected ${Ps(e)}`);return new Ie(Xi,t)}const T={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},WC={[T.Get]:B($(1,1/0),Jg),[T.Var]:B($(1,1),UC),[T.Has]:B($(1,1/0),Jg),[T.Id]:B(XC,rr),[T.Concat]:B($(2,1/0),te(nt)),[T.GeometryType]:B(BC,rr),[T.LineMetric]:B(rr),[T.Resolution]:B($u,rr),[T.Zoom]:B($u,rr),[T.Time]:B($u,rr),[T.Any]:B($(2,1/0),te(He)),[T.All]:B($(2,1/0),te(He)),[T.Not]:B($(1,1),te(He)),[T.Equal]:B($(2,2),te(dl)),[T.NotEqual]:B($(2,2),te(dl)),[T.GreaterThan]:B($(2,2),te(q)),[T.GreaterThanOrEqualTo]:B($(2,2),te(q)),[T.LessThan]:B($(2,2),te(q)),[T.LessThanOrEqualTo]:B($(2,2),te(q)),[T.Multiply]:B($(2,1/0),ep),[T.Coalesce]:B($(2,1/0),ep),[T.Divide]:B($(2,2),te(q)),[T.Add]:B($(2,1/0),te(q)),[T.Subtract]:B($(2,2),te(q)),[T.Clamp]:B($(3,3),te(q)),[T.Mod]:B($(2,2),te(q)),[T.Pow]:B($(2,2),te(q)),[T.Abs]:B($(1,1),te(q)),[T.Floor]:B($(1,1),te(q)),[T.Ceil]:B($(1,1),te(q)),[T.Round]:B($(1,1),te(q)),[T.Sin]:B($(1,1),te(q)),[T.Cos]:B($(1,1),te(q)),[T.Atan]:B($(1,2),te(q)),[T.Sqrt]:B($(1,1),te(q)),[T.Match]:B($(4,1/0),tp,VC),[T.Between]:B($(3,3),te(q)),[T.Interpolate]:B($(6,1/0),tp,KC),[T.Case]:B($(3,1/0),YC,$C),[T.In]:B($(2,2),ZC),[T.Number]:B($(1,1/0),te(dl)),[T.String]:B($(1,1/0),te(dl)),[T.Array]:B($(1,1/0),te(q)),[T.Color]:B($(1,4),te(q)),[T.Band]:B($(1,3),te(q)),[T.Palette]:B($(2,2),HC),[T.ToString]:B($(1,1),te(He|q|nt|Xt))};function Jg(t,e,n){const i=t.length-1,r=new Array(i);for(let s=0;s<i;++s){const o=t[s+1];switch(typeof o){case"number":{r[s]=new Ie(q,o);break}case"string":{r[s]=new Ie(nt,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&n.properties.add(String(o))}return r}function UC(t,e,n){const i=t[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return n.variables.add(i),[new Ie(nt,i)]}function XC(t,e,n){n.featureId=!0}function BC(t,e,n){n.geometryType=!0}function $u(t,e,n){n.mapState=!0}function rr(t,e,n){const i=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function $(t,e){return function(n,i,r){const s=n[0],o=n.length-1;if(t===e){if(o!==t){const l=t===1?"":"s";throw new Error(`expected ${t} argument${l} for ${s}, got ${o}`)}}else if(o<t||o>e){const l=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${l} arguments for ${s}, got ${o}`)}}}function ep(t,e,n){const i=t.length-1,r=new Array(i);for(let s=0;s<i;++s){const o=ze(t[s+1],e,n);r[s]=o}return r}function te(t){return function(e,n,i){const r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const l=ze(e[o+1],t,i);s[o]=l}return s}}function YC(t,e,n){const i=t[0],r=t.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function tp(t,e,n){const i=t[0],r=t.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function VC(t,e,n){const i=t.length-1,r=nt|q|He,s=ze(t[1],r,n),o=ze(t[t.length-1],e,n),l=new Array(i-2);for(let a=0;a<i-2;a+=2){try{const u=ze(t[a+2],s.type,n);l[a]=u}catch(u){throw new Error(`failed to parse argument ${a+1} of match expression: ${u.message}`)}try{const u=ze(t[a+3],o.type,n);l[a+1]=u}catch(u){throw new Error(`failed to parse argument ${a+2} of match expression: ${u.message}`)}}return[s,...l,o]}function KC(t,e,n){const i=t[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const a=i[1];if(typeof a!="number"||a<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(a)} instead`);r=a;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new Ie(q,r);let o;try{o=ze(t[2],q,n)}catch(a){throw new Error(`failed to parse argument 1 in interpolate expression: ${a.message}`)}const l=new Array(t.length-3);for(let a=0;a<l.length;a+=2){try{const u=ze(t[a+3],q,n);l[a]=u}catch(u){throw new Error(`failed to parse argument ${a+2} for interpolate expression: ${u.message}`)}try{const u=ze(t[a+4],e,n);l[a+1]=u}catch(u){throw new Error(`failed to parse argument ${a+3} for interpolate expression: ${u.message}`)}}return[s,o,...l]}function $C(t,e,n){const i=ze(t[t.length-1],e,n),r=new Array(t.length-1);for(let s=0;s<r.length-1;s+=2){try{const o=ze(t[s+1],He,n);r[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=ze(t[s+2],i.type,n);r[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return r[r.length-1]=i,r}function ZC(t,e,n){let i=t[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=nt}else r=q;const s=new Array(i.length);for(let l=0;l<s.length;l++)try{const a=ze(i[l],r,n);s[l]=a}catch(a){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${a.message}`)}return[ze(t[1],r,n),...s]}function HC(t,e,n){let i;try{i=ze(t[1],q,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const r=t[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let o=0;o<s.length;o++){let l;try{l=ze(r[o],Xt,n)}catch(a){throw new Error(`failed to parse color at index ${o} in palette expression: ${a.message}`)}if(!(l instanceof Ie))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=l}return[i,...s]}function B(...t){return function(e,n,i){const r=e[0];let s;for(let o=0;o<t.length;o++){const l=t[o](e,n,i);if(o==t.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");s=l}}return new GC(n,r,...s)}}function qC(t,e,n){const i=t[0],r=WC[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(t,e,n)}function X0(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return X0(t.getGeometries()[0]);default:return""}}function B0(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function On(t,e,n){const i=ze(t,e,n);return $t(i)}function $t(t,e){if(t instanceof Ie){if(t.type===Xt&&typeof t.value=="string"){const i=jd(t.value);return function(){return i}}return function(){return t.value}}const n=t.operator;switch(n){case T.Number:case T.String:case T.Coalesce:return QC(t);case T.Get:case T.Var:case T.Has:return JC(t);case T.Id:return i=>i.featureId;case T.GeometryType:return i=>i.geometryType;case T.Concat:{const i=t.args.map(r=>$t(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case T.Resolution:return i=>i.resolution;case T.Any:case T.All:case T.Between:case T.In:case T.Not:return tS(t);case T.Equal:case T.NotEqual:case T.LessThan:case T.LessThanOrEqualTo:case T.GreaterThan:case T.GreaterThanOrEqualTo:return eS(t);case T.Multiply:case T.Divide:case T.Add:case T.Subtract:case T.Clamp:case T.Mod:case T.Pow:case T.Abs:case T.Floor:case T.Ceil:case T.Round:case T.Sin:case T.Cos:case T.Atan:case T.Sqrt:return nS(t);case T.Case:return iS(t);case T.Match:return rS(t);case T.Interpolate:return sS(t);case T.ToString:return oS(t);default:throw new Error(`Unsupported operator ${n}`)}}function QC(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$t(t.args[s]);switch(n){case T.Coalesce:return s=>{for(let o=0;o<i;++o){const l=r[o](s);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case T.Number:case T.String:return s=>{for(let o=0;o<i;++o){const l=r[o](s);if(typeof l===n)return l}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function JC(t,e){const i=t.args[0].value;switch(t.operator){case T.Get:return r=>{const s=t.args;let o=r.properties[i];for(let l=1,a=s.length;l<a;++l){const c=s[l].value;o=o[c]}return o};case T.Var:return r=>r.variables[i];case T.Has:return r=>{const s=t.args;if(!(i in r.properties))return!1;let o=r.properties[i];for(let l=1,a=s.length;l<a;++l){const c=s[l].value;if(!o||!Object.hasOwn(o,c))return!1;o=o[c]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function eS(t,e){const n=t.operator,i=$t(t.args[0]),r=$t(t.args[1]);switch(n){case T.Equal:return s=>i(s)===r(s);case T.NotEqual:return s=>i(s)!==r(s);case T.LessThan:return s=>i(s)<r(s);case T.LessThanOrEqualTo:return s=>i(s)<=r(s);case T.GreaterThan:return s=>i(s)>r(s);case T.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function tS(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$t(t.args[s]);switch(n){case T.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case T.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case T.Between:return s=>{const o=r[0](s),l=r[1](s),a=r[2](s);return o>=l&&o<=a};case T.In:return s=>{const o=r[0](s);for(let l=1;l<i;++l)if(o===r[l](s))return!0;return!1};case T.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function nS(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$t(t.args[s]);switch(n){case T.Multiply:return s=>{let o=1;for(let l=0;l<i;++l)o*=r[l](s);return o};case T.Divide:return s=>r[0](s)/r[1](s);case T.Add:return s=>{let o=0;for(let l=0;l<i;++l)o+=r[l](s);return o};case T.Subtract:return s=>r[0](s)-r[1](s);case T.Clamp:return s=>{const o=r[0](s),l=r[1](s);if(o<l)return l;const a=r[2](s);return o>a?a:o};case T.Mod:return s=>r[0](s)%r[1](s);case T.Pow:return s=>Math.pow(r[0](s),r[1](s));case T.Abs:return s=>Math.abs(r[0](s));case T.Floor:return s=>Math.floor(r[0](s));case T.Ceil:return s=>Math.ceil(r[0](s));case T.Round:return s=>Math.round(r[0](s));case T.Sin:return s=>Math.sin(r[0](s));case T.Cos:return s=>Math.cos(r[0](s));case T.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case T.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function iS(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=$t(t.args[r]);return r=>{for(let s=0;s<n-1;s+=2)if(i[s](r))return i[s+1](r);return i[n-1](r)}}function rS(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=$t(t.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n-1;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function sS(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=$t(t.args[r]);return r=>{const s=i[0](r),o=i[1](r);let l,a;for(let u=2;u<n;u+=2){const c=i[u](r);let h=i[u+1](r);const d=Array.isArray(h);if(d&&(h=NC(h)),c>=o)return u===2?h:d?lS(s,o,l,a,c,h):Ms(s,o,l,a,c,h);l=c,a=h}return a}}function oS(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=$t(t.args[s]);switch(n){case T.ToString:return s=>{const o=r[0](s);return t.args[0].type===Xt?Gd(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Ms(t,e,n,i,r,s){const o=r-n;if(o===0)return i;const l=e-n,a=t===1?l/o:(Math.pow(t,l)-1)/(Math.pow(t,o)-1);return i+a*(s-i)}function lS(t,e,n,i,r,s){if(r-n===0)return i;const l=qg(i),a=qg(s);let u=a[2]-l[2];u>180?u-=360:u<-180&&(u+=360);const c=[Ms(t,e,n,l[0],r,a[0]),Ms(t,e,n,l[1],r,a[1]),l[2]+Ms(t,e,n,0,r,u),Ms(t,e,n,i[3],r,s[3])];return FC(c)}const Z={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function aS(t,e,n){const i=t;let r=!0,s=!1,o=!1;const l=[ea(i,V.LOAD,function(){o=!0,s||e()})];return i.src&&t0?(s=!0,i.decode().then(function(){r&&e()}).catch(function(a){r&&(o?e():n())})):l.push(ea(i,V.ERROR,n)),function(){r=!1,l.forEach(he)}}function uS(t,e){return new Promise((n,i)=>{function r(){o(),n(t)}function s(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s)})}function cS(t,e){return e&&(t.src=e),t.src&&t0?new Promise((n,i)=>t.decode().then(()=>n(t)).catch(r=>t.complete&&t.width?n(t):i(r))):uS(t)}class hS{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const i=this.cache_[n];!(e++&3)&&!i.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,i){const r=Zu(e,n,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,n,i){const r=Zu(e,n,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,n,i,r,s){const o=Zu(e,n,i),l=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===Z.IDLE&&r.load(),r.getImageState()===Z.LOADING?r.ready().then(()=>{this.patternCache_[o]=la().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=la().createPattern(r.getImage(1),"repeat")),l||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Zu(t,e,n){const i=n?Hr(n):"null";return e+":"+t+":"+i}const kt=new hS;let Es=null;class Y0 extends Da{constructor(e,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Z.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Z.LOADED){Es||(Es=ke(1,1,void 0,{willReadFrequently:!0})),Es.drawImage(this.image_,0,0);try{Es.getImageData(0,0,1,1),this.tainted_=!1}catch{Es=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(V.CHANGE)}handleImageError_(){this.imageState_=Z.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Z.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],i=ke(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=Z.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&cS(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Z.LOADED)return;const n=this.image_,i=ke(Math.ceil(n.width*e),Math.ceil(n.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(n,0,0),i.globalCompositeOperation="multiply",i.fillStyle=OC(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(n,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Z.LOADED||this.imageState_===Z.ERROR)e();else{const n=()=>{(this.imageState_===Z.LOADED||this.imageState_===Z.ERROR)&&(this.removeEventListener(V.CHANGE,n),e())};this.addEventListener(V.CHANGE,n)}})),this.ready_}}function Ud(t,e,n,i,r,s){let o=e===void 0?void 0:kt.get(e,n,r);return o||(o=new Y0(t,t&&"src"in t?t.src||void 0:e,n,i,r),kt.set(e,n,r,o,s)),s&&o&&!kt.getPattern(e,n,r)&&kt.set(e,n,r,o,s),o}function on(t){return t?Array.isArray(t)?Gd(t):typeof t=="object"&&"src"in t?dS(t):t:null}function dS(t){if(!t.offset||!t.size)return kt.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=kt.getPattern(e,void 0,t.color);if(n)return n;const i=kt.get(t.src,"anonymous",null);if(i.getImageState()!==Z.LOADED)return null;const r=ke(t.size[0],t.size[1]);return r.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),Ud(r.canvas,e,void 0,Z.LOADED,t.color,!0),kt.getPattern(e,void 0,t.color)}const V0="10px sans-serif",it="#000",qr="round",Sn=[],Rn=0,Qr="round",po=10,mo="#000",_o="center",aa="middle",Mi=[0,0,0,0],yo=1,pn=new Zt;let cr=null,uh;const ch={},fS=function(){const e="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function l(u,c,h){let d=!0;for(let f=0;f<i;++f){const m=n[f];if(o=ua(u+" "+c+" "+e+m,r),h!=m){const _=ua(u+" "+c+" "+e+h+","+m,r);d=d&&_!=o}}return!!d}function a(){let u=!0;const c=pn.getKeys();for(let h=0,d=c.length;h<d;++h){const f=c[h];if(pn.get(f)<100){const[m,_,v]=f.split(`
`);l(m,_,v)?(Lo(ch),cr=null,uh=void 0,pn.set(f,100)):(pn.set(f,pn.get(f)+1,!0),u=!1)}}u&&(clearInterval(s),s=void 0)}return function(u){const c=A0(u);if(!c)return;const h=c.families;for(let d=0,f=h.length;d<f;++d){const m=h[d],_=c.style+`
`+c.weight+`
`+m;pn.get(_)===void 0&&(pn.set(_,100,!0),l(c.style,c.weight,m)||(pn.set(_,0,!0),s===void 0&&(s=setInterval(a,32))))}}}(),gS=function(){let t;return function(e){let n=ch[e];if(n==null){if(e0){const i=A0(e),r=K0(e,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);ch[e]=n}return n}}();function K0(t,e){return cr||(cr=ke(1,1)),t!=uh&&(cr.font=t,uh=cr.font),cr.measureText(e)}function ua(t,e){return K0(t,e).width}function np(t,e,n){if(e in n)return n[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,ua(t,s)),0);return n[e]=i,i}function pS(t,e){const n=[],i=[],r=[];let s=0,o=0,l=0,a=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){s=Math.max(s,o),r.push(o),o=0,l+=a,a=0;continue}const d=e[u+1]||t.font,f=ua(d,h);n.push(f),o+=f;const m=gS(d);i.push(m),a=Math.max(a,m)}return{width:s,height:l,widths:n,heights:i,lineWidths:r}}function mS(t,e,n,i,r,s,o,l,a,u,c){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(a,u),t.scale(c[0],c[1]),_S(i,t)):c[0]<0||c[1]<0?(t.translate(a,u),t.scale(c[0],c[1]),t.drawImage(i,r,s,o,l,0,0,o,l)):t.drawImage(i,r,s,o,l,a,u,o*c[0],l*c[1]),t.restore()}function _S(t,e){const n=t.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}class Ka{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=lt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ka({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ee()}getImage(e){return ee()}getHitDetectionImage(){return ee()}getPixelRatio(e){return 1}getImageState(){return ee()}getImageSize(){return ee()}getOrigin(){return ee()}getSize(){return ee()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=lt(e)}listenImageChange(e){ee()}load(){ee()}unlistenImageChange(e){ee()}ready(){return Promise.resolve()}}class $a extends Ka{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Z.LOADING:Z.LOADED,this.imageState_===Z.LOADING&&this.ready().then(()=>this.imageState_=Z.LOADED),this.render()}clone(){const e=this.getScale(),n=new $a({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-n[0]/i[0],e[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,o;const n=(s=this.fill_)==null?void 0:s.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let r=(o=kt.get(i,null,null))==null?void 0:o.getImage(1);if(!r){const l=this.renderOptions_,a=Math.ceil(l.size*e),u=ke(a,a);this.draw_(l,u,e),r=u.canvas,kt.set(i,null,null,new Y0(r,void 0,null,Z.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,i){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const w=r;r=s,s=w}const o=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/o,a=s*Math.sin(l),u=Math.sqrt(s*s-a*a),c=r-u,h=Math.sqrt(a*a+c*c),d=h/a;if(e==="miter"&&d<=i)return d*n;const f=n/2/d,m=n/2*(c/h),v=Math.sqrt((r+f)*(r+f)+m*m)-r;if(this.radius2_===void 0||e==="bevel")return v*2;const p=r*Math.sin(l),g=Math.sqrt(r*r-p*p),y=s-g,E=Math.sqrt(p*p+y*y)/p;if(E<=i){const w=E*n/2-s-r;return 2*Math.max(v,w)}return v*2}createRenderOptions(){let e=qr,n=Qr,i=0,r=null,s=0,o,l=0;this.stroke_&&(o=on(this.stroke_.getColor()??mo),l=this.stroke_.getWidth()??yo,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Qr,e=this.stroke_.getLineCap()??qr,i=this.stroke_.getMiterLimit()??po);const a=this.calculateLineJoinSize_(n,l,i),u=Math.max(this.radius,this.radius2_||0),c=Math.ceil(2*u+a);return{strokeStyle:o,strokeWidth:l,size:c,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,i){if(n.scale(i,i),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=it),n.fillStyle=on(r),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Hr(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(n=ke(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const i=this.radius;if(n===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let l=0;l<n;l++){const a=s+l*o,u=l%2===0?i:r;e.lineTo(u*Math.cos(a),u*Math.sin(a))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=it,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Oo extends $a{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new Oo({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}}class rs{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new rs({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=Ud(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===Z.IDLE&&n.load(),n.getImageState()===Z.LOADING&&(this.patternImage_=n)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?ne(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Hr(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ip(t,e,n,i){return n!==void 0&&i!==void 0?[n/t,i/e]:n!==void 0?n/t:i!==void 0?i/e:1}class Za extends Ka{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let l=e.src;re(!(l!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&o&&(l=o.src||ne(o)),re(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),re(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let a;if(e.src!==void 0?a=Z.IDLE:o!==void 0&&("complete"in o?o.complete?a=o.src?Z.LOADED:Z.IDLE:a=Z.LOADING:a=Z.LOADED),this.color_=e.color!==void 0?Hr(e.color):null,this.iconImage_=Ud(o,l,this.crossOrigin_,a,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(ip(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}u!==void 0&&this.setScale(ip(u,c,e.width,e.height))}}clone(){let e,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Za({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),i=this.getScaleArray();return[e[0]-n[0]/i[0],e[1]+n[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Z.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Z.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(V.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(V.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Do{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Do({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class ai{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=rp,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new ai({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=rp,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function yS(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(re(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let Hu=null;function $0(t,e){if(!Hu){const n=new rs({color:"rgba(255,255,255,0.4)"}),i=new Do({color:"#3399CC",width:1.25});Hu=[new ai({image:new Oo({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return Hu}function rp(t){return t.getGeometry()}const vS="#333";class Xd{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=lt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new rs({color:vS}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Xd({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=lt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function xS(t){return!0}function ES(t){const e=U0(),n=wS(t,e),i=B0();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return e.geometryType&&(i.geometryType=X0(r.getGeometry())),n(i)}}function sp(t){const e=U0(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=hh(t[o],e);const r=B0(),s=new Array(n);return function(o,l){if(r.properties=o.getPropertiesInternal(),r.resolution=l,e.featureId){const u=o.getId();u!==void 0?r.featureId=u:r.featureId=null}let a=0;for(let u=0;u<n;++u){const c=i[u](r);c&&(s[a]=c,a+=1)}return s.length=a,s}}function wS(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const s=t[r],o="filter"in s?On(s.filter,He,e):xS;let l;if(Array.isArray(s.style)){const a=s.style.length;l=new Array(a);for(let u=0;u<a;++u)l[u]=hh(s.style[u],e)}else l=[hh(s.style,e)];i[r]={filter:o,styles:l}}return function(r){const s=[];let o=!1;for(let l=0;l<n;++l){const a=i[l].filter;if(a(r)&&!(t[l].else&&o)){o=!0;for(const u of i[l].styles){const c=u(r);c&&s.push(c)}}}return s}}function hh(t,e){const n=vo(t,"",e),i=xo(t,"",e),r=CS(t,e),s=SS(t,e),o=st(t,"z-index",e);if(!n&&!i&&!r&&!s&&!Kr(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const l=new ai;return function(a){let u=!0;if(n){const c=n(a);c&&(u=!1),l.setFill(c)}if(i){const c=i(a);c&&(u=!1),l.setStroke(c)}if(r){const c=r(a);c&&(u=!1),l.setText(c)}if(s){const c=s(a);c&&(u=!1),l.setImage(c)}return o&&l.setZIndex(o(a)),u?null:l}}function vo(t,e,n){let i;if(e+"fill-pattern-src"in t)i=LS(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return s=>null;i=Bd(t,e+"fill-color",n)}if(!i)return null;const r=new rs;return function(s){const o=i(s);return o===bd?null:(r.setColor(o),r)}}function xo(t,e,n){const i=st(t,e+"stroke-width",n),r=Bd(t,e+"stroke-color",n);if(!i&&!r)return null;const s=vn(t,e+"stroke-line-cap",n),o=vn(t,e+"stroke-line-join",n),l=Z0(t,e+"stroke-line-dash",n),a=st(t,e+"stroke-line-dash-offset",n),u=st(t,e+"stroke-miter-limit",n),c=new Do;return function(h){if(r){const d=r(h);if(d===bd)return null;c.setColor(d)}if(i&&c.setWidth(i(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return l&&c.setLineDash(l(h)),a&&c.setLineDashOffset(a(h)),u&&c.setMiterLimit(u(h)),c}}function CS(t,e){const n="text-",i=vn(t,n+"value",e);if(!i)return null;const r=vo(t,n,e),s=vo(t,n+"background-",e),o=xo(t,n,e),l=xo(t,n+"background-",e),a=vn(t,n+"font",e),u=st(t,n+"max-angle",e),c=st(t,n+"offset-x",e),h=st(t,n+"offset-y",e),d=zr(t,n+"overflow",e),f=vn(t,n+"placement",e),m=st(t,n+"repeat",e),_=Ha(t,n+"scale",e),v=zr(t,n+"rotate-with-view",e),p=st(t,n+"rotation",e),g=vn(t,n+"align",e),y=vn(t,n+"justify",e),x=vn(t,n+"baseline",e),E=zr(t,n+"keep-upright",e),w=Z0(t,n+"padding",e),S=qa(t,n+"declutter-mode"),R=new Xd({declutterMode:S});return function(L){if(R.setText(i(L)),r&&R.setFill(r(L)),s&&R.setBackgroundFill(s(L)),o&&R.setStroke(o(L)),l&&R.setBackgroundStroke(l(L)),a&&R.setFont(a(L)),u&&R.setMaxAngle(u(L)),c&&R.setOffsetX(c(L)),h&&R.setOffsetY(h(L)),d&&R.setOverflow(d(L)),f){const k=f(L);if(k!=="point"&&k!=="line")throw new Error("Expected point or line for text-placement");R.setPlacement(k)}if(m&&R.setRepeat(m(L)),_&&R.setScale(_(L)),v&&R.setRotateWithView(v(L)),p&&R.setRotation(p(L)),g){const k=g(L);if(k!=="left"&&k!=="center"&&k!=="right"&&k!=="end"&&k!=="start")throw new Error("Expected left, right, center, start, or end for text-align");R.setTextAlign(k)}if(y){const k=y(L);if(k!=="left"&&k!=="right"&&k!=="center")throw new Error("Expected left, right, or center for text-justify");R.setJustify(k)}if(x){const k=x(L);if(k!=="bottom"&&k!=="top"&&k!=="middle"&&k!=="alphabetic"&&k!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");R.setTextBaseline(k)}return w&&R.setPadding(w(L)),E&&R.setKeepUpright(E(L)),R}}function SS(t,e){return"icon-src"in t?RS(t,e):"shape-points"in t?TS(t,e):"circle-radius"in t?IS(t,e):null}function RS(t,e){const n="icon-",i=n+"src",r=H0(t[i],i),s=ca(t,n+"anchor",e),o=Ha(t,n+"scale",e),l=st(t,n+"opacity",e),a=ca(t,n+"displacement",e),u=st(t,n+"rotation",e),c=zr(t,n+"rotate-with-view",e),h=lp(t,n+"anchor-origin"),d=ap(t,n+"anchor-x-units"),f=ap(t,n+"anchor-y-units"),m=AS(t,n+"color"),_=kS(t,n+"cross-origin"),v=MS(t,n+"offset"),p=lp(t,n+"offset-origin"),g=ha(t,n+"width"),y=ha(t,n+"height"),x=PS(t,n+"size"),E=qa(t,n+"declutter-mode"),w=new Za({src:r,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:m,crossOrigin:_,offset:v,offsetOrigin:p,height:y,width:g,size:x,declutterMode:E});return function(S){return l&&w.setOpacity(l(S)),a&&w.setDisplacement(a(S)),u&&w.setRotation(u(S)),c&&w.setRotateWithView(c(S)),o&&w.setScale(o(S)),s&&w.setAnchor(s(S)),w}}function TS(t,e){const n="shape-",i=n+"points",r=n+"radius",s=dh(t[i],i),o=dh(t[r],r),l=vo(t,n,e),a=xo(t,n,e),u=Ha(t,n+"scale",e),c=ca(t,n+"displacement",e),h=st(t,n+"rotation",e),d=zr(t,n+"rotate-with-view",e),f=ha(t,n+"radius2"),m=ha(t,n+"angle"),_=qa(t,n+"declutter-mode"),v=new $a({points:s,radius:o,radius2:f,angle:m,declutterMode:_});return function(p){return l&&v.setFill(l(p)),a&&v.setStroke(a(p)),c&&v.setDisplacement(c(p)),h&&v.setRotation(h(p)),d&&v.setRotateWithView(d(p)),u&&v.setScale(u(p)),v}}function IS(t,e){const n="circle-",i=vo(t,n,e),r=xo(t,n,e),s=st(t,n+"radius",e),o=Ha(t,n+"scale",e),l=ca(t,n+"displacement",e),a=st(t,n+"rotation",e),u=zr(t,n+"rotate-with-view",e),c=qa(t,n+"declutter-mode"),h=new Oo({radius:5,declutterMode:c});return function(d){return s&&h.setRadius(s(d)),i&&h.setFill(i(d)),r&&h.setStroke(r(d)),l&&h.setDisplacement(l(d)),a&&h.setRotation(a(d)),u&&h.setRotateWithView(u(d)),o&&h.setScale(o(d)),h}}function st(t,e,n){if(!(e in t))return;const i=On(t[e],q,n);return function(r){return dh(i(r),e)}}function vn(t,e,n){if(!(e in t))return null;const i=On(t[e],nt,n);return function(r){return H0(i(r),e)}}function LS(t,e,n){const i=vn(t,e+"pattern-src",n),r=op(t,e+"pattern-offset",n),s=op(t,e+"pattern-size",n),o=Bd(t,e+"color",n);return function(l){return{src:i(l),offset:r&&r(l),size:s&&s(l),color:o&&o(l)}}}function zr(t,e,n){if(!(e in t))return null;const i=On(t[e],He,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function Bd(t,e,n){if(!(e in t))return null;const i=On(t[e],Xt,n);return function(r){return q0(i(r),e)}}function Z0(t,e,n){if(!(e in t))return null;const i=On(t[e],Xi,n);return function(r){return No(i(r),e)}}function ca(t,e,n){if(!(e in t))return null;const i=On(t[e],Xi,n);return function(r){const s=No(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function op(t,e,n){if(!(e in t))return null;const i=On(t[e],Xi,n);return function(r){return Q0(i(r),e)}}function Ha(t,e,n){if(!(e in t))return null;const i=On(t[e],Xi|q,n);return function(r){return OS(i(r),e)}}function ha(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function PS(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return lt(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function kS(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function lp(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function ap(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function MS(t,e){const n=t[e];if(n!==void 0)return No(n,e)}function qa(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function AS(t,e){const n=t[e];if(n!==void 0)return q0(n,e)}function No(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if(typeof t[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function H0(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function dh(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function q0(t,e){if(typeof t=="string")return t;const n=No(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function Q0(t,e){const n=No(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function OS(t,e){return typeof t=="number"?t:Q0(t,e)}const up={RENDER_ORDER:"renderOrder"};class J0 extends Va{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(up.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new G0(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(up.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?$0:e;const n=DS(e);this.styleFunction_=e===null?void 0:yS(n),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function DS(t){if(t===void 0)return $0;if(!t)return null;if(typeof t=="function"||t instanceof ai)return t;if(!Array.isArray(t))return sp([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof ai){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof ai))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return ES(r)}return sp(t)}class ey extends An{constructor(e,n,i,r){super(e),this.inversePixelTransform=n,this.frameState=i,this.context=r}}class NS extends Aa{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){ee()}calculateMatrices2D(e){const n=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;kn(i,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),w0(r,i)}forEachFeatureAtCoordinate(e,n,i,r,s,o,l,a){let u;const c=n.viewState;function h(x,E,w,S){return s.call(o,E,x?w:null,S)}const d=c.projection,f=d0(e.slice(),d),m=[[0,0]];if(d.canWrapX()&&r){const x=d.getExtent(),E=ie(x);m.push([-E,0],[E,0])}const _=n.layerStatesArray,v=_.length,p=[],g=[];for(let x=0;x<m.length;x++)for(let E=v-1;E>=0;--E){const w=_[E],S=w.layer;if(S.hasRenderer()&&zd(w,c)&&l.call(a,S)){const R=S.getRenderer(),L=S.getSource();if(R&&L){const k=L.getWrapX()?f:e,z=h.bind(null,w.managed);g[0]=k[0]+m[x][0],g[1]=k[1]+m[x][1],u=R.forEachFeatureAtCoordinate(g,n,i,z,p)}if(u)return u}}if(p.length===0)return;const y=1/p.length;return p.forEach((x,E)=>x.distanceSq+=E*y),p.sort((x,E)=>x.distanceSq-E.distanceSq),p.some(x=>u=x.callback(x.feature,x.layer,x.geometry)),u}hasFeatureAtCoordinate(e,n,i,r,s,o){return this.forEachFeatureAtCoordinate(e,n,i,r,ao,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ee()}scheduleExpireIconCache(e){kt.canExpireCache()&&e.postRenderFunctions.push(FS)}}function FS(t,e){kt.expire()}class zS extends NS{constructor(e){super(e),this.fontChangeListenerKey_=Q(pn,Vr.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=Ba+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const i=this.getMap();if(i.hasListener(e)){const r=new ey(e,void 0,n);i.dispatchEvent(r)}}disposeInternal(){he(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Pt.PRECOMPOSE,e);const n=e.layerStatesArray.sort((l,a)=>l.zIndex-a.zIndex);n.some(l=>l.layer instanceof J0&&l.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let l=0,a=n.length;l<a;++l){const u=n[l];e.layerIndex=l;const c=u.layer,h=c.getSourceState();if(!zd(u,r)||h!="ready"&&h!="undefined"){c.unrender();continue}const d=c.render(e,o);d&&(d!==o&&(this.children_.push(d),o=d),s.push(u))}this.declutter(e,s),qw(this.element_,this.children_),this.dispatchRenderEvent(Pt.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let i=n.length-1;i>=0;--i){const r=n[i],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}n.forEach(i=>i.layer.renderDeferred(e))}}}function ty(t){if(t instanceof Va){t.setMapInternal(null);return}t instanceof is&&t.getLayers().forEach(ty)}function ny(t,e){if(t instanceof Va){t.setMapInternal(e);return}if(t instanceof is){const n=t.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)ny(n[i],e)}}let bS=class extends Zt{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=jS(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:xE,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Vt(),this.pixelToCoordinateTransform_=Vt(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||tC(),this.interactions=n.interactions||EC({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new CE(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Xe.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Xe.VIEW,this.handleViewChanged_),this.addChangeListener(Xe.SIZE,this.handleSizeChanged_),this.addChangeListener(Xe.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;e.view&&!(e.view instanceof nn)&&e.view.then(function(r){i.setView(new nn(r))}),this.controls.addEventListener(tt.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(tt.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(tt.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(tt.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(tt.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(tt.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){ny(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:ao,l=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,l,n,null,o,null)}getFeaturesAtPixel(e,n){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},n),i}getAllLayers(){const e=[];function n(i){i.forEach(function(r){r instanceof is?n(r.getLayers()):e.push(r)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:ao,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],l="changedTouches"in e?e.changedTouches[0]:e;return[(l.clientX-i.left)/s,(l.clientY-i.top)/o]}getTarget(){return this.get(Xe.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return lh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?De(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Xe.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof sn){n.setLayers(e);return}const i=n.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=gn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?De(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Xe.SIZE)}getView(){return this.get(Xe.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,i,r){return SE(this.frameState_,e,n,i,r)}handleBrowserEvent(e,n){n=n||e.type;const i=new Gn(n,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,i=n.type;if(i===Jc.POINTERDOWN||i===V.WHEEL||i===V.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target,l=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!l.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[Be.ANIMATING]||o[Be.INTERACTING]){const l=Date.now()-e.time>8;r=l?0:8,s=l?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Pt.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Pt.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ar(_n.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ar(_n.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)he(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(V.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(V.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new zS(this)),this.mapBrowserEventHandler_=new EE(this,this.moveTolerance_);for(const s in ve)this.mapBrowserEventHandler_.addEventListener(ve[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(V.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(V.WHEEL,this.boundHandleBrowserEvent_,n0?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const s=n.getRootNode();i=s instanceof ShadowRoot?s.host:n}this.targetChangeHandlerKeys_=[Q(i,V.KEYDOWN,this.handleBrowserEvent,this),Q(i,V.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(he(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(he(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Q(e,Vr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Q(e,V.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(he),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Xn("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Q(e,Vr.PROPERTYCHANGE,this.render,this),Q(e,V.CHANGE,this.render,this),Q(e,"addlayer",this.handleLayerAdd_,this),Q(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){ty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&Qg(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:ih(l.center,l.resolution,l.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:l,viewHints:o,wantedTiles:{},mapId:ne(this),renderTargets:{}},l.nextCenter&&l.nextResolution){const a=isNaN(l.nextRotation)?l.rotation:l.nextRotation;s.nextExtent=ih(l.nextCenter,l.nextResolution,a,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Ga(this.previousExtent_)&&!co(s.extent,this.previousExtent_))&&(this.dispatchEvent(new ar(_n.MOVESTART,this,r)),this.previousExtent_=Fa(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Be.ANIMATING]&&!s.viewHints[Be.INTERACTING]&&!co(s.extent,this.previousExtent_)&&(this.dispatchEvent(new ar(_n.MOVEEND,this,s)),i0(s.extent,this.previousExtent_))),this.dispatchEvent(new ar(_n.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(_n.LOADSTART)||this.hasListener(_n.LOADEND)||this.hasListener(Pt.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new Xn("removelayer",n)),this.set(Xe.LAYERGROUP,e)}setSize(e){this.set(Xe.SIZE,e)}setTarget(e){this.set(Xe.TARGET,e)}setView(e){if(!e||e instanceof nn){this.set(Xe.VIEW,e);return}this.set(Xe.VIEW,new nn);const n=this;e.then(function(i){n.setView(new nn(i))})}updateSize(){const e=this.getTargetElement();let n;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[Math.max(0,s),Math.max(0,o)],!Qg(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&g0("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!mi(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function jS(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new is({layers:t.layers});n[Xe.LAYERGROUP]=i,n[Xe.TARGET]=t.target,n[Xe.VIEW]=t.view instanceof nn?t.view:new nn;let r;t.controls!==void 0&&(Array.isArray(t.controls)?r=new sn(t.controls.slice()):(re(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new sn(t.interactions.slice()):(re(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new sn(t.overlays.slice()):(re(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new sn,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}class Yd extends Da{constructor(e,n,i){super(),i=i||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(V.CHANGE)}release(){this.setState(U.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==U.EMPTY){if(this.state!==U.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){ee()}getAlpha(e,n){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=n,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:f0(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function fh(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const GS=new Error("disposed"),WS=[256,256];class cp extends Yd{constructor(e){const n=U.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=fh(this.data_);return e?[e.width,e.height]:WS}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==U.IDLE&&this.state!==U.ERROR)return;this.state=U.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=U.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=U.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(GS),this.controller_=null),super.disposeInternal()}}class iy extends Yd{constructor(e,n,i,r,s,o){super(e,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=U.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=U.ERROR,this.unlistenImage_(),this.image_=US(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=U.LOADED:this.state=U.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==U.ERROR&&(this.state=U.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==U.IDLE&&(this.state=U.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=aS(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function US(){const t=ke(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class Vd{constructor(e,n,i,r){this.minX=e,this.maxX=n,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function sr(t,e,n,i,r){return r!==void 0?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new Vd(t,e,n,i)}let qu;const br=[];function hp(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function Qu(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function XS(){if(qu===void 0){const t=ke(6,6,br);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",hp(t,4,5,4,0),hp(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;qu=Qu(e,0)||Qu(e,4)||Qu(e,8),Ya(t),br.push(t.canvas)}return qu}function dp(t,e,n,i){const r=Sd(n,e,t);let s=Ng(e,i,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const l=t.getMetersPerUnit();l!==void 0&&(s/=l);const a=t.getExtent();if(!a||$r(a,r)){const u=Ng(t,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function BS(t,e,n,i){const r=Ui(n);let s=dp(t,e,r,i);return(!isFinite(s)||s<=0)&&a0(n,function(o){return s=dp(t,e,o,i),isFinite(s)&&s>0}),s}function YS(t,e,n,i,r,s,o,l,a,u,c,h,d,f){const m=ke(Math.round(n*t),Math.round(n*e),br);if(h||(m.imageSmoothingEnabled=!1),a.length===0)return m.canvas;m.scale(n,n);function _(E){return Math.round(E*n)/n}m.globalCompositeOperation="lighter";const v=Nt();a.forEach(function(E,w,S){LE(v,E.extent)});let p;const g=n/i,y=(h?1:1+Math.pow(2,-24))/g;{if(p=ke(Math.round(ie(v)*g),Math.round(Ve(v)*g),br),h||(p.imageSmoothingEnabled=!1),r&&f){const E=(r[0]-v[0])*g,w=-(r[3]-v[3])*g,S=ie(r)*g,R=Ve(r)*g;p.rect(E,w,S,R),p.clip()}a.forEach(function(E,w,S){if(E.image.width>0&&E.image.height>0){if(E.clipExtent){p.save();const b=(E.clipExtent[0]-v[0])*g,N=-(E.clipExtent[3]-v[3])*g,j=ie(E.clipExtent)*g,K=Ve(E.clipExtent)*g;p.rect(h?b:Math.round(b),h?N:Math.round(N),h?j:Math.round(b+j)-Math.round(b),h?K:Math.round(N+K)-Math.round(N)),p.clip()}const R=(E.extent[0]-v[0])*g,L=-(E.extent[3]-v[3])*g,k=ie(E.extent)*g,z=Ve(E.extent)*g;p.drawImage(E.image,u,u,E.image.width-2*u,E.image.height-2*u,h?R:Math.round(R),h?L:Math.round(L),h?k:Math.round(R+k)-Math.round(R),h?z:Math.round(L+z)-Math.round(L)),E.clipExtent&&p.restore()}})}const x=$i(o);return l.getTriangles().forEach(function(E,w,S){const R=E.source,L=E.target;let k=R[0][0],z=R[0][1],b=R[1][0],N=R[1][1],j=R[2][0],K=R[2][1];const G=_((L[0][0]-x[0])/s),Y=_(-(L[0][1]-x[1])/s),I=_((L[1][0]-x[0])/s),O=_(-(L[1][1]-x[1])/s),D=_((L[2][0]-x[0])/s),X=_(-(L[2][1]-x[1])/s),P=k,Ee=z;k=0,z=0,b-=P,N-=Ee,j-=P,K-=Ee;const fe=[[b,N,0,0,I-G],[j,K,0,0,D-G],[0,0,b,N,O-Y],[0,0,j,K,X-Y]],ae=TE(fe);if(!ae)return;if(m.save(),m.beginPath(),XS()||!h){m.moveTo(I,O);const Ce=4,Ht=G-I,Ft=Y-O;for(let dt=0;dt<Ce;dt++)m.lineTo(I+_((dt+1)*Ht/Ce),O+_(dt*Ft/(Ce-1))),dt!=Ce-1&&m.lineTo(I+_((dt+1)*Ht/Ce),O+_((dt+1)*Ft/(Ce-1)));m.lineTo(D,X)}else m.moveTo(I,O),m.lineTo(G,Y),m.lineTo(D,X);m.clip(),m.transform(ae[0],ae[2],ae[1],ae[3],G,Y),m.translate(v[0]-P,v[3]-Ee);let we;if(p)we=p.canvas,m.scale(y,-y);else{const Ce=a[0],Ht=Ce.extent;we=Ce.image,m.scale(ie(Ht)/we.width,-Ve(Ht)/we.height)}m.drawImage(we,0,0),m.restore()}),p&&(Ya(p),br.push(p.canvas)),c&&(m.save(),m.globalCompositeOperation="source-over",m.strokeStyle="black",m.lineWidth=1,l.getTriangles().forEach(function(E,w,S){const R=E.target,L=(R[0][0]-x[0])/s,k=-(R[0][1]-x[1])/s,z=(R[1][0]-x[0])/s,b=-(R[1][1]-x[1])/s,N=(R[2][0]-x[0])/s,j=-(R[2][1]-x[1])/s;m.beginPath(),m.moveTo(z,b),m.lineTo(L,k),m.lineTo(N,j),m.closePath(),m.stroke()}),m.restore()),m.canvas}const VS=10,fp=.25;class KS{constructor(e,n,i,r,s,o,l){this.sourceProj_=e,this.targetProj_=n;let a={};const u=l?hw(y=>De(l,Sd(y,this.targetProj_,this.sourceProj_))):sa(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const x=y[0]+"/"+y[1];return a[x]||(a[x]=u(y)),a[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ie(r)>=ie(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ie(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ie(this.targetProj_.getExtent()):null;const c=$i(i),h=ja(i),d=ba(i),f=za(i),m=this.transformInv_(c),_=this.transformInv_(h),v=this.transformInv_(d),p=this.transformInv_(f),g=VS+(o?Math.max(0,Math.ceil(Math.log2(nh(i)/(o*o*256*256)))):0);if(this.addQuad_(c,h,d,f,m,_,v,p,g),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(x,E,w){y=Math.min(y,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-y>this.sourceWorldWidth_/2){const E=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];E[0][0]-y>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-y>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-y>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);const w=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-w<this.sourceWorldWidth_/2&&(x.source=E)}})}a={}}addTriangle_(e,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,n,i]})}addQuad_(e,n,i,r,s,o,l,a,u){const c=Tg([s,o,l,a]),h=this.sourceWorldWidth_?ie(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let m=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const v=Tg([e,n,i,r]);m=ie(v)/this.targetWorldWidth_>fp||m}!f&&this.sourceProj_.isGlobal()&&h&&(m=h>fp||m)}if(!m&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!rt(c,this.maxSourceExtent_))return;let _=0;if(!m&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1]))){if(u>0)m=!0;else if(_=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(a[0])||!isFinite(a[1])?1:0),_!=1&&_!=2&&_!=4&&_!=8)return}if(u>0){if(!m){const v=[(e[0]+i[0])/2,(e[1]+i[1])/2],p=this.transformInv_(v);let g;f?g=(Nr(s[0],d)+Nr(l[0],d))/2-Nr(p[0],d):g=(s[0]+l[0])/2-p[0];const y=(s[1]+l[1])/2-p[1];m=g*g+y*y>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const v=[(n[0]+i[0])/2,(n[1]+i[1])/2],p=this.transformInv_(v),g=[(r[0]+e[0])/2,(r[1]+e[1])/2],y=this.transformInv_(g);this.addQuad_(e,n,v,g,s,o,p,y,u-1),this.addQuad_(g,v,i,r,y,p,l,a,u-1)}else{const v=[(e[0]+n[0])/2,(e[1]+n[1])/2],p=this.transformInv_(v),g=[(i[0]+r[0])/2,(i[1]+r[1])/2],y=this.transformInv_(g);this.addQuad_(e,v,g,r,s,p,y,a,u-1),this.addQuad_(v,n,i,g,p,o,l,y,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}_&11||this.addTriangle_(e,i,r,s,l,a),_&14||this.addTriangle_(e,i,n,s,l,o),_&&(_&13||this.addTriangle_(n,r,e,o,a,s),_&7||this.addTriangle_(n,r,i,o,a,l))}calculateSourceExtent(){const e=Nt();return this.triangles_.forEach(function(n,i,r){const s=n.source;Ws(e,s[0]),Ws(e,s[1]),Ws(e,s[2])}),e}getTriangles(){return this.triangles_}}const $S=.5;class ry extends Yd{constructor(e,n,i,r,s,o,l,a,u,c,h,d){super(s,U.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=l,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const v=m?Ni(f,m):f;if(nh(v)===0){this.state=U.EMPTY;return}const p=e.getExtent();p&&(_?_=Ni(_,p):_=p);const g=r.getResolution(this.wrappedTileCoord_[0]),y=BS(e,i,v,g);if(!isFinite(y)||y<=0){this.state=U.EMPTY;return}const x=c!==void 0?c:$S;if(this.triangulation_=new KS(e,i,v,_,y*x,g),this.triangulation_.getTriangles().length===0){this.state=U.EMPTY;return}this.sourceZ_=n.getZForResolution(y);let E=this.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(E[1]=pe(E[1],_[1],_[3]),E[3]=pe(E[3],_[1],_[3])):E=Ni(E,_)),!nh(E))this.state=U.EMPTY;else{let w=0,S=0;e.canWrapX()&&(w=ie(p),S=Math.floor((E[0]-p[0])/w)),h0(E.slice(),e,!0).forEach(L=>{const k=n.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let z=k.minX;z<=k.maxX;z++)for(let b=k.minY;b<=k.maxY;b++){const N=u(this.sourceZ_,z,b,l);if(N){const j=S*w;this.sourceTiles_.push({tile:N,offset:j})}}++S}),this.sourceTiles_.length===0&&(this.state=U.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{var r;const i=n.tile;if(i&&i.getState()==U.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=n.offset,s[2]+=n.offset;const o=(r=this.clipExtent_)==null?void 0:r.slice();o&&(o[0]+=n.offset,o[2]+=n.offset),e.push({extent:s,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=U.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),l=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=YS(r,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=U.LOADED}this.changed()}load(){if(this.state==U.IDLE){this.state=U.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const i=n.getState();if(i==U.IDLE||i==U.LOADING){e++;const r=Q(n,V.CHANGE,s=>{const o=n.getState();(o==U.LOADED||o==U.ERROR||o==U.EMPTY)&&(he(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},i,r){n.getState()==U.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(he),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ya(this.canvas_.getContext("2d")),br.push(this.canvas_),this.canvas_=null),super.release()}}class ZS{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Aa&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const i=this.entries_[e];return re(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const n=this.entries_[e];return re(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){re(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function da(t,e,n,i){return i!==void 0?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function HS(t,e,n){return t+"/"+e+"/"+n}function qS(t){return QS(t[0],t[1],t[2])}function QS(t,e,n){return(e<<t)+n}function JS(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(i,r):!0}class sy{constructor(){rf(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(la(),{get:(e,n)=>{if(typeof la()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(e,n,i)=>(this.push_(n,i),!0)})}push_(...e){const n=this.instructions_,i=this.zIndex+this.offset_;n[i]||(n[i]=[]),n[i].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let i=0,r=n.length;i<r;++i){const s=n[i];if(typeof s=="function"){s(e);continue}const o=n[++i];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const eR=5;class tR extends Po{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=eR}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ee()}getData(e){return null}prepareFrame(e){return ee()}renderFrame(e,n){return ee()}forEachFeatureAtCoordinate(e,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===Z.LOADED||n.getState()===Z.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=Z.LOADED&&n!=Z.ERROR&&e.addEventListener(V.CHANGE,this.boundHandleImageChange_),n==Z.IDLE&&(e.load(),n=e.getState()),n==Z.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const gp=[];let hr=null;function nR(){hr=ke(1,1,void 0,{willReadFrequently:!0})}class oy extends tR{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Vt(),this.pixelTransform=Vt(),this.inversePixelTransform=Vt(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,i){hr||nR(),hr.clearRect(0,0,1,1);let r;try{hr.drawImage(e,n,i,1,1,0,0,1,1),r=hr.getImageData(0,0,1,1).data}catch{return hr=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,n,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&mi(Hr(e.style.backgroundColor),Hr(i)))){const l=e.firstElementChild;l instanceof HTMLCanvasElement&&(o=l.getContext("2d"))}if(o&&_w(o.canvas.style.transform,n)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let l=s.style;l.position="absolute",l.width="100%",l.height="100%",o=ke();const a=o.canvas;s.appendChild(a),l=a.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,n,i){const r=$i(i),s=ja(i),o=ba(i),l=za(i);De(n.coordinateToPixelTransform,r),De(n.coordinateToPixelTransform,s),De(n.coordinateToPixelTransform,o),De(n.coordinateToPixelTransform,l);const a=this.inversePixelTransform;De(a,r),De(a,s),De(a,o),De(a,l),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}prepareContainer(e,n){const i=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,l=Math.round(ie(i)/r*o),a=Math.round(Ve(i)/r*o);kn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-l/2,-a/2),w0(this.inversePixelTransform,this.pixelTransform);const u=mw(this.pixelTransform);if(this.useContainer(n,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=l||c.height!=a?(c.width=l,c.height=a):this.context.clearRect(0,0,l,a),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,n,i){const r=this.getLayer();if(r.hasListener(e)){const s=new ey(e,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(Pt.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(Pt.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new sy),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Pt.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Pt.POSTRENDER,this.context,e))}getRenderTransform(e,n,i,r,s,o,l){const a=s/2,u=o/2,c=r/n,h=-c,d=-e[0]+l,f=-e[1];return kn(this.tempTransform,a,u,c,h,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Ju(t,e,n,i){return`${t},${HS(e,n,i)}`}function ec(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const i=t[n],r=i.has(e);return r||i.add(e),!r}function iR(t,e,n){const i=t[n];return i?i.delete(e):!1}function pp(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=Ni(e,Zn(n.extent,t.viewState.projection)));const i=n.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(t.viewState.projection).getExtent();r&&(e=Ni(e,r))}return e}class rR extends oy{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Nt(),this.tempTileRange_=new Vd(0,0,0,0),this.tempTileCoord_=da(0,0,0);const i=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new ZS(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,n,i,r){const s=this.tileCache_,l=this.getLayer().getSource(),a=Ju(l.getKey(),e,n,i);let u;if(s.containsKey(a))u=s.get(a);else{if(u=l.getTile(e,n,i,r.pixelRatio,r.viewState.projection),!u)return null;s.set(a,u)}return u}getTile(e,n,i,r){const s=this.getOrCreateTile(e,n,i,r);return s||null}getData(e){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=De(n.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!$r(s,r))return null;const o=n.viewState,l=i.getRenderSource(),a=l.getTileGridForProjection(o.projection),u=l.getTilePixelRatio(n.pixelRatio);for(let c=a.getZForResolution(o.resolution);c>=a.getMinZoom();--c){const h=a.getTileCoordForCoordAndZ(r,c),d=this.getTile(c,h[1],h[2],n);if(!d||d.getState()!==U.LOADED)continue;const f=a.getOrigin(c),m=lt(a.getTileSize(c)),_=a.getResolution(c);let v;if(d instanceof iy||d instanceof ry)v=d.getImage();else if(d instanceof cp){if(v=fh(d.getData()),!v)continue}else continue;const p=Math.floor(u*((r[0]-f[0])/_-h[1]*m[0])),g=Math.floor(u*((f[1]-r[1])/_-h[2]*m[1])),y=Math.round(u*l.getGutterForProjection(o.projection));return this.getImageData(v,p+y,g+y)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const i=n.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===n.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,n,i,r,s){const o=e.viewState,l=this.getLayer(),a=l.getRenderSource(),u=a.getTileGridForProjection(o.projection),c=ne(a);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=l.getMapInternal(),f=Math.max(i-s,u.getMinZoom(),u.getZForResolution(Math.min(l.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):u.getResolution(0)),a.zDirection)),m=o.rotation,_=m?u0(o.center,o.resolution,m,e.size):void 0;for(let v=i;v>=f;--v){const p=u.getTileRangeForExtentAndZ(n,v,this.tempTileRange_),g=u.getResolution(v);for(let y=p.minX;y<=p.maxX;++y)for(let x=p.minY;x<=p.maxY;++x){if(m&&!u.tileCoordIntersectsViewport([v,y,x],_))continue;const E=this.getTile(v,y,x,e);if(!E||!ec(r,E,v))continue;const S=E.getKey();if(h[S]=!0,E.getState()===U.IDLE&&!e.tileQueue.isKeyQueued(S)){const R=da(v,y,x,this.tempTileCoord_);e.tileQueue.enqueue([E,c,u.getTileCoordCenter(R),g])}}}}findStaleTile_(e,n){const i=this.tileCache_,r=e[0],s=e[1],o=e[2],l=this.getStaleKeys();for(let a=0;a<l.length;++a){const u=Ju(l[a],r,s,o);if(i.containsKey(u)){const c=i.peek(u);if(c.getState()===U.LOADED)return c.endTransition(ne(this)),ec(n,c,r),!0}}return!1}findAltTiles_(e,n,i,r){const s=e.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!s)return!1;let o=!0;const l=this.tileCache_,u=this.getLayer().getRenderSource().getKey();for(let c=s.minX;c<=s.maxX;++c)for(let h=s.minY;h<=s.maxY;++h){const d=Ju(u,i,c,h);let f=!1;if(l.containsKey(d)){const m=l.peek(d);m.getState()===U.LOADED&&(ec(r,m,i),f=!0)}f||(o=!1)}return o}renderFrame(e,n){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,l=r.center,a=e.pixelRatio,u=this.getLayer(),c=u.getSource(),h=c.getTileGridForProjection(s),d=h.getZForResolution(o,c.zDirection),f=h.getResolution(d),m=c.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==m&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=m):this.renderedSourceKey_=m;let _=e.extent;const v=c.getTilePixelRatio(a);this.prepareContainer(e,n);const p=this.context.canvas.width,g=this.context.canvas.height,y=i.extent&&Zn(i.extent);y&&(_=Ni(_,Zn(i.extent)));const x=f*p/2/v,E=f*g/2/v,w=[l[0]-x,l[1]-E,l[0]+x,l[1]+E],S={};this.renderedTiles.length=0;const R=u.getPreload();if(e.nextExtent){const I=h.getZForResolution(r.nextResolution,c.zDirection),O=pp(e,e.nextExtent);this.enqueueTiles(e,O,I,S,R)}const L=pp(e,_);if(this.enqueueTiles(e,L,d,S,0),R>0&&setTimeout(()=>{this.enqueueTiles(e,L,d-1,S,R-1)},0),!(d in S))return this.container;const k=ne(this),z=e.time;for(const I of S[d]){const O=I.getState();if(O===U.EMPTY)continue;const D=I.tileCoord;if(O===U.LOADED&&I.getAlpha(k,z)===1){I.endTransition(k);continue}if(O!==U.ERROR&&(this.renderComplete=!1),this.findStaleTile_(D,S)){iR(S,I,d),e.animate=!0;continue}if(this.findAltTiles_(h,D,d+1,S))continue;const Ee=h.getMinZoom();for(let fe=d-1;fe>=Ee&&!this.findAltTiles_(h,D,fe,S);--fe);}const b=f/o*a/v,N=this.getRenderContext(e);kn(this.tempTransform,p/2,g/2,b,b,0,-p/2,-g/2),i.extent&&this.clipUnrotated(N,e,y),c.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,e);const j=Object.keys(S).map(Number);j.sort(Cn);let K;const G=[],Y=[];for(let I=j.length-1;I>=0;--I){const O=j[I],D=c.getTilePixelSize(O,a,s),P=h.getResolution(O)/f,Ee=D[0]*P*b,fe=D[1]*P*b,ae=h.getTileCoordForCoordAndZ($i(w),O),we=h.getTileCoordExtent(ae),Ce=De(this.tempTransform,[v*(we[0]-w[0])/f,v*(w[3]-we[3])/f]),Ht=v*c.getGutterForProjection(s);for(const Ft of S[O]){if(Ft.getState()!==U.LOADED)continue;const dt=Ft.tileCoord,zo=ae[1]-dt[1],Qa=Math.round(Ce[0]-(zo-1)*Ee),ss=ae[2]-dt[2],_i=Math.round(Ce[1]-(ss-1)*fe),xt=Math.round(Ce[0]-zo*Ee),qt=Math.round(Ce[1]-ss*fe),Hi=Qa-xt,qi=_i-qt,os=j.length===1;let yi=!1;K=[xt,qt,xt+Hi,qt,xt+Hi,qt+qi,xt,qt+qi];for(let Qi=0,Ji=G.length;Qi<Ji;++Qi)if(!os&&O<Y[Qi]){const Me=G[Qi];rt([xt,qt,xt+Hi,qt+qi],[Me[0],Me[3],Me[4],Me[7]])&&(yi||(N.save(),yi=!0),N.beginPath(),N.moveTo(K[0],K[1]),N.lineTo(K[2],K[3]),N.lineTo(K[4],K[5]),N.lineTo(K[6],K[7]),N.moveTo(Me[6],Me[7]),N.lineTo(Me[4],Me[5]),N.lineTo(Me[2],Me[3]),N.lineTo(Me[0],Me[1]),N.clip())}G.push(K),Y.push(O),this.drawTile(Ft,e,xt,qt,Hi,qi,Ht,os),yi&&N.restore(),this.renderedTiles.unshift(Ft),this.updateUsedTiles(e.usedTiles,c,Ft)}}if(this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!co(this.renderedExtent_,w),this.renderedExtent_=w,this.renderedPixelRatio=a,this.postRender(this.context,e),i.extent&&N.restore(),N.imageSmoothingEnabled=!0,this.renderComplete){const I=(O,D)=>{const X=ne(c),P=D.wantedTiles[X],Ee=P?Object.keys(P).length:0;this.updateCacheSize(Ee),this.tileCache_.expireCache()};e.postRenderFunctions.push(I)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,i,r,s,o,l,a){let u;if(e instanceof cp){if(u=fh(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(n),h=ne(this),d=n.layerStatesArray[n.layerIndex],f=d.opacity*(a?e.getAlpha(h,n.time):1),m=f!==c.globalAlpha;m&&(c.save(),c.globalAlpha=f),c.drawImage(u,l,l,u.width-2*l,u.height-2*l,i,r,s,o),m&&c.restore(),f!==d.opacity?n.animate=!0:a&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,i){const r=ne(n);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const fl={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class sR extends Va{constructor(e){e=e||{};const n=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(fl.PRELOAD)}setPreload(e){this.set(fl.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(fl.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(fl.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class oR extends sR{constructor(e){super(e)}createRenderer(){return new rR(this,{cacheSize:this.getCacheSize()})}}const or=[0,0,0],Fn=5;class ly{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,re(gE(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,re(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=$i(i)),re(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,re(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Ad,re(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new Vd(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const l=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(l.minX,o.minX),o.maxX=Math.min(l.maxX,o.maxX),o.minY=Math.max(l.minY,o.minY),o.maxY=Math.min(l.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,n,i){const r=this.getTileRangeForExtentAndZ(e,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let l=r.minY,a=r.maxY;l<=a;++l)i([n,s,l])}forEachTileCoordParentTileRange(e,n,i,r){let s,o,l,a=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],l=e[2]):a=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(o!==void 0&&l!==void 0?(o=Math.floor(o/2),l=Math.floor(l/2),s=sr(o,o,l,l,i)):s=this.getTileRangeForExtentAndZ(a,u,i),n(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return sr(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(n===r)return sr(s,o,s,o,i);if(this.zoomFactor_){const a=Math.pow(this.zoomFactor_,n-r),u=Math.floor(s*a),c=Math.floor(o*a);if(n<r)return sr(u,u,c,c,i);const h=Math.floor(a*(s+1))-1,d=Math.floor(a*(o+1))-1;return sr(u,h,c,d,i)}const l=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,n,i)}getTileRangeForExtentAndZ(e,n,i){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,or);const r=or[1],s=or[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,or);const o=or[1],l=or[2];return sr(r,o,s,l,i)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=lt(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*r[0]*i,n[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,n){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=lt(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,l=i[1]-(e[2]+1)*s[1]*r,a=o+s[0]*r,u=l+s[1]*r;return hi(o,l,a,u,n)}getTileCoordForCoordAndResolution(e,n,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,i)}getTileCoordForXYAndResolution_(e,n,i,r,s){const o=this.getZForResolution(i),l=i/this.getResolution(o),a=this.getOrigin(o),u=lt(this.getTileSize(o),this.tmpSize_);let c=l*(e-a[0])/i/u[0],h=l*(a[1]-n)/i/u[1];return r?(c=sl(c,Fn)-1,h=sl(h,Fn)-1):(c=rl(c,Fn),h=rl(h,Fn)),da(o,c,h,s)}getTileCoordForXYAndZ_(e,n,i,r,s){const o=this.getOrigin(i),l=this.getResolution(i),a=lt(this.getTileSize(i),this.tmpSize_);let u=(e-o[0])/l/a[0],c=(o[1]-n)/l/a[1];return r?(u=sl(u,Fn)-1,c=sl(c,Fn)-1):(u=rl(u,Fn),c=rl(c,Fn)),da(i,u,c,s)}getTileCoordForCoordAndZ(e,n,i){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const i=dd(this.resolutions_,e,n||0);return pe(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return M0(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function ay(t){let e=t.getDefaultTileGrid();return e||(e=cR(t),t.setDefaultTileGrid(e)),e}function lR(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),s=Kd(n);if(!$r(s,r)){const o=ie(s),l=Math.ceil((s[0]-r[0])/o);return r[0]+=o*l,t.getTileCoordForCoordAndZ(r,i)}return e}function aR(t,e,n,i){i=i!==void 0?i:"top-left";const r=uy(t,e,n);return new ly({extent:t,origin:kE(t,i),resolutions:r,tileSize:n})}function uR(t){const e=t||{},n=e.extent||ht("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:uy(n,e.maxZoom,e.tileSize,e.maxResolution)};return new ly(i)}function uy(t,e,n,i){e=e!==void 0?e:Uw,n=lt(n!==void 0?n:Ad);const r=Ve(t),s=ie(t);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=e+1,l=new Array(o);for(let a=0;a<o;++a)l[a]=i/Math.pow(2,a);return l}function cR(t,e,n,i){const r=Kd(t);return aR(r,e,n,i)}function Kd(t){t=ht(t);let e=t.getExtent();if(!e){const n=180*_d.degrees/t.getMetersPerUnit();e=hi(-n,-n,n,n)}return e}const hR=/\{z\}/g,dR=/\{x\}/g,fR=/\{y\}/g,gR=/\{-y\}/g;function pR(t,e,n,i,r){return t.replace(hR,e.toString()).replace(dR,n.toString()).replace(fR,i.toString()).replace(gR,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function mR(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}function _R(t,e){return function(n,i,r){if(!n)return;let s;const o=n[0];if(e){const l=e.getFullTileRange(o);l&&(s=l.getHeight()-1)}return pR(t,o,n[1],n[2],s)}}function yR(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=_R(t[r],e);return vR(i)}function vR(t){return t.length===1?t[0]:function(e,n,i){if(!e)return;const r=qS(e),s=Nr(r,t.length);return t[s](e,n,i)}}class cy extends Zt{constructor(e){super(),this.projection=ht(e.projection),this.attributions_=mp(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=mp(e),this.changed()}setState(e){this.state_=e,this.changed()}}function mp(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}class xR extends cy{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&lt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||ne(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,i,r,s){return ee()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:ay(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=lt(r.getTileSize(e),this.tmpSize);return s==1?o:zC(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const i=n!==void 0?n:this.getProjection(),r=n!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=lR(r,e,i)),JS(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class ER extends An{constructor(e,n){super(e),this.tile=n}}const tc={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class $d extends xR{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===$d.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,i=ne(n),r=n.getState();let s;r==U.LOADING?(this.tileLoadingKeys_[i]=!0,s=tc.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==U.ERROR?tc.TILELOADERROR:r==U.LOADED?tc.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new ER(s,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=mR(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(yR(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,i){}}class wR extends $d{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:CR,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:iy,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Ou(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Ou(n,e)))return this.tileGrid;const i=ne(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=ay(e)),this.tileGridForProjection[i]}createTile_(e,n,i,r,s,o){const l=[e,n,i],a=this.getTileCoordForTileUrlFunction(l,s),u=a?this.tileUrlFunction(a,r,s):void 0,c=new this.tileClass(l,u!==void 0?U.IDLE:U.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(V.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,n,i,r,s){const o=this.getProjection();if(!o||!s||Ou(o,s))return this.getTileInternal(e,n,i,r,o||s);const l=[e,n,i],a=this.getKey(),u=this.getTileGridForProjection(o),c=this.getTileGridForProjection(s),h=this.getTileCoordForTileUrlFunction(l,s),d=new ry(o,u,s,c,l,h,this.getTilePixelRatio(r),this.getGutter(),(f,m,_,v)=>this.getTileInternal(f,m,_,v,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=a,d}getTileInternal(e,n,i,r,s){const o=this.getKey();return this.createTile_(e,n,i,r,s,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const i=ht(e);if(i){const r=ne(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}}function CR(t,e){t.getImage().src=e}class SR extends wR{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:uR({extent:Kd(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class hy{drawCustom(e,n,i,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,i){}drawFeature(e,n,i){}drawGeometryCollection(e,n,i){}drawLineString(e,n,i){}drawMultiLineString(e,n,i){}drawMultiPoint(e,n,i){}drawMultiPolygon(e,n,i){}drawPoint(e,n,i){}drawPolygon(e,n,i){}drawText(e,n,i){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}const W={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},gl=[W.FILL],Hn=[W.STROKE],Ai=[W.BEGIN_PATH],_p=[W.CLOSE_PATH];class Fo extends hy{constructor(e,n,i,r){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(i){return i*n})}appendFlatPointCoordinates(e,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let l=0,a=e.length;l<a;l+=n)r[0]=e[l],r[1]=e[l+1],$r(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,n,i,r,s,o){const l=this.coordinates;let a=l.length;const u=this.getBufferedMaxExtent();o&&(n+=r);let c=e[n],h=e[n+1];const d=this.tmpCoordinate_;let f=!0,m,_,v;for(m=n+r;m<i;m+=r)d[0]=e[m],d[1]=e[m+1],v=th(u,d),v!==_?(f&&(l[a++]=c,l[a++]=h,f=!1),l[a++]=d[0],l[a++]=d[1]):v===Ae.INTERSECTING?(l[a++]=d[0],l[a++]=d[1],f=!1):f=!0,c=d[0],h=d[1],_=v;return(s&&f||m===n+r)&&(l[a++]=c,l[a++]=h),a}drawCustomCoordinates_(e,n,i,r,s){for(let o=0,l=i.length;o<l;++o){const a=i[o],u=this.appendFlatLineCoordinates(e,n,a,r,!1,!1);s.push(u),n=a}return n}drawCustom(e,n,i,r,s){this.beginGeometry(e,n,s);const o=e.getType(),l=e.getStride(),a=this.coordinates.length;let u,c,h,d,f;switch(o){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const m=e.getEndss();f=0;for(let _=0,v=m.length;_<v;++_){const p=[];f=this.drawCustomCoordinates_(u,f,m[_],l,p),d.push(p)}this.instructions.push([W.CUSTOM,a,d,e,i,Wg,s]),this.hitDetectionInstructions.push([W.CUSTOM,a,d,e,r||i,Wg,s]);break;case"Polygon":case"MultiLineString":h=[],u=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(u,0,e.getEnds(),l,h),this.instructions.push([W.CUSTOM,a,h,e,i,oa,s]),this.hitDetectionInstructions.push([W.CUSTOM,a,h,e,r||i,oa,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,l,!1,!1),this.instructions.push([W.CUSTOM,a,c,e,i,Tr,s]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,r||i,Tr,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,l),c>a&&(this.instructions.push([W.CUSTOM,a,c,e,i,Tr,s]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,r||i,Tr,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([W.CUSTOM,a,c,e,i,void 0,s]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,r||i,void 0,s]);break}this.endGeometry(n)}beginGeometry(e,n,i){this.beginGeometryInstruction1_=[W.BEGIN_GEOMETRY,n,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[W.BEGIN_GEOMETRY,n,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const i=e.length;let r,s,o=-1;for(n=0;n<i;++n)r=e[n],s=r[0],s==W.END_GEOMETRY?o=n:s==W.BEGIN_GEOMETRY&&(r[2]=n,fE(this.hitDetectionInstructions,o,n),o=-1)}fillStyleToState(e,n={}){if(e){const i=e.getColor();n.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,n.fillStyle=on(i||it)}else n.fillStyle=void 0;return n}strokeStyleToState(e,n={}){if(e){const i=e.getColor();n.strokeStyle=on(i||mo);const r=e.getLineCap();n.lineCap=r!==void 0?r:qr;const s=e.getLineDash();n.lineDash=s?s.slice():Sn;const o=e.getLineDashOffset();n.lineDashOffset=o||Rn;const l=e.getLineJoin();n.lineJoin=l!==void 0?l:Qr;const a=e.getWidth();n.lineWidth=a!==void 0?a:yo;const u=e.getMiterLimit();n.miterLimit=u!==void 0?u:po,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0;return n}setFillStrokeStyle(e,n){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(n,i)}createFill(e){const n=e.fillStyle,i=[W.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[W.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,n){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,l=e.lineJoin,a=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!mi(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=l||e.currentLineWidth!=a||e.currentMiterLimit!=u)&&(i!==void 0&&n.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=l,e.currentLineWidth=a,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[W.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=i0(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;gd(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class RR extends Fo{constructor(e,n,i,r){super(e,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,i){if(!this.image_||this.maxExtent&&!$r(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,i);const r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,l=this.appendFlatPointCoordinates(r,s);this.instructions.push([W.DRAW_IMAGE,o,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,o,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,i){if(!this.image_)return;this.beginGeometry(e,n,i);const r=e.getFlatCoordinates(),s=[];for(let a=0,u=r.length;a<u;a+=e.getStride())(!this.maxExtent||$r(this.maxExtent,r.slice(a,a+2)))&&s.push(r[a],r[a+1]);const o=this.coordinates.length,l=this.appendFlatPointCoordinates(s,2);this.instructions.push([W.DRAW_IMAGE,o,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,o,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class TR extends Fo{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinates_(e,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,i,r,!1,!1),l=[W.MOVE_TO_LINE_TO,s,o];return this.instructions.push(l),this.hitDetectionInstructions.push(l),i}drawLineString(e,n,i){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Sn,Rn],Ai);const l=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(l,0,l.length,a),this.hitDetectionInstructions.push(Hn),this.endGeometry(n)}drawMultiLineString(e,n,i){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Sn,Rn],Ai);const l=e.getEnds(),a=e.getFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=l.length;h<d;++h)c=this.drawFlatCoordinates_(a,c,l[h],u);this.hitDetectionInstructions.push(Hn),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Hn),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Hn),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ai)}}class yp extends Fo{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinatess_(e,n,i,r){const s=this.state,o=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,a=i.length;this.instructions.push(Ai),this.hitDetectionInstructions.push(Ai);for(let u=0;u<a;++u){const c=i[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,n,c,r,!0,!l),f=[W.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),l&&(this.instructions.push(_p),this.hitDetectionInstructions.push(_p)),n=c}return o&&(this.instructions.push(gl),this.hitDetectionInstructions.push(gl)),l&&(this.instructions.push(Hn),this.hitDetectionInstructions.push(Hn)),n}drawCircle(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,it]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Sn,Rn]);const l=e.getFlatCoordinates(),a=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,a,!1,!1);const c=[W.CIRCLE,u];this.instructions.push(Ai,c),this.hitDetectionInstructions.push(Ai,c),r.fillStyle!==void 0&&(this.instructions.push(gl),this.hitDetectionInstructions.push(gl)),r.strokeStyle!==void 0&&(this.instructions.push(Hn),this.hitDetectionInstructions.push(Hn)),this.endGeometry(n)}drawPolygon(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,it]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Sn,Rn]);const l=e.getEnds(),a=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(a,0,l,u),this.endGeometry(n)}drawMultiPolygon(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,it]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Sn,Rn]);const l=e.getEndss(),a=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=l.length;h<d;++h)c=this.drawFlatCoordinatess_(a,c,l[h],u);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=Si(n[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function IR(t,e,n,i,r){const s=[];let o=n,l=0,a=e.slice(n,2);for(;l<t&&o+r<i;){const[u,c]=a.slice(-2),h=e[o+r],d=e[o+r+1],f=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(l+=f,l>=t){const m=(t-l+f)/f,_=It(u,h,m),v=It(c,d,m);a.push(_,v),s.push(a),a=[_,v],l==t&&(o+=r),l=0}else if(l<t)a.push(e[o+r],e[o+r+1]),o+=r;else{const m=f-l,_=It(u,h,m/f),v=It(c,d,m/f);a.push(_,v),s.push(a),a=[_,v],l=0,o+=r}}return l>0&&s.push(a),s}function LR(t,e,n,i,r){let s=n,o=n,l=0,a=0,u=n,c,h,d,f,m,_,v,p,g,y;for(h=n;h<i;h+=r){const x=e[h],E=e[h+1];m!==void 0&&(g=x-m,y=E-_,f=Math.sqrt(g*g+y*y),v!==void 0&&(a+=d,c=Math.acos((v*g+p*y)/(d*f)),c>t&&(a>l&&(l=a,s=u,o=h),a=0,u=h-r)),d=f,v=g,p=y),m=x,_=E}return a+=f,a>l?[u,h]:[s,o]}const fa={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class PR extends Fo{constructor(e,n,i,r){super(e,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[it]={fillStyle:it},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,i){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const l=this.coordinates;let a=l.length;const u=e.getType();let c=null,h=e.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!rt(this.maxExtent,e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),u=="LineString")d=[c.length];else if(u=="MultiLineString")d=e.getEnds();else if(u=="Polygon")d=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const v=e.getEndss();d=[];for(let p=0,g=v.length;p<g;++p)d.push(v[p][0])}this.beginGeometry(e,n,i);const f=o.repeat,m=f?void 0:o.textAlign;let _=0;for(let v=0,p=d.length;v<p;++v){let g;f?g=IR(f*this.resolution,c,_,d[v],h):g=[c.slice(_,d[v])];for(let y=0,x=g.length;y<x;++y){const E=g[y];let w=0,S=E.length;if(m==null){const L=LR(o.maxAngle,E,0,E.length,2);w=L[0],S=L[1]}for(let L=w;L<S;L+=h)l.push(E[L],E[L+1]);const R=l.length;_=d[v],this.drawChars_(a,R),a=R}}this.endGeometry(n)}else{let d=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),o.overflow||d.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const x=e.getFlatInteriorPoints();c=[];for(let E=0,w=x.length;E<w;E+=3)o.overflow||d.push(x[E+2]/this.resolution),c.push(x[E],x[E+1]);if(c.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(c,h);if(f===a)return;if(d&&(f-a)/2!==c.length/h){let x=a/2;d=d.filter((E,w)=>{const S=l[(x+w)*2]===c[w*h]&&l[(x+w)*2+1]===c[w*h+1];return S||--x,S})}this.saveTextStates_();const m=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,_=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,n,i);let v=o.padding;if(v!=Mi&&(o.scale[0]<0||o.scale[1]<0)){let x=o.padding[0],E=o.padding[1],w=o.padding[2],S=o.padding[3];o.scale[0]<0&&(E=-E,S=-S),o.scale[1]<0&&(x=-x,w=-w),v=[x,E,w,S]}const p=this.pixelRatio;this.instructions.push([W.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==Mi?Mi:v.map(function(x){return x*p}),m,_,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const g=1/p,y=m?m.slice(0):null;y&&(y[1]=it),this.hitDetectionInstructions.push([W.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,this.declutterMode_,this.declutterImageWithText_,v,y,_,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?it:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||_o,justify:n.justify,textBaseline:n.textBaseline||aa,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,l=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,u=fa[r.textBaseline],c=this.textOffsetY_*a,h=this.text_,d=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([W.DRAW_CHARS,e,n,u,r.overflow,l,r.maxAngle,a,c,s,d*a,h,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([W.DRAW_CHARS,e,n,u,r.overflow,l&&it,r.maxAngle,a,c,s,d*a,h,o,1/a,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,n){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=on(o.getColor()||it)):(r=null,this.textFillState_=r);const l=e.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const _=l.getLineDash(),v=l.getLineDashOffset(),p=l.getWidth(),g=l.getMiterLimit();s.lineCap=l.getLineCap()||qr,s.lineDash=_?_.slice():Sn,s.lineDashOffset=v===void 0?Rn:v,s.lineJoin=l.getLineJoin()||Qr,s.lineWidth=p===void 0?yo:p,s.miterLimit=g===void 0?po:g,s.strokeStyle=on(l.getColor()||mo)}i=this.textState_;const a=e.getFont()||V0;fS(a);const u=e.getScaleArray();i.overflow=e.getOverflow(),i.font=a,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||aa,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Mi,i.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getKeepUpright(),m=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=f===void 0?!0:f,this.textRotation_=m===void 0?0:m,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ne(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+ne(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const kR={Circle:yp,Default:Fo,Image:RR,LineString:TR,Polygon:yp,Text:PR};class MR{constructor(e,n,i,r){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();e[n][r]=s}}return e}getBuilder(e,n){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=kR[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}function AR(t,e,n,i){let r=t[e],s=t[e+1],o=0;for(let l=e+i;l<n;l+=i){const a=t[l],u=t[l+1];o+=Math.sqrt((a-r)*(a-r)+(u-s)*(u-s)),r=a,s=u}return o}function OR(t,e,n,i,r,s,o,l,a,u,c,h,d=!0){let f=t[e],m=t[e+1],_=0,v=0,p=0,g=0;function y(){_=f,v=m,e+=i,f=t[e],m=t[e+1],g+=p,p=Math.sqrt((f-_)*(f-_)+(m-v)*(m-v))}do y();while(e<n-i&&g+p<s);let x=p===0?0:(s-g)/p;const E=It(_,f,x),w=It(v,m,x),S=e-i,R=g,L=s+l*a(u,r,c);for(;e<n-i&&g+p<L;)y();x=p===0?0:(L-g)/p;const k=It(_,f,x),z=It(v,m,x);let b=!1;if(d)if(h){const Y=[E,w,k,z];C0(Y,0,4,2,h,Y,Y),b=Y[0]>Y[2]}else b=E>k;const N=Math.PI,j=[],K=S+i===e;e=S,p=0,g=R,f=t[e],m=t[e+1];let G;if(K){y(),G=Math.atan2(m-v,f-_),b&&(G+=G>0?-N:N);const Y=(k+E)/2,I=(z+w)/2;return j[0]=[Y,I,(L-s)/2,G,r],j}r=r.replace(/\n/g," ");for(let Y=0,I=r.length;Y<I;){y();let O=Math.atan2(m-v,f-_);if(b&&(O+=O>0?-N:N),G!==void 0){let ae=O-G;if(ae+=ae>N?-2*N:ae<-N?2*N:0,Math.abs(ae)>o)return null}G=O;const D=Y;let X=0;for(;Y<I;++Y){const ae=b?I-Y-1:Y,we=l*a(u,r[ae],c);if(e+i<n&&g+p<s+X+we/2)break;X+=we}if(Y===D)continue;const P=b?r.substring(I-D,I-Y):r.substring(D,Y);x=p===0?0:(s+X/2-g)/p;const Ee=It(_,f,x),fe=It(v,m,x);j.push([Ee,fe,X/2,O,P]),s+=X}return j}const lr=Nt(),zn=[],dn=[],fn=[],bn=[];function vp(t){return t[3].declutterBox}const xp=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function nc(t,e){return e==="start"?e=xp.test(t)?"right":"left":e==="end"&&(e=xp.test(t)?"left":"right"),fa[e]}function DR(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}function NR(t,e,n){return n%2===0&&(t+=e),t}class FR{constructor(e,n,i,r,s){this.overlaps=i,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Vt(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new sy:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,i,r){const s=e+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,l=i?this.fillStates[i]:null,a=this.textStates[n],u=this.pixelRatio,c=[a.scale[0]*u,a.scale[1]*u],h=a.justify?fa[a.justify]:nc(Array.isArray(e)?e[0]:e,a.textAlign||_o),d=r&&o.lineWidth?o.lineWidth:0,f=Array.isArray(e)?e:String(e).split(`
`).reduce(DR,[]),{width:m,height:_,widths:v,heights:p,lineWidths:g}=pS(a,f),y=m+d,x=[],E=(y+2)*c[0],w=(_+d)*c[1],S={width:E<0?Math.floor(E):Math.ceil(E),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:x};(c[0]!=1||c[1]!=1)&&x.push("scale",c),r&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",d),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),i&&x.push("fillStyle",l.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const R=.5-h;let L=h*y+R*d;const k=[],z=[];let b=0,N=0,j=0,K=0,G;for(let Y=0,I=f.length;Y<I;Y+=2){const O=f[Y];if(O===`
`){N+=b,b=0,L=h*y+R*d,++K;continue}const D=f[Y+1]||a.font;D!==G&&(r&&k.push("font",D),i&&z.push("font",D),G=D),b=Math.max(b,p[j]);const X=[O,L+R*v[j]+h*(v[j]-g[K]),.5*(d+b)+N];L+=v[j],r&&k.push("strokeText",X),i&&z.push("fillText",X),++j}return Array.prototype.push.apply(x,k),Array.prototype.push.apply(x,z),this.labels_[s]=S,S}replayTextBackground_(e,n,i,r,s,o,l){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}calculateImageOrLabelDimensions_(e,n,i,r,s,o,l,a,u,c,h,d,f,m,_,v){l*=d[0],a*=d[1];let p=i-l,g=r-a;const y=s+u>e?e-u:s,x=o+c>n?n-c:o,E=m[3]+y*d[0]+m[1],w=m[0]+x*d[1]+m[2],S=p-m[3],R=g-m[0];(_||h!==0)&&(zn[0]=S,bn[0]=S,zn[1]=R,dn[1]=R,dn[0]=S+E,fn[0]=dn[0],fn[1]=R+w,bn[1]=fn[1]);let L;return h!==0?(L=kn(Vt(),i,r,1,1,h,-i,-r),De(L,zn),De(L,dn),De(L,fn),De(L,bn),hi(Math.min(zn[0],dn[0],fn[0],bn[0]),Math.min(zn[1],dn[1],fn[1],bn[1]),Math.max(zn[0],dn[0],fn[0],bn[0]),Math.max(zn[1],dn[1],fn[1],bn[1]),lr)):hi(Math.min(S,S+E),Math.min(R,R+w),Math.max(S,S+E),Math.max(R,R+w),lr),f&&(p=Math.round(p),g=Math.round(g)),{drawImageX:p,drawImageY:g,drawImageW:y,drawImageH:x,originX:u,originY:c,declutterBox:{minX:lr[0],minY:lr[1],maxX:lr[2],maxY:lr[3],value:v},canvasTransform:L,scale:d}}replayImageOrLabel_(e,n,i,r,s,o,l){const a=!!(o||l),u=r.declutterBox,c=l?l[2]*r.scale[0]/2:0;return u.minX-c<=n[0]&&u.maxX+c>=0&&u.minY-c<=n[1]&&u.maxY+c>=0&&(a&&this.replayTextBackground_(e,zn,dn,fn,bn,o,l),mS(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const i=De(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,i,r){const s=this.textStates[n],o=this.createLabel(e,n,r,i),l=this.strokeStates[i],a=this.pixelRatio,u=nc(Array.isArray(e)?e[0]:e,s.textAlign||_o),c=fa[s.textBaseline||aa],h=l&&l.lineWidth?l.lineWidth:0,d=o.width/a-2*s.scale[0],f=u*d+2*(.5-u)*h,m=c*o.height/a+2*(.5-c)*h;return{label:o,anchorX:f,anchorY:m}}execute_(e,n,i,r,s,o,l,a){const u=this.zIndexContext_;let c;this.pixelCoordinates_&&mi(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=li(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),fw(this.renderedTransform_,i));let h=0;const d=r.length;let f=0,m,_,v,p,g,y,x,E,w,S,R,L,k,z=0,b=0;const N=this.coordinateCache_,j=this.viewRotation_,K=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,G={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},Y=this.instructions!=r||this.overlaps?0:200;let I,O,D,X;for(;h<d;){const P=r[h];switch(P[0]){case W.BEGIN_GEOMETRY:I=P[1],X=P[3],I.getGeometry()?l!==void 0&&!rt(l,X.getExtent())?h=P[2]+1:++h:h=P[2],u&&(u.zIndex=P[4]);break;case W.BEGIN_PATH:z>Y&&(this.fill_(e),z=0),b>Y&&(e.stroke(),b=0),!z&&!b&&(e.beginPath(),g=NaN,y=NaN),++h;break;case W.CIRCLE:f=P[1];const fe=c[f],ae=c[f+1],we=c[f+2],Ce=c[f+3],Ht=we-fe,Ft=Ce-ae,dt=Math.sqrt(Ht*Ht+Ft*Ft);e.moveTo(fe+dt,ae),e.arc(fe,ae,dt,0,2*Math.PI,!0),++h;break;case W.CLOSE_PATH:e.closePath(),++h;break;case W.CUSTOM:f=P[1],m=P[2];const zo=P[3],Qa=P[4],ss=P[5];G.geometry=zo,G.feature=I,h in N||(N[h]=[]);const _i=N[h];ss?ss(c,f,m,2,_i):(_i[0]=c[f],_i[1]=c[f+1],_i.length=2),u&&(u.zIndex=P[6]),Qa(_i,G),++h;break;case W.DRAW_IMAGE:f=P[1],m=P[2],w=P[3],_=P[4],v=P[5];let xt=P[6];const qt=P[7],Hi=P[8],qi=P[9],os=P[10];let yi=P[11];const Qi=P[12];let Ji=P[13];p=P[14]||"declutter";const Me=P[15];if(!w&&P.length>=20){S=P[19],R=P[20],L=P[21],k=P[22];const Et=this.drawLabelWithPointPlacement_(S,R,L,k);w=Et.label,P[3]=w;const vi=P[23];_=(Et.anchorX-vi)*this.pixelRatio,P[4]=_;const wt=P[24];v=(Et.anchorY-wt)*this.pixelRatio,P[5]=v,xt=w.height,P[6]=xt,Ji=w.width,P[13]=Ji}let Ja;P.length>25&&(Ja=P[25]);let eu,bo,jo;P.length>17?(eu=P[16],bo=P[17],jo=P[18]):(eu=Mi,bo=null,jo=null),os&&K?yi+=j:!os&&!K&&(yi-=j);let my=0;for(;f<m;f+=2){if(Ja&&Ja[my++]<Ji/this.pixelRatio)continue;const Et=this.calculateImageOrLabelDimensions_(w.width,w.height,c[f],c[f+1],Ji,xt,_,v,Hi,qi,yi,Qi,s,eu,!!bo||!!jo,I),vi=[e,n,w,Et,qt,bo,jo];if(a){let wt,Qt,Ct;if(Me){const ye=m-f;if(!Me[ye]){Me[ye]={args:vi,declutterMode:p};continue}const $e=Me[ye];wt=$e.args,Qt=$e.declutterMode,delete Me[ye],Ct=vp(wt)}let un,cn;if(wt&&(Qt!=="declutter"||!a.collides(Ct))&&(un=!0),(p!=="declutter"||!a.collides(Et.declutterBox))&&(cn=!0),Qt==="declutter"&&p==="declutter"){const ye=un&&cn;un=ye,cn=ye}un&&(Qt!=="none"&&a.insert(Ct),this.replayImageOrLabel_.apply(this,wt)),cn&&(p!=="none"&&a.insert(Et.declutterBox),this.replayImageOrLabel_.apply(this,vi))}else this.replayImageOrLabel_.apply(this,vi)}++h;break;case W.DRAW_CHARS:const Hd=P[1],qd=P[2],tu=P[3],_y=P[4];k=P[5];const yy=P[6],Qd=P[7],Jd=P[8];L=P[9];const nu=P[10];S=P[11],Array.isArray(S)&&(S=S.reduce(NR,"")),R=P[12];const ef=[P[13],P[13]];p=P[14]||"declutter";const vy=P[15],iu=this.textStates[R],ls=iu.font,as=[iu.scale[0]*Qd,iu.scale[1]*Qd];let us;ls in this.widths_?us=this.widths_[ls]:(us={},this.widths_[ls]=us);const tf=AR(c,Hd,qd,2),nf=Math.abs(as[0])*np(ls,S,us);if(_y||nf<=tf){const Et=this.textStates[R].textAlign,vi=(tf-nf)*nc(S,Et),wt=OR(c,Hd,qd,2,S,vi,yy,Math.abs(as[0]),np,ls,us,K?0:this.viewRotation_,vy);e:if(wt){const Qt=[];let Ct,un,cn,ye,$e;if(L)for(Ct=0,un=wt.length;Ct<un;++Ct){$e=wt[Ct],cn=$e[4],ye=this.createLabel(cn,R,"",L),_=$e[2]+(as[0]<0?-nu:nu),v=tu*ye.height+(.5-tu)*2*nu*as[1]/as[0]-Jd;const hn=this.calculateImageOrLabelDimensions_(ye.width,ye.height,$e[0],$e[1],ye.width,ye.height,_,v,0,0,$e[3],ef,!1,Mi,!1,I);if(a&&p==="declutter"&&a.collides(hn.declutterBox))break e;Qt.push([e,n,ye,hn,1,null,null])}if(k)for(Ct=0,un=wt.length;Ct<un;++Ct){$e=wt[Ct],cn=$e[4],ye=this.createLabel(cn,R,k,""),_=$e[2],v=tu*ye.height-Jd;const hn=this.calculateImageOrLabelDimensions_(ye.width,ye.height,$e[0],$e[1],ye.width,ye.height,_,v,0,0,$e[3],ef,!1,Mi,!1,I);if(a&&p==="declutter"&&a.collides(hn.declutterBox))break e;Qt.push([e,n,ye,hn,1,null,null])}a&&p!=="none"&&a.load(Qt.map(vp));for(let hn=0,xy=Qt.length;hn<xy;++hn)this.replayImageOrLabel_.apply(this,Qt[hn])}}++h;break;case W.END_GEOMETRY:if(o!==void 0){I=P[1];const Et=o(I,X,p);if(Et)return Et}++h;break;case W.FILL:Y?z++:this.fill_(e),++h;break;case W.MOVE_TO_LINE_TO:for(f=P[1],m=P[2],O=c[f],D=c[f+1],e.moveTo(O,D),g=O+.5|0,y=D+.5|0,f+=2;f<m;f+=2)O=c[f],D=c[f+1],x=O+.5|0,E=D+.5|0,(f==m-2||x!==g||E!==y)&&(e.lineTo(O,D),g=x,y=E);++h;break;case W.SET_FILL_STYLE:this.alignAndScaleFill_=P[2],z&&(this.fill_(e),z=0,b&&(e.stroke(),b=0)),e.fillStyle=P[1],++h;break;case W.SET_STROKE_STYLE:b&&(e.stroke(),b=0),this.setStrokeStyle_(e,P),++h;break;case W.STROKE:Y?b++:e.stroke(),++h;break;default:++h;break}}z&&this.fill_(e),b&&e.stroke()}execute(e,n,i,r,s,o){this.viewRotation_=r,this.execute_(e,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,n,i,r,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,r,s)}}const Ir=["Polygon","Circle","LineString","Image","Text","Default"],dy=["Image","Text"],zR=Ir.filter(t=>!dy.includes(t));class bR{constructor(e,n,i,r,s,o,l){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Vt(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,l)}clip(e,n){const i=this.getClipCoords(n);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,n){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const s=e[i];for(const o in s){const l=s[o];r[o]=new FR(this.resolution_,this.pixelRatio_,this.overlaps_,l,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,n,i,r,s,o){r=Math.round(r);const l=r*2+1,a=kn(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=ke(l,l));const c=this.hitDetectionContext_;c.canvas.width!==l||c.canvas.height!==l?(c.canvas.width=l,c.canvas.height=l):u||c.clearRect(0,0,l,l);let h;this.renderBuffer_!==void 0&&(h=Nt(),Ws(h,e),gd(h,n*(this.renderBuffer_+r),h));const d=jR(r);let f;function m(E,w,S){const R=c.getImageData(0,0,l,l).data;for(let L=0,k=d.length;L<k;L++)if(R[d[L]]>0){if(!o||S==="none"||f!=="Image"&&f!=="Text"||o.includes(E)){const z=(d[L]-3)/4,b=r-z%l,N=r-(z/l|0),j=s(E,w,b*b+N*N);if(j)return j}c.clearRect(0,0,l,l);break}}const _=Object.keys(this.executorsByZIndex_).map(Number);_.sort(Cn);let v,p,g,y,x;for(v=_.length-1;v>=0;--v){const E=_[v].toString();for(g=this.executorsByZIndex_[E],p=Ir.length-1;p>=0;--p)if(f=Ir[p],y=g[f],y!==void 0&&(x=y.executeHitDetection(c,a,i,m,h),x))return x}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],l=[i,r,i,o,s,o,s,r];return li(l,0,8,2,e,l),l}isEmpty(){return Kr(this.executorsByZIndex_)}execute(e,n,i,r,s,o,l){const a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(l?dE:Cn),o=o||Ir;const u=Ir.length;for(let c=0,h=a.length;c<h;++c){const d=a[c].toString(),f=this.executorsByZIndex_[d];for(let m=0,_=o.length;m<_;++m){const v=o[m],p=f[v];if(p!==void 0){const g=l===null?void 0:p.getZIndexContext(),y=g?g.getContext():e,x=this.maxExtent_&&v!=="Image"&&v!=="Text";if(x&&(y.save(),this.clip(y,i)),!g||v==="Text"||v==="Image"?p.execute(y,n,i,r,s,l):g.pushFunction(E=>p.execute(E,n,i,r,s,l)),x&&y.restore(),g){g.offset();const E=a[c]*u+m;this.deferredZIndexContexts_[E]||(this.deferredZIndexContexts_[E]=[]),this.deferredZIndexContexts_[E].push(g)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(Cn);for(let i=0,r=n.length;i<r;++i)e[n[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[n[i]].length=0}}const ic={};function jR(t){if(ic[t]!==void 0)return ic[t];const e=t*2+1,n=t*t,i=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const l=s*s+o*o;if(l>n)break;let a=i[l];a||(a=[],i[l]=a),a.push(((t+s)*e+(t+o))*4+3),s>0&&a.push(((t-s)*e+(t+o))*4+3),o>0&&(a.push(((t+s)*e+(t-o))*4+3),s>0&&a.push(((t-s)*e+(t-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return ic[t]=r,r}class GR extends hy{constructor(e,n,i,r,s,o,l){super(),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?Na(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Vt()}drawImages_(e,n,i,r){if(!this.image_)return;const s=li(e,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,l=this.tmpLocalTransform_,a=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=a*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=s.length;c<h;c+=2){const d=s[c]-this.imageAnchorX_,f=s[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const m=d+this.imageAnchorX_,_=f+this.imageAnchorY_;kn(l,m,_,1,1,u,-m,-_),o.save(),o.transform.apply(o,l),o.translate(m,_),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=a)}drawText_(e,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=li(e,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);n<i;n+=r){const a=s[n]+this.textOffsetX_,u=s[n+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(a-this.textOffsetX_,u-this.textOffsetY_),o.rotate(l),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,a,u),this.textFillState_&&o.fillText(this.text_,a,u))}}moveToLineTo_(e,n,i,r,s){const o=this.context_,l=li(e,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(l[0],l[1]);let a=l.length;s&&(a-=2);for(let u=2;u<a;u+=2)o.lineTo(l[u],l[u+1]);return s&&o.closePath(),i}drawRings_(e,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(e,n,i[s],r,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!rt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=Cw(e,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const i=n.getGeometryFunction()(e);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!rt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(rt(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),l=e.getStride();i.beginPath();for(let a=0,u=o.length;a<u;++a)s=this.moveToLineTo_(r,s,o[a],l,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!rt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!rt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();n.beginPath();for(let l=0,a=s.length;l<a;++l){const u=s[l];r=this.drawRings_(i,r,u,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,n.lineCap=e.lineCap),mi(i.lineDash,e.lineDash)||n.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:_o;i?(i.font!=e.font&&(i.font=e.font,n.font=e.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=r,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:on(i||it)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),l=n.getLineJoin(),a=n.getWidth(),u=n.getMiterLimit(),c=s||Sn;this.strokeState_={lineCap:r!==void 0?r:qr,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(o||Rn)*this.pixelRatio_,lineJoin:l!==void 0?l:Qr,lineWidth:(a!==void 0?a:yo)*this.pixelRatio_,miterLimit:u!==void 0?u:po,strokeStyle:on(i||mo)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const f=n.getColor();this.textFillState_={fillStyle:on(f||it)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),m=i.getLineCap(),_=i.getLineDash(),v=i.getLineDashOffset(),p=i.getLineJoin(),g=i.getWidth(),y=i.getMiterLimit();this.textStrokeState_={lineCap:m!==void 0?m:qr,lineDash:_||Sn,lineDashOffset:v||Rn,lineJoin:p!==void 0?p:Qr,lineWidth:g!==void 0?g:yo,miterLimit:y!==void 0?y:po,strokeStyle:on(f||mo)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),l=e.getRotateWithView(),a=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:V0,textAlign:h!==void 0?h:_o,textBaseline:d!==void 0?d:aa},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,m,_)=>f+=_%2?" ":m,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=a!==void 0?a:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const rn=.5;function WR(t,e,n,i,r,s,o,l,a){const u=r,c=t[0]*rn,h=t[1]*rn,d=ke(c,h);d.imageSmoothingEnabled=!1;const f=d.canvas,m=new GR(d,rn,r,null,o,l,null),_=n.length,v=Math.floor((256*256*256-1)/_),p={};for(let y=1;y<=_;++y){const x=n[y-1],E=x.getStyleFunction()||i;if(!E)continue;let w=E(x,s);if(!w)continue;Array.isArray(w)||(w=[w]);const R=(y*v).toString(16).padStart(7,"#00000");for(let L=0,k=w.length;L<k;++L){const z=w[L],b=z.getGeometryFunction()(x);if(!b||!rt(u,b.getExtent()))continue;const N=z.clone(),j=N.getFill();j&&j.setColor(R);const K=N.getStroke();K&&(K.setColor(R),K.setLineDash(null)),N.setText(void 0);const G=z.getImage();if(G){const D=G.getImageSize();if(!D)continue;const X=ke(D[0],D[1],void 0,{alpha:!1}),P=X.canvas;X.fillStyle=R,X.fillRect(0,0,P.width,P.height),N.setImage(new Za({img:P,anchor:G.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:G.getOrigin(),opacity:1,size:G.getSize(),scale:G.getScale(),rotation:G.getRotation(),rotateWithView:G.getRotateWithView()}))}const Y=N.getZIndex()||0;let I=p[Y];I||(I={},p[Y]=I,I.Polygon=[],I.Circle=[],I.LineString=[],I.Point=[]);const O=b.getType();if(O==="GeometryCollection"){const D=b.getGeometriesArrayRecursive();for(let X=0,P=D.length;X<P;++X){const Ee=D[X];I[Ee.getType().replace("Multi","")].push(Ee,N)}}else I[O.replace("Multi","")].push(b,N)}}const g=Object.keys(p).map(Number).sort(Cn);for(let y=0,x=g.length;y<x;++y){const E=p[g[y]];for(const w in E){const S=E[w];for(let R=0,L=S.length;R<L;R+=2){m.setStyle(S[R+1]);for(let k=0,z=e.length;k<z;++k)m.setTransform(e[k]),m.drawGeometry(S[R])}}}return d.getImageData(0,0,f.width,f.height)}function UR(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*rn),s=Math.floor(Math.round(t[1])*rn),o=(pe(r,0,n.width-1)+pe(s,0,n.height-1)*n.width)*4,l=n.data[o],a=n.data[o+1],c=n.data[o+2]+256*(a+256*l),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&i.push(e[c/h-1])}return i}const XR=.5,fy={Point:qR,LineString:$R,Polygon:JR,MultiPoint:QR,MultiLineString:ZR,MultiPolygon:HR,GeometryCollection:KR,Circle:YR};function BR(t,e){return parseInt(ne(t),10)-parseInt(ne(e),10)}function Ep(t,e){const n=gy(t,e);return n*n}function gy(t,e){return XR*t/e}function YR(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const a=t.getBuilder(n.getZIndex(),"Circle");a.setFillStrokeStyle(s,o),a.drawCircle(e,i,r)}const l=n.getText();if(l&&l.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(l),a.drawText(e,i)}}function wp(t,e,n,i,r,s,o,l){const a=[],u=n.getImage();if(u){let d=!0;const f=u.getImageState();f==Z.LOADED||f==Z.ERROR?d=!1:f==Z.IDLE&&u.load(),d&&a.push(u.ready())}const c=n.getFill();c&&c.loading()&&a.push(c.ready());const h=a.length>0;return h&&Promise.all(a).then(()=>r(null)),VR(t,e,n,i,s,o,l),h}function VR(t,e,n,i,r,s,o){const l=n.getGeometryFunction()(e);if(!l)return;const a=l.simplifyTransformed(i,r);if(n.getRenderer())py(t,a,n,e,o);else{const c=fy[a.getType()];c(t,a,n,e,o,s)}}function py(t,e,n,i,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let l=0,a=o.length;l<a;++l)py(t,o[l],n,i,r);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)}function KR(t,e,n,i,r,s){const o=e.getGeometriesArray();let l,a;for(l=0,a=o.length;l<a;++l){const u=fy[o[l].getType()];u(t,o[l],n,i,r,s)}}function $R(t,e,n,i,r){const s=n.getStroke();if(s){const l=t.getBuilder(n.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i,r)}}function ZR(t,e,n,i,r){const s=n.getStroke();if(s){const l=t.getBuilder(n.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawMultiLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i,r)}}function HR(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawMultiPolygon(e,i,r)}const l=n.getText();if(l&&l.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(l),a.drawText(e,i,r)}}function qR(t,e,n,i,r,s){const o=n.getImage(),l=n.getText(),a=l&&l.getText(),u=s&&o&&a?{}:void 0;if(o){if(o.getImageState()!=Z.LOADED)return;const c=t.getBuilder(n.getZIndex(),"Image");c.setImageStyle(o,u),c.drawPoint(e,i,r)}if(a){const c=t.getBuilder(n.getZIndex(),"Text");c.setTextStyle(l,u),c.drawText(e,i,r)}}function QR(t,e,n,i,r,s){const o=n.getImage(),l=o&&o.getOpacity()!==0,a=n.getText(),u=a&&a.getText(),c=s&&l&&u?{}:void 0;if(l){if(o.getImageState()!=Z.LOADED)return;const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(o,c),h.drawMultiPoint(e,i,r)}if(u){const h=t.getBuilder(n.getZIndex(),"Text");h.setTextStyle(a,c),h.drawText(e,i,r)}}function JR(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawPolygon(e,i,r)}const l=n.getText();if(l&&l.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(l),a.drawText(e,i,r)}}class eT extends oy{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Nt(),this.wrappedRenderedExtent_=Nt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,i){const r=n.extent,s=n.viewState,o=s.center,l=s.resolution,a=s.projection,u=s.rotation,c=a.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=n.pixelRatio,m=n.viewHints,_=!(m[Be.ANIMATING]||m[Be.INTERACTING]),v=this.context,p=Math.round(ie(r)/l*f),g=Math.round(Ve(r)/l*f),y=h.getWrapX()&&a.canWrapX(),x=y?ie(c):null,E=y?Math.ceil((r[2]-c[2])/x)+1:1;let w=y?Math.floor((r[0]-c[0])/x):0;do{let S=this.getRenderTransform(o,l,0,f,p,g,w*x);n.declutter&&(S=S.slice(0)),e.execute(v,[v.canvas.width,v.canvas.height],S,u,_,i===void 0?Ir:i?dy:zR,i?d&&n.declutter[d]:void 0)}while(++w<E)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=ke(this.context.canvas.width,this.context.canvas.height,gp))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Ya(this.context),gp.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,n);const s=this.context,o=this.replayGroup_;let l=o&&!o.isEmpty();if(!l&&!(this.getLayer().hasListener(Pt.PRERENDER)||this.getLayer().hasListener(Pt.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),r.projection,this.clipped_=!1,l&&i.extent&&this.clipping){const a=Zn(i.extent);l=rt(a,e.extent),this.clipped_=l&&!Sr(a,e.extent),this.clipped_&&this.clipUnrotated(s,e,a)}return l&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,l=this.renderedProjection_,a=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=i[0]*rn,d=i[1]*rn;c.push(this.getRenderTransform(r,s,o,rn,h,d,0).slice());const f=u.getSource(),m=l.getExtent();if(f.getWrapX()&&l.canWrapX()&&!Sr(m,a)){let _=a[0];const v=ie(m);let p=0,g;for(;_<m[0];)--p,g=v*p,c.push(this.getRenderTransform(r,s,o,rn,h,d,g).slice()),_+=v;for(p=0,_=a[2];_>m[2];)++p,g=v*p,c.push(this.getRenderTransform(r,s,o,rn,h,d,g).slice()),_-=v}this.hitDetectionImageData_=WR(i,c,this.renderedFeatures_,u.getStyleFunction(),a,s,o,Ep(s,this.renderedPixelRatio_))}n(UR(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,i,r,s){var d,f;if(!this.replayGroup_)return;const o=n.viewState.resolution,l=n.viewState.rotation,a=this.getLayer(),u={},c=function(m,_,v){const p=ne(m),g=u[p];if(g){if(g!==!0&&v<g.distanceSq){if(v===0)return u[p]=!0,s.splice(s.lastIndexOf(g),1),r(m,a,_);g.geometry=_,g.distanceSq=v}}else{if(v===0)return u[p]=!0,r(m,a,_);s.push(u[p]={feature:m,layer:a,geometry:_,distanceSq:v,callback:r})}},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,l,i,c,h?(f=(d=n.declutter)==null?void 0:d[h])==null?void 0:f.all().map(m=>m.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=e.viewHints[Be.ANIMATING],s=e.viewHints[Be.INTERACTING],o=n.getUpdateWhileAnimating(),l=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,f=n.getRevision(),m=n.getRenderBuffer();let _=n.getRenderOrder();_===void 0&&(_=BR);const v=u.center.slice(),p=gd(a,m*h),g=p.slice(),y=[p.slice()],x=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!Sr(x,e.extent)){const j=ie(x),K=Math.max(ie(p)/2,j);p[0]=x[0]-K,p[2]=x[2]+K,d0(v,c);const G=c0(y[0],c);G[0]<x[0]&&G[2]<x[2]?y.push([G[0]+j,G[1],G[2]+j,G[3]]):G[0]>x[0]&&G[2]>x[2]&&y.push([G[0]-j,G[1],G[2]-j,G[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==_&&this.renderedFrameDeclutter_===!!e.declutter&&Sr(this.wrappedRenderedExtent_,p))return mi(this.renderedExtent_,g)||(this.hitDetectionImageData_=null,this.renderedExtent_=g),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const E=new MR(gy(h,d),p,h,d);let w;for(let j=0,K=y.length;j<K;++j)i.loadFeatures(y[j],h,c);const S=Ep(h,d);let R=!0;const L=(j,K)=>{let G;const Y=j.getStyleFunction()||n.getStyleFunction();if(Y&&(G=Y(j,h)),G){const I=this.renderFeature(j,S,G,E,w,this.getLayer().getDeclutter(),K);R=R&&!I}},k=E0(p),z=i.getFeaturesInExtent(k);_&&z.sort(_);for(let j=0,K=z.length;j<K;++j)L(z[j],j);this.renderedFeatures_=z,this.ready=R;const b=E.finish(),N=new bR(p,h,d,i.getOverlaps(),b,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=_,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=g,this.wrappedRenderedExtent_=p,this.renderedCenter_=v,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=N,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,i,r,s,o,l){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let u=0,c=i.length;u<c;++u)a=wp(r,e,i[u],n,this.boundHandleStyleImageChange_,s,o,l)||a;else a=wp(r,e,i,n,this.boundHandleStyleImageChange_,s,o,l);return a}}class tT extends J0{constructor(e){super(e)}createRenderer(){return new eT(this)}}let nT=!1;function iT(t,e,n,i,r,s,o){const l=new XMLHttpRequest;l.open("GET",typeof t=="function"?t(n,i,r):t,!0),e.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=nT,l.onload=function(a){if(!l.status||l.status>=200&&l.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=l.responseText:u=="xml"?c=l.responseXML||l.responseText:u=="arraybuffer"&&(c=l.response),c?s(e.readFeatures(c,{extent:n,featureProjection:r}),e.readProjection(c)):o()}catch{o()}}else o()},l.onerror=o,l.send()}function Cp(t,e){return function(n,i,r,s,o){iT(t,e,n,i,r,(l,a)=>{this.addFeatures(l),s!==void 0&&s(l)},()=>{this.changed(),o!==void 0&&o()})}}function rT(t,e){return[[-1/0,-1/0,1/0,1/0]]}class Zd extends Zt{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new Zd(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(he(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Q(e,V.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?sT(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function sT(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(re(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}function oT(t,e,n,i){const r=[];let s=Nt();for(let o=0,l=n.length;o<l;++o){const a=n[o];s=pd(t,e,a[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=a[a.length-1]}return r}function Sp(t,e,n,i,r,s,o){let l,a;const u=(n-e)/i;if(u===1)l=e;else if(u===2)l=e,a=r;else if(u!==0){let c=t[e],h=t[e+1],d=0;const f=[0];for(let v=e+i;v<n;v+=i){const p=t[v],g=t[v+1];d+=Math.sqrt((p-c)*(p-c)+(g-h)*(g-h)),f.push(d),c=p,h=g}const m=r*d,_=hE(f,m);_<0?(a=(m-f[-_-2])/(f[-_-1]-f[-_-2]),l=e+(-_-2)*i):l=e+_*i}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=l===void 0?NaN:a===void 0?t[l+c]:It(t[l+c],t[l+i+c],a);return s}const Rp=Vt();class Ut{constructor(e,n,i,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?o0(this.flatCoordinates_):pd(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ui(this.getExtent());this.flatInteriorPoints_=Id(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=zw(this.flatCoordinates_,this.ends_),n=oT(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Aw(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Sp(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],l=Sp(e,n,o,2,.5);fd(this.flatMidpoints_,l),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=ht(e);const n=e.getExtent(),i=e.getWorldExtent();if(n&&i){const r=Ve(i)/Ve(n);kn(Rp,i[0],i[3],r,-r,0,0,0),li(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Rp,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Ut(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Q_((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=Td(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=Pw(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=L0(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new Ut(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Ut.prototype.getFlatCoordinates=Ut.prototype.getOrientedFlatCoordinates;class Tp{constructor(e){this.rbush_=new G0(e),this.items_={}}insert(e,n){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(i),this.items_[ne(n)]=i}load(e,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=e[r],l=n[r],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:l};i[r]=a,this.items_[ne(l)]=a}this.rbush_.load(i)}remove(e){const n=ne(e),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(e,n){const i=this.items_[ne(n)],r=[i.minX,i.minY,i.maxX,i.maxY];co(r,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let i;for(let r=0,s=e.length;r<s;r++)if(i=n(e[r]),i)return i;return i}isEmpty(){return Kr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return hi(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}const St={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class jn extends An{constructor(e,n,i){super(e),this.feature=n,this.features=i}}class lT extends cy{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=uo,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(re(this.format_,"`format` must be set when `url` is set"),this.loader_=Cp(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:rT;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new Tp:null,this.loadedExtentsRtree_=new Tp,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!n&&i===void 0&&(i=new sn(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=ne(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new jn(St.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof Ut||(this.featureChangeKeys_[e]=[Q(n,V.CHANGE,this.handleFeatureChange_,this),Q(n,Vr.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let i=!0;if(n.getId()!==void 0){const r=String(n.getId());if(!(r in this.idIndex_))this.idIndex_[r]=n;else if(n instanceof Ut){const s=this.idIndex_[r];s instanceof Ut?Array.isArray(s)?s.push(n):this.idIndex_[r]=[s,n]:i=!1}else i=!1}return i&&(re(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const l=e[s],a=ne(l);this.addToIndex_(a,l)&&i.push(l)}for(let s=0,o=i.length;s<o;s++){const l=i[s],a=ne(l);this.setupChangeEvents_(a,l);const u=l.getGeometry();if(u){const c=u.getExtent();n.push(c),r.push(l)}else this.nullGeometryFeatures_[a]=l}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(St.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new jn(St.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(St.ADDFEATURE,function(i){n||(n=!0,e.push(i.feature),n=!1)}),this.addEventListener(St.REMOVEFEATURE,function(i){n||(n=!0,e.remove(i.feature),n=!1)}),e.addEventListener(tt.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),e.addEventListener(tt.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(he);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new jn(St.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof Ut||s.intersectsCoordinate(e))return n(r)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof Ut||r.intersectsExtent(e)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Kr(this.nullGeometryFeatures_)||fd(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){n.push(i)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=h0(e,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let l=1/0;const a=[-1/0,-1/0,1/0,1/0];return n=n||ao,this.featuresRtree_.forEachInExtent(a,function(u){if(n(u)){const c=u.getGeometry(),h=l;if(l=c instanceof Ut?0:c.closestPointXY(i,r,o,l),l<h){s=u;const d=Math.sqrt(l);a[0]=i-d,a[1]=r-d,a[2]=i+d,a[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,i=ne(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new jn(St.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:ne(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Kr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,n,i);for(let o=0,l=s.length;o<l;++o){const a=s[o];r.forEachInExtent(a,function(c){return Sr(c.extent,a)})||(++this.loadingExtentsCount_,this.dispatchEvent(new jn(St.FEATURESLOADSTART)),this.loader_.call(this,a,n,i,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new jn(St.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new jn(St.FEATURESLOADERROR))}),r.insert(a,{extent:a.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_,i=n.forEachInExtent(e,function(r){if(co(r.extent,e))return r});i&&n.remove(i)}removeFeatures(e){let n=!1;for(let i=0,r=e.length;i<r;++i)n=this.removeFeatureInternal(e[i])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=ne(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[n];i==null||i.forEach(he),delete this.featureChangeKeys_[n];const r=e.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[n],this.hasListener(St.REMOVEFEATURE)&&this.dispatchEvent(new jn(St.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){re(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Cp(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Ue={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class aT extends Zt{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Kw,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Ue.ELEMENT,this.handleElementChanged),this.addChangeListener(Ue.MAP,this.handleMapChanged),this.addChangeListener(Ue.OFFSET,this.handleOffsetChanged),this.addChangeListener(Ue.POSITION,this.handlePositionChanged),this.addChangeListener(Ue.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Ue.ELEMENT)}getId(){return this.id}getMap(){return this.get(Ue.MAP)||null}getOffset(){return this.get(Ue.OFFSET)}getPosition(){return this.get(Ue.POSITION)}getPositioning(){return this.get(Ue.POSITIONING)}handleElementChanged(){O0(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var n;this.mapPostrenderListenerKey&&((n=this.element)==null||n.remove(),he(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Q(e,_n.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Ue.ELEMENT,e)}setMap(e){this.set(Ue.MAP,e)}setOffset(e){this.set(Ue.OFFSET,e)}setPosition(e){this.set(Ue.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(Ue.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[Zw(r),Hw(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Sr(i,s)){const l=s[0]-i[0],a=i[2]-s[2],u=s[1]-i[1],c=i[3]-s[3],h=[0,0];if(l<0?h[0]=l-o:a<0&&(h[0]=Math.abs(a)+o),u<0?h[1]=u-o:c<0&&(h[1]=Math.abs(c)+o),h[0]!==0||h[1]!==0){const d=n.getView().getCenterInternal(),f=n.getPixelFromCoordinateInternal(d);if(!f)return;const m=[f[0]+h[0],f[1]+h[1]],_=e.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(m),duration:_.duration,easing:_.easing})}}}getRect(e,n){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]}setPositioning(e){this.set(Ue.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),n=this.getPosition();if(!e||!e.isRendered()||!n){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(n),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,n){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+r[0])+"px",l=Math.round(e[1]+r[1])+"px";let a="0%",u="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?a="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(a="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?u="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(u="-50%");const c=`translate(${a}, ${u}) translate(${o}, ${l})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,i.transform=c)}getOptions(){return this.options}}const uT=({events:t=gt,currentEventId:e})=>{const n=Ma(),i=A.useRef(null),r=A.useRef(null),s=A.useRef(null),o=A.useRef(null);return A.useEffect(()=>{if(!r.current||!s.current||!o.current)return;const l=t&&t.length>0?t:gt,a=new lT,u=new tT({source:a,style:c=>{const h=c.get("id")===e;return new ai({image:new Oo({radius:h?12:8,fill:new rs({color:h?"#ffffff":"#888888"}),stroke:new Do({color:"#ffffff",width:2})})})}});if(!i.current){i.current=new bS({target:r.current,layers:[new oR({source:new SR({url:"https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",attributions:"© OpenStreetMap contributors, © CARTO"})}),u],view:new nn({center:Au([30,54.5]),zoom:4,minZoom:3,maxZoom:12})});const c=new aT({element:s.current,positioning:"bottom-center",offset:[0,-10],autoPan:!0});i.current.addOverlay(c),i.current.on("pointermove",h=>{var f;const d=(f=i.current)==null?void 0:f.forEachFeatureAtPixel(h.pixel,m=>m);if(d){const m=d.getGeometry().getCoordinates(),_=d.get("title"),v=d.get("date"),p=d.get("coverImage");o.current.innerHTML=`
            <div class="bg-black/90 px-3 py-2 rounded-lg border border-gray-700 flex items-center gap-3 max-w-xs">
              <img src="${p}" alt="${_}" class="w-16 h-16 object-cover rounded-md border border-gray-700" />
              <div>
                <div class="font-medium text-sm text-white mb-1">${_}</div>
                <div class="text-xs text-gray-300 mb-1">${v}</div>
              </div>
            </div>
          `,c.setPosition(m)}else c.setPosition(void 0)}),i.current.on("click",h=>{var f;const d=(f=i.current)==null?void 0:f.forEachFeatureAtPixel(h.pixel,m=>m);d&&n(`/events/${d.get("id")}`)})}if(a.clear(),l.forEach(c=>{if(!c.coordinates)return;const[h,d]=c.coordinates;if(typeof h!="number"||typeof d!="number")return;const f=new Zd({geometry:new Xa(Au([d,h])),id:c.id,title:c.title,date:c.date,coverImage:c.coverImage||""});a.addFeature(f)}),e){const c=l.find(h=>h.id===e);if(c&&c.coordinates&&i.current){const[h,d]=c.coordinates;i.current.getView().animate({center:Au([d,h]),zoom:6,duration:1e3})}}return()=>{i.current&&(i.current.setTarget(void 0),i.current=null)}},[t,e,n]),C.jsxs("div",{className:"relative w-full h-[500px] rounded-xl overflow-hidden shadow-2xl border border-gray-800",children:[C.jsx("div",{ref:r,className:"w-full h-full"}),C.jsx("div",{ref:s,className:"absolute z-10 pointer-events-none",children:C.jsx("div",{ref:o})})]})},cT=({eventId:t})=>{const e=Ma(),n=gt.find(u=>u.id===t),i=gt.findIndex(u=>u.id===t),r=i>0?gt[i-1]:null,s=i<gt.length-1?gt[i+1]:null,[o,l]=yh.useState("none");A.useEffect(()=>{n||e("/"),window.scrollTo(0,0)},[n,e,t]);const a=(u,c)=>{l(c),setTimeout(()=>{e(`/events/${u}`),l("none")},350)};return n?C.jsx(C.Fragment,{children:C.jsxs("div",{className:`animate-fadeIn relative transition-transform duration-300 ${o==="left"?"-translate-x-16 opacity-0":""} ${o==="right"?"translate-x-16 opacity-0":""}`,children:[C.jsx(q_,{title:n.title,subtitle:n.date,backgroundImage:n.coverImage}),C.jsxs("section",{className:"mb-16",children:[C.jsx("h2",{className:"section-title",children:"Описание"}),n.description.map((u,c)=>C.jsx("p",{className:"mb-4 leading-relaxed",children:u},c))]}),C.jsxs("section",{className:"mb-16",children:[C.jsx("h2",{className:"section-title",children:"Карта события"}),C.jsx(uT,{events:gt.map(u=>({id:u.id,title:u.title,date:u.date,coordinates:u.coordinates||[54.5,25]})),currentEventId:t})]}),n.timeline&&n.timeline.length>0&&C.jsx(cE,{events:n.timeline}),n.photos&&n.photos.length>0&&C.jsx(uE,{photos:n.photos.map((u,c)=>({url:u,caption:`Фото ${c+1}`}))}),n.significance&&C.jsxs("section",{className:"mb-16",children:[C.jsx("h2",{className:"section-title",children:"Значение"}),n.significance.map((u,c)=>C.jsx("p",{className:"mb-4 leading-relaxed",children:u},c))]}),n.casualties&&C.jsxs("section",{children:[C.jsx("h2",{className:"section-title",children:"Потери"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-8",children:[C.jsxs("div",{className:"bg-black/30 p-6 rounded-md border border-gray-800",children:[C.jsx("h3",{className:"text-xl font-medium mb-4",children:"Советские потери"}),C.jsx("p",{className:"text-gray-300",children:n.casualties.soviet})]}),C.jsxs("div",{className:"bg-black/30 p-6 rounded-md border border-gray-800",children:[C.jsx("h3",{className:"text-xl font-medium mb-4",children:"Немецкие потери"}),C.jsx("p",{className:"text-gray-300",children:n.casualties.german})]})]})]}),C.jsx("div",{className:"fixed bottom-0 left-0 w-full z-50 flex justify-center pointer-events-none",children:C.jsxs("div",{className:"w-full max-w-6xl px-2 pb-4 flex justify-between items-end gap-2 pointer-events-auto",children:[r?C.jsxs("button",{className:"group flex items-center gap-4 px-4 py-3 rounded-2xl bg-black/80 backdrop-blur-md border border-gray-700/50 hover:bg-black/90 transition-all duration-300 shadow-lg hover:shadow-2xl hover:-translate-x-2 pointer-events-auto",onClick:()=>a(r.id,"left"),children:[C.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden border border-gray-700/50 group-hover:border-gray-600/50 transition-all",children:C.jsx("img",{src:r.coverImage,alt:r.title,className:"w-full h-full object-cover filter grayscale group-hover:grayscale-0 transition-all"})}),C.jsxs("div",{className:"flex flex-col items-start",children:[C.jsxs("span",{className:"text-xs text-gray-400 font-medium mb-1",children:["← ",r.date]}),C.jsx("span",{className:"text-sm text-gray-200 group-hover:text-white transition-colors line-clamp-2 max-w-[120px] md:max-w-[200px]",children:r.title})]})]}):C.jsx("div",{}),s?C.jsxs("button",{className:"group flex items-center gap-4 px-4 py-3 rounded-2xl bg-black/80 backdrop-blur-md border border-gray-700/50 hover:bg-black/90 transition-all duration-300 shadow-lg hover:shadow-2xl hover:translate-x-2 pointer-events-auto",onClick:()=>a(s.id,"right"),children:[C.jsxs("div",{className:"flex flex-col items-end",children:[C.jsxs("span",{className:"text-xs text-gray-400 font-medium mb-1",children:[s.date," →"]}),C.jsx("span",{className:"text-sm text-gray-200 group-hover:text-white transition-colors line-clamp-2 max-w-[120px] md:max-w-[200px]",children:s.title})]}),C.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden border border-gray-700/50 group-hover:border-gray-600/50 transition-all",children:C.jsx("img",{src:s.coverImage,alt:s.title,className:"w-full h-full object-cover filter grayscale group-hover:grayscale-0 transition-all"})})]}):C.jsx("div",{})]})})]})}):null};function hT(){return C.jsxs("div",{className:"min-h-screen flex flex-col",children:[C.jsx("div",{className:"mist-background"}),C.jsx(Xx,{children:C.jsxs(Il,{path:"/",element:C.jsx(oE,{}),children:[C.jsx(Il,{index:!0,element:C.jsx(aE,{})}),gt.map(t=>C.jsx(Il,{path:`/events/${t.id}`,element:C.jsx(cT,{eventId:t.id})},t.id))]})})]})}j_(document.getElementById("root")).render(C.jsx(A.StrictMode,{children:C.jsx(Hx,{children:C.jsx(hT,{})})}));
